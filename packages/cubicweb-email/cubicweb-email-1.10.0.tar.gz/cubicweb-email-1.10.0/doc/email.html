<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="language" content="fr">
<meta name="author" content="Logilab">
<meta name="organization" content="Logilab S.A.">
<meta name="generator" content="Logilab Powerful Stylesheets (v3)">
<title>Utilisation du script d'import d'emails dans une instance CubicWeb</title>
<meta name="keywords" content="logilab">
<link rel="stylesheet" href="http://www.logilab.fr/lglb-publi-content.css" type="text/css">
<link rel="stylesheet" href="http://www.logilab.fr/lglb-publi-structure.css" type="text/css">
</head>
<body>
<table class="header" cellspacing="0"><tbody><tr>
<td class="logo"><a href="http://www.logilab.fr/"><img src="http://www.logilab.fr/images/logilab.png" alt="Logilab" height="75"></a></td>
<td class="text"><div class="header-title">Utilisation du script d'import d'emails dans une instance CubicWeb</div></td>
</tr></tbody></table>
<div class="header-sep"></div>
<table class="main" cellspacing="0"><tbody><tr>
<td class="left-margin"></td>
<td class="body">
<div class="component-title-block"><div class="component-title">Utilisation du script d'import d'emails dans une instance CubicWeb</div></div>


<div class="sect1-title">
<a name="conditions"></a>1. Conditions</div>

<ul class="list">
<li class="listitem">
<div class="para">Le composant cubicweb-email doit être installés pour cette instance</div>
</li>
<li class="listitem">
<div class="para">Pyro doit être activé pour cette instance</div>
</li>
</ul>

<div class="sect1-title">
<a name="utilisation-en-ligne-de-commande"></a>2. Utilisation en ligne de commande</div>

<div class="para">La commande <span class="emphasis">mboximport</span> de <span class="emphasis">cubicweb-ctl</span> permet d'importer un fichier au format
Unix Mailbox.  Il suffit de l'appeler en lui donnant en argument l'identifiant
de l'application et le fichier à importer. Par défaut votre nom d'utilisateur
sera utilisé pour se connecter à l'application, mais vous pouvez en spécifier un
autre avec l'option <span class="emphasis">-u</span>.</div>

<div class="sect1-title">
<a name="configuration-mutt"></a>3. Configuration mutt</div>

<div class="para">Dans le fichier <span class="emphasis">.muttrc</span>, ajouter par exemple la ligne :</div>
<div class="programlisting">
macro index "\ez" "&lt;pipe-message&gt;cubicweb-ctl mboximport -u toto -p toto monappli -&lt;enter&gt;"
</div>
<div class="para">et à partir de là vous pouvez faire "Alt-z" dans la vue d'index pour importer l'email
séléctionné dans l'instance. L'exemple ci-dessus suppose que :</div>
<ol class="list">
<li class="listitem">
<div class="para">l'identifiant pyro de l'application est "monappli"</div>
</li>
<li class="listitem">
<div class="para">Vous utilisez un compte toto / toto</div>
</li>
</ol>
<div class="para">Donner le mot de passe en ligne de commande est nécessaire car on ne sait pas le lire
correctement de manière interactive quand mutt lance la commande.</div>

</td>
</tr></tbody></table>
<div class="footer">Tous droits réservés à la société Logilab
S.A. - 104 bld Auguste Blanqui - F-75013 PARIS.</div>
</body>
</html>
