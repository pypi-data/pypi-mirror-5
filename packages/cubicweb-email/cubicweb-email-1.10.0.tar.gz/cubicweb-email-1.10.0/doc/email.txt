.. -*- coding: utf-8 -*-

Utilisation du script d'import d'emails dans une instance CubicWeb
------------------------------------------------------------------

Conditions
~~~~~~~~~~
* Le composant cubicweb-email doit être installés pour cette instance
* Pyro doit être activé pour cette instance


Utilisation en ligne de commande
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
La commande `mboximport` de `cubicweb-ctl` permet d'importer un fichier au format
Unix Mailbox.  Il suffit de l'appeler en lui donnant en argument l'identifiant
de l'application et le fichier à importer. Par défaut votre nom d'utilisateur
sera utilisé pour se connecter à l'application, mais vous pouvez en spécifier un
autre avec l'option `-u`.


Configuration mutt
~~~~~~~~~~~~~~~~~~
Dans le fichier *.muttrc*, ajouter par exemple la ligne : ::

    macro index "\ez" "<pipe-message>cubicweb-ctl mboximport -u toto -p toto monappli -<enter>" 

et à partir de là vous pouvez faire "Alt-z" dans la vue d'index pour importer l'email
séléctionné dans l'instance. L'exemple ci-dessus suppose que :

1. l'identifiant pyro de l'application est "monappli"
2. Vous utilisez un compte toto / toto

Donner le mot de passe en ligne de commande est nécessaire car on ne sait pas le lire 
correctement de manière interactive quand mutt lance la commande.
