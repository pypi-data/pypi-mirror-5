<html xmlns="http://www.w3.org/1999/xhtml" xmlns:tal="http://xml.zope.org/namespaces/tal"
	xmlns:metal="http://xml.zope.org/namespaces/metal" xmlns:i18n="http://xml.zope.org/namespaces/i18n"
	metal:use-macro="context/main_template/macros/master" i18n:domain="wasgehtengine.contenttypes">
	<body>

		<metal:content-core fill-slot="main">
			<metal:content-core define-macro="content-core">

				<article>
					<header>
						<h1>OpenStreetMap Import Status</h1>
					</header>

					<p>
						<strong>Predicates: </strong>
						<span tal:content="context/query_params" />
					</p>

					<p>
						<strong>Last run:</strong>
						<time tal:condition="context/last_run" tal:attributes="datetime context/last_run/isoformat"
							tal:content="python:context.last_run.strftime('%A, %x %H:%M')" />
						<span class="status-error" tal:condition="python: not(context.last_run)">Never</span>
					</p>
					<p>
						<strong>Last successful run without errors:</strong>
						<time tal:condition="context/last_successful_run"
							tal:attributes="datetime context/last_successful_run/isoformat; class python:'status-error' if context.last_successful_run != context.last_run else ''"
							tal:content="python:context.last_successful_run.strftime('%A, %x %H:%M')" />
						<span class="status-error" tal:condition="python: not(context.last_successful_run)">Never</span>
					</p>
					<p>
						<strong>Last successful run with imported or updated venues:</strong>
						<time tal:condition="context/last_run_with_venues_imported"
							tal:attributes="datetime context/last_run_with_venues_imported/isoformat; class python:'status-warning' if context.last_successful_run != context.last_run else ''"
							tal:content="python:context.last_run_with_venues_imported.strftime('%A, %x %H:%M')" />
						<span class="status-error" tal:condition="python: not(context.last_run_with_venues_imported)">Never</span>
					</p>
					<p>
						<strong>Number of imported venues at last run: </strong>
						<span tal:content="context/imported_venues_count" />
					</p>
				</article>
			</metal:content-core>
		</metal:content-core>
	</body>
</html>
