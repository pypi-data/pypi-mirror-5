2013-05-24 11:18:50,363 saml2:INFO Logging started
2013-05-24 11:18:57,484 saml2.idp:INFO <application> PATH: sso/redirect
2013-05-24 11:18:57,484 saml2.idp:INFO = KAKA =
2013-05-24 11:18:57,484 saml2.idp:DEBUG KAKA: idpauthn="dDdxSjJzajZYUmNNdXViM2lNUHFIY082OjE="
2013-05-24 11:18:57,484 saml2.idp:INFO -- No USER --
2013-05-24 11:18:57,485 saml2.idp:DEBUG Callback: (<class '__main__.SSO'>, 'redirect')
2013-05-24 11:18:57,485 saml2.idp:DEBUG ENVIRON: {'HTTP_COOKIE': 'idpauthn="dDdxSjJzajZYUmNNdXViM2lNUHFIY082OjE="', 'idp.authn_ref': None, 'SERVER_PROTOCOL': 'HTTP/1.1', 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.7.2', 'TERM_PROGRAM_VERSION': '309', 'REQUEST_METHOD': 'GET', 'LOGNAME': 'rolandh', 'USER': 'rolandh', 'HOME': '/Users/rolandh', 'QUERY_STRING': 'SAMLRequest=nVLBTgIxEL37FU0vnJbtsgJLwy5BCJEElcDiwVu3O0iTpcVOF%2BXvLYgaE8LBW2fy3rw3b9offGwrsgeLyui0ETVZg4CWplT6NW2s8kmQNAbZTV8j48PabfQC3mpARzxNI%2FftlNZWcyNQ%2BVJsAbmTfDl8mPFWk%2FGdNc5IU9EfQnSdIBDBOm%2BGkuH3c2Q01luwS7B7JWG1mKV049yOh2FlpKg2Bh1PWNKlZOy9KS2OrMuYJEQ0oYVSWZCOkuk4paoMmChiKSDqgFiXvVbRFl0hO3EJRScWvR7zQMQaphqd0C6lLRbFAWsHrduc9XiU8Hb3hZL5eds7pU8BXt20%2BAIhv8%2FzeTB%2FWuaUPJ8PQT2AZj71iJ90LZkYuxXu%2BsRjx%2B%2ByPkE5aKfcgWYXkwpx1%2FQX6Ye%2FEtnpyI9%2BxnQ8N5WSBzKsKvM%2BsiAcpHQtKgT6DyPOCo3K26EkzI6Kf79S9gk%3D&RelayState=%2F', 'PATH': '/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin', 'DISPLAY': '/tmp/launch-l4Dvdw/org.macosforge.xquartz:0', 'TERM_PROGRAM': 'Apple_Terminal', 'LANG': 'sv_SE.UTF-8', 'TERM': 'xterm-256color', 'SHELL': '/bin/bash', 'HTTP_CONNECTION': 'keep-alive', 'SERVER_NAME': 'lingon.catalogix.se', 'REMOTE_ADDR': '127.0.0.1', 'SHLVL': '1', 'MACOSX_DEPLOYMENT_TARGET': '10.6', 'SECURITYSESSIONID': '186a6', 'wsgi.url_scheme': 'http', 'TMPDIR': '/var/folders/5t/4k01mls142jd38mx3m3ht9000000gp/T/', 'SERVER_PORT': '8088', 'PATH_INFO': '/sso/redirect', 'CONTENT_LENGTH': '', 'TERM_SESSION_ID': '1B7BA483-5B67-4673-8FAF-0FB3A1DB7461', 'SSH_AUTH_SOCK': '/tmp/launch-tEficf/Listeners', 'wsgi.input': <socket._fileobject object at 0x101dfb250>, 'Apple_PubSub_Socket_Render': '/tmp/launch-IrCxK4/Render', 'HTTP_HOST': 'localhost:8088', 'SCRIPT_NAME': '', 'wsgi.multithread': True, 'LC_ALL': 'sv_SE.UTF-8', 'myapp.url_args': 'sso/redirect', '_': './idp.py', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'wsgi.version': (1, 0), 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/536.29.13 (KHTML, like Gecko) Version/6.0.4 Safari/536.29.13', 'GATEWAY_INTERFACE': 'CGI/1.1', 'wsgi.run_once': False, 'OLDPWD': '/Users/rolandh/code/pysaml2/example', 'wsgi.multiprocess': False, 'HTTP_ACCEPT_LANGUAGE': 'sv-se', 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x100282270>, '__CF_USER_TEXT_ENCODING': '0x1F6:0:7\n', 'Apple_Ubiquity_Message': '/tmp/launch-wx2pJw/Apple_Ubiquity_Message', 'PWD': '/Users/rolandh/code/pysaml2/example/idp2', 'CONTENT_TYPE': 'text/plain', 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x101f0d050>, 'REMOTE_HOST': '1.0.0.127.in-addr.arpa', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate', 'COMMAND_MODE': 'unix2003'}
2013-05-24 11:18:57,485 saml2.idp:INFO --- In SSO Redirect ---
2013-05-24 11:18:57,486 saml2.entity:INFO receiver addresses: ['http://localhost:8088/sso/redirect']
2013-05-24 11:18:57,486 saml2.entity:INFO Binding: urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect
2013-05-24 11:18:57,486 saml2.request:INFO xmlstr: <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-0ab3cae16eafd92b5a7ac63deb63a990" IssueInstant="2013-05-24T09:18:57Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:18:57,487 saml2.request:INFO request: <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-0ab3cae16eafd92b5a7ac63deb63a990" IssueInstant="2013-05-24T09:18:57Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:18:57,490 saml2.entity:DEBUG Loaded request
2013-05-24 11:18:57,491 saml2.entity:DEBUG Verified request
2013-05-24 11:18:57,491 saml2.idp:DEBUG _store_request: {'SAMLRequest': 'nVLBTgIxEL37FU0vnJbtsgJLwy5BCJEElcDiwVu3O0iTpcVOF+XvLYgaE8LBW2fy3rw3b9offGwrsgeLyui0ETVZg4CWplT6NW2s8kmQNAbZTV8j48PabfQC3mpARzxNI/ftlNZWcyNQ+VJsAbmTfDl8mPFWk/GdNc5IU9EfQnSdIBDBOm+GkuH3c2Q01luwS7B7JWG1mKV049yOh2FlpKg2Bh1PWNKlZOy9KS2OrMuYJEQ0oYVSWZCOkuk4paoMmChiKSDqgFiXvVbRFl0hO3EJRScWvR7zQMQaphqd0C6lLRbFAWsHrduc9XiU8Hb3hZL5eds7pU8BXt20+AIhv8/zeTB/WuaUPJ8PQT2AZj71iJ90LZkYuxXu+sRjx++yPkE5aKfcgWYXkwpx1/QX6Ye/EtnpyI9+xnQ8N5WSBzKsKvM+siAcpHQtKgT6DyPOCo3K26EkzI6Kf79S9gk=', 'RelayState': '/', 'req_info': <saml2.request.AuthnRequest object at 0x101f78750>}
2013-05-24 11:18:57,491 saml2.idp:DEBUG Do authentication
2013-05-24 11:18:57,491 saml2.idp:DEBUG Authn chosen: <function username_password_authn at 0x101d41398> (ref=1)
2013-05-24 11:18:57,491 saml2.idp:INFO The login page
2013-05-24 11:18:57,491 saml2.idp:INFO do_authentication argv: {'redirect_uri': 'http://localhost:8088/sso/redirect', 'key': '6553c9e0d5951ed23e456f3d7804c3d0d390c15d', 'action': '/verify', 'authn_reference': '1', 'login': '', 'password': ''}
2013-05-24 11:18:57,632 saml2.idp:INFO <application> PATH: css/main.css
2013-05-24 11:18:57,633 saml2.idp:INFO = KAKA =
2013-05-24 11:18:57,633 saml2.idp:DEBUG KAKA: idpauthn="dDdxSjJzajZYUmNNdXViM2lNUHFIY082OjE="
2013-05-24 11:18:57,633 saml2.idp:INFO -- No USER --
2013-05-24 11:19:02,722 saml2.idp:INFO <application> PATH: verify
2013-05-24 11:19:02,722 saml2.idp:INFO = KAKA =
2013-05-24 11:19:02,722 saml2.idp:DEBUG KAKA: idpauthn="dDdxSjJzajZYUmNNdXViM2lNUHFIY082OjE="
2013-05-24 11:19:02,722 saml2.idp:INFO -- No USER --
2013-05-24 11:19:02,723 saml2.idp:DEBUG Callback: <function do_verify at 0x101d41488>
2013-05-24 11:19:02,723 saml2.idp:DEBUG do_verify: {'form.submitted': ['Log In'], 'redirect_uri': ['http://localhost:8088/sso/redirect'], 'key': ['6553c9e0d5951ed23e456f3d7804c3d0d390c15d'], 'authn_reference': ['1'], 'login': ['upper'], 'password': ['crust']}
2013-05-24 11:19:02,723 saml2.idp:DEBUG Register upper under 'xhuaeYzXkSxfsML1zvBZQs17'
2013-05-24 11:19:02,723 saml2.idp:DEBUG Cookie expires: Fri, 24-May-2013 09:24:02 GMT
2013-05-24 11:19:02,723 saml2.idp:DEBUG Redirect => http://localhost:8088/sso/redirect?id=xhuaeYzXkSxfsML1zvBZQs17&key=6553c9e0d5951ed23e456f3d7804c3d0d390c15d
2013-05-24 11:19:02,732 saml2.idp:INFO <application> PATH: sso/redirect
2013-05-24 11:19:02,732 saml2.idp:INFO = KAKA =
2013-05-24 11:19:02,732 saml2.idp:DEBUG KAKA: idpauthn="eGh1YWVZelhrU3hmc01MMXp2QlpRczE3OjE="
2013-05-24 11:19:02,733 saml2.idp:DEBUG Callback: (<class '__main__.SSO'>, 'redirect')
2013-05-24 11:19:02,733 saml2.idp:DEBUG ENVIRON: {'HTTP_REFERER': 'http://localhost:8088/sso/redirect?SAMLRequest=nVLBTgIxEL37FU0vnJbtsgJLwy5BCJEElcDiwVu3O0iTpcVOF%2BXvLYgaE8LBW2fy3rw3b9offGwrsgeLyui0ETVZg4CWplT6NW2s8kmQNAbZTV8j48PabfQC3mpARzxNI%2FftlNZWcyNQ%2BVJsAbmTfDl8mPFWk%2FGdNc5IU9EfQnSdIBDBOm%2BGkuH3c2Q01luwS7B7JWG1mKV049yOh2FlpKg2Bh1PWNKlZOy9KS2OrMuYJEQ0oYVSWZCOkuk4paoMmChiKSDqgFiXvVbRFl0hO3EJRScWvR7zQMQaphqd0C6lLRbFAWsHrduc9XiU8Hb3hZL5eds7pU8BXt20%2BAIhv8%2FzeTB%2FWuaUPJ8PQT2AZj71iJ90LZkYuxXu%2BsRjx%2B%2ByPkE5aKfcgWYXkwpx1%2FQX6Ye%2FEtnpyI9%2BxnQ8N5WSBzKsKvM%2BsiAcpHQtKgT6DyPOCo3K26EkzI6Kf79S9gk%3D&RelayState=%2F', 'idp.authn_ref': '1', 'SERVER_PROTOCOL': 'HTTP/1.1', 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.7.2', 'TERM_PROGRAM_VERSION': '309', 'REQUEST_METHOD': 'GET', 'LOGNAME': 'rolandh', 'USER': 'rolandh', 'HTTP_ORIGIN': 'http://localhost:8088', 'HOME': '/Users/rolandh', 'QUERY_STRING': 'id=xhuaeYzXkSxfsML1zvBZQs17&key=6553c9e0d5951ed23e456f3d7804c3d0d390c15d', 'PATH': '/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin', 'DISPLAY': '/tmp/launch-l4Dvdw/org.macosforge.xquartz:0', 'TERM_PROGRAM': 'Apple_Terminal', 'LANG': 'sv_SE.UTF-8', 'TERM': 'xterm-256color', 'SHELL': '/bin/bash', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_COOKIE': 'idpauthn="eGh1YWVZelhrU3hmc01MMXp2QlpRczE3OjE="', 'SERVER_NAME': 'lingon.catalogix.se', 'REMOTE_ADDR': '127.0.0.1', 'SHLVL': '1', 'MACOSX_DEPLOYMENT_TARGET': '10.6', 'SECURITYSESSIONID': '186a6', 'wsgi.url_scheme': 'http', 'TMPDIR': '/var/folders/5t/4k01mls142jd38mx3m3ht9000000gp/T/', 'SERVER_PORT': '8088', 'PATH_INFO': '/sso/redirect', 'CONTENT_LENGTH': '', 'TERM_SESSION_ID': '1B7BA483-5B67-4673-8FAF-0FB3A1DB7461', 'SSH_AUTH_SOCK': '/tmp/launch-tEficf/Listeners', 'wsgi.input': <socket._fileobject object at 0x101dfb250>, 'Apple_PubSub_Socket_Render': '/tmp/launch-IrCxK4/Render', 'HTTP_HOST': 'localhost:8088', 'SCRIPT_NAME': '', 'wsgi.multithread': True, 'LC_ALL': 'sv_SE.UTF-8', 'myapp.url_args': 'sso/redirect', '_': './idp.py', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'wsgi.version': (1, 0), 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/536.29.13 (KHTML, like Gecko) Version/6.0.4 Safari/536.29.13', 'GATEWAY_INTERFACE': 'CGI/1.1', 'wsgi.run_once': False, 'OLDPWD': '/Users/rolandh/code/pysaml2/example', 'wsgi.multiprocess': False, 'HTTP_ACCEPT_LANGUAGE': 'sv-se', 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x100282270>, '__CF_USER_TEXT_ENCODING': '0x1F6:0:7\n', 'Apple_Ubiquity_Message': '/tmp/launch-wx2pJw/Apple_Ubiquity_Message', 'PWD': '/Users/rolandh/code/pysaml2/example/idp2', 'CONTENT_TYPE': 'text/plain', 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x101f0d050>, 'REMOTE_HOST': '1.0.0.127.in-addr.arpa', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate', 'COMMAND_MODE': 'unix2003'}
2013-05-24 11:19:02,733 saml2.idp:INFO --- In SSO Redirect ---
2013-05-24 11:19:02,733 saml2.idp:DEBUG _operation: {'SAMLRequest': 'nVLBTgIxEL37FU0vnJbtsgJLwy5BCJEElcDiwVu3O0iTpcVOF+XvLYgaE8LBW2fy3rw3b9offGwrsgeLyui0ETVZg4CWplT6NW2s8kmQNAbZTV8j48PabfQC3mpARzxNI/ftlNZWcyNQ+VJsAbmTfDl8mPFWk/GdNc5IU9EfQnSdIBDBOm+GkuH3c2Q01luwS7B7JWG1mKV049yOh2FlpKg2Bh1PWNKlZOy9KS2OrMuYJEQ0oYVSWZCOkuk4paoMmChiKSDqgFiXvVbRFl0hO3EJRScWvR7zQMQaphqd0C6lLRbFAWsHrduc9XiU8Hb3hZL5eds7pU8BXt20+AIhv8/zeTB/WuaUPJ8PQT2AZj71iJ90LZkYuxXu+sRjx++yPkE5aKfcgWYXkwpx1/QX6Ye/EtnpyI9+xnQ8N5WSBzKsKvM+siAcpHQtKgT6DyPOCo3K26EkzI6Kf79S9gk=', 'RelayState': '/', 'req_info': <saml2.request.AuthnRequest object at 0x101f78750>}
2013-05-24 11:19:02,733 saml2.idp:INFO parsed OK
2013-05-24 11:19:02,733 saml2.idp:DEBUG <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-0ab3cae16eafd92b5a7ac63deb63a990" IssueInstant="2013-05-24T09:18:57Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:19:02,733 saml2.mdstore:DEBUG _service(http://localhost:8087/sp.xml, spsso_descriptor, assertion_consumer_service, urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST)
2013-05-24 11:19:02,733 saml2.mdstore:DEBUG _service => [{'index': '1', 'binding': 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST', '__class__': 'urn:oasis:names:tc:SAML:2.0:metadata&AssertionConsumerService', 'location': 'http://localhost:8087'}]
2013-05-24 11:19:02,733 saml2.idp:DEBUG Binding: urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST, destination: http://localhost:8087
2013-05-24 11:19:02,734 saml2.mdstore:DEBUG _service(http://localhost:8087/sp.xml, spsso_descriptor, assertion_consumer_service, urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST)
2013-05-24 11:19:02,734 saml2.mdstore:DEBUG _service => [{'index': '1', 'binding': 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST', '__class__': 'urn:oasis:names:tc:SAML:2.0:metadata&AssertionConsumerService', 'location': 'http://localhost:8087'}]
2013-05-24 11:19:02,734 saml2.idp:INFO Identity: {'eduPersonAffiliation': 'affiliate', 'givenName': 'Derek', 'surname': 'Jeter'}
2013-05-24 11:19:02,734 saml2.ident:DEBUG local_policy: <saml2.assertion.Policy object at 0x101f113d0>, name_id_policy: <?xml version='1.0' encoding='UTF-8'?>
<ns0:NameIDPolicy xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" />
2013-05-24 11:19:02,734 saml2.assertion:DEBUG filter based on: {'edupersontargetedid': None}
2013-05-24 11:19:02,736 saml2.idp:INFO AuthNResponse: <?xml version='1.0' encoding='UTF-8'?>
<ns0:Response xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" Destination="http://localhost:8087" ID="id-98db9a80eb3aeeb85030c574984345f1" InResponseTo="id-0ab3cae16eafd92b5a7ac63deb63a990" IssueInstant="2013-05-24T09:19:02Z" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8088/idp.xml</ns1:Issuer><ns0:Status><ns0:StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success" /></ns0:Status><ns1:Assertion ID="id-09839d9fd986ceca845751935a44f577" IssueInstant="2013-05-24T09:19:02Z" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8088/idp.xml</ns1:Issuer><ns1:Subject><ns1:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" NameQualifier="" SPNameQualifier="http://localhost:8087/sp.xml">a3cbe509f0c1fcb68eff47942b8be289af2b5f3f3b9d68ba9cd4c42a6fd9b8b1</ns1:NameID><ns1:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer"><ns1:SubjectConfirmationData InResponseTo="id-0ab3cae16eafd92b5a7ac63deb63a990" NotOnOrAfter="2013-05-24T09:34:02Z" Recipient="http://localhost:8087" /></ns1:SubjectConfirmation></ns1:Subject><ns1:Conditions NotBefore="2013-05-24T09:19:02Z" NotOnOrAfter="2013-05-24T09:34:02Z"><ns1:AudienceRestriction><ns1:Audience>http://localhost:8087/sp.xml</ns1:Audience></ns1:AudienceRestriction></ns1:Conditions><ns1:AuthnStatement AuthnInstant="2013-05-24T09:19:02Z" SessionIndex="id-23a61e47dce3712c1cd31577aeb336ec"><ns1:AuthnContext><ns1:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</ns1:AuthnContextClassRef><ns1:AuthenticatingAuthority>http://lingon.catalogix.se</ns1:AuthenticatingAuthority></ns1:AuthnContext></ns1:AuthnStatement><ns1:AttributeStatement /></ns1:Assertion></ns0:Response>
2013-05-24 11:19:02,736 saml2.entity:INFO HTTP POST
2013-05-24 11:19:02,737 saml2.idp:DEBUG HTTPargs: {'url': 'http://localhost:8087', 'headers': [('Content-type', 'text/html')], 'data': ['<head>', '<title>SAML 2.0 POST</title>', '</head><body>', '<form method="post" action="http://localhost:8087">\n   <input type="hidden" name="SAMLResponse" value="PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz4KPG5zMDpSZXNwb25zZSB4bWxuczpuczA9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpwcm90b2NvbCIgeG1sbnM6bnMxPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIiBEZXN0aW5hdGlvbj0iaHR0cDovL2xvY2FsaG9zdDo4MDg3IiBJRD0iaWQtOThkYjlhODBlYjNhZWViODUwMzBjNTc0OTg0MzQ1ZjEiIEluUmVzcG9uc2VUbz0iaWQtMGFiM2NhZTE2ZWFmZDkyYjVhN2FjNjNkZWI2M2E5OTAiIElzc3VlSW5zdGFudD0iMjAxMy0wNS0yNFQwOToxOTowMloiIFZlcnNpb249IjIuMCI+PG5zMTpJc3N1ZXIgRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6bmFtZWlkLWZvcm1hdDplbnRpdHkiPmh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9pZHAueG1sPC9uczE6SXNzdWVyPjxuczA6U3RhdHVzPjxuczA6U3RhdHVzQ29kZSBWYWx1ZT0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOnN0YXR1czpTdWNjZXNzIiAvPjwvbnMwOlN0YXR1cz48bnMxOkFzc2VydGlvbiBJRD0iaWQtMDk4MzlkOWZkOTg2Y2VjYTg0NTc1MTkzNWE0NGY1NzciIElzc3VlSW5zdGFudD0iMjAxMy0wNS0yNFQwOToxOTowMloiIFZlcnNpb249IjIuMCI+PG5zMTpJc3N1ZXIgRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6bmFtZWlkLWZvcm1hdDplbnRpdHkiPmh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9pZHAueG1sPC9uczE6SXNzdWVyPjxuczE6U3ViamVjdD48bnMxOk5hbWVJRCBGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpuYW1laWQtZm9ybWF0OnRyYW5zaWVudCIgTmFtZVF1YWxpZmllcj0iIiBTUE5hbWVRdWFsaWZpZXI9Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4Ny9zcC54bWwiPmEzY2JlNTA5ZjBjMWZjYjY4ZWZmNDc5NDJiOGJlMjg5YWYyYjVmM2YzYjlkNjhiYTljZDRjNDJhNmZkOWI4YjE8L25zMTpOYW1lSUQ+PG5zMTpTdWJqZWN0Q29uZmlybWF0aW9uIE1ldGhvZD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmNtOmJlYXJlciI+PG5zMTpTdWJqZWN0Q29uZmlybWF0aW9uRGF0YSBJblJlc3BvbnNlVG89ImlkLTBhYjNjYWUxNmVhZmQ5MmI1YTdhYzYzZGViNjNhOTkwIiBOb3RPbk9yQWZ0ZXI9IjIwMTMtMDUtMjRUMDk6MzQ6MDJaIiBSZWNpcGllbnQ9Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4NyIgLz48L25zMTpTdWJqZWN0Q29uZmlybWF0aW9uPjwvbnMxOlN1YmplY3Q+PG5zMTpDb25kaXRpb25zIE5vdEJlZm9yZT0iMjAxMy0wNS0yNFQwOToxOTowMloiIE5vdE9uT3JBZnRlcj0iMjAxMy0wNS0yNFQwOTozNDowMloiPjxuczE6QXVkaWVuY2VSZXN0cmljdGlvbj48bnMxOkF1ZGllbmNlPmh0dHA6Ly9sb2NhbGhvc3Q6ODA4Ny9zcC54bWw8L25zMTpBdWRpZW5jZT48L25zMTpBdWRpZW5jZVJlc3RyaWN0aW9uPjwvbnMxOkNvbmRpdGlvbnM+PG5zMTpBdXRoblN0YXRlbWVudCBBdXRobkluc3RhbnQ9IjIwMTMtMDUtMjRUMDk6MTk6MDJaIiBTZXNzaW9uSW5kZXg9ImlkLTIzYTYxZTQ3ZGNlMzcxMmMxY2QzMTU3N2FlYjMzNmVjIj48bnMxOkF1dGhuQ29udGV4dD48bnMxOkF1dGhuQ29udGV4dENsYXNzUmVmPnVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphYzpjbGFzc2VzOlBhc3N3b3JkPC9uczE6QXV0aG5Db250ZXh0Q2xhc3NSZWY+PG5zMTpBdXRoZW50aWNhdGluZ0F1dGhvcml0eT5odHRwOi8vbGluZ29uLmNhdGFsb2dpeC5zZTwvbnMxOkF1dGhlbnRpY2F0aW5nQXV0aG9yaXR5PjwvbnMxOkF1dGhuQ29udGV4dD48L25zMTpBdXRoblN0YXRlbWVudD48bnMxOkF0dHJpYnV0ZVN0YXRlbWVudCAvPjwvbnMxOkFzc2VydGlvbj48L25zMDpSZXNwb25zZT4=" />\n   <input type="hidden" name="RelayState" value="/" />\n</form>', '<script type="text/javascript">', '     window.onload = function ()', ' { document.forms[0].submit(); }', '</script>', '</body>'], 'method': 'GET'}
2013-05-24 11:24:13,050 saml2.idp:INFO <application> PATH: sso/redirect
2013-05-24 11:24:13,050 saml2.idp:DEBUG QUERY: {'SAMLRequest': ['nVLBTgIxEL37FU0vnJbtLgssDbsEIUQSVAKLB2+1zEqTpcVOF+XvLYgaE8LBW2fy3sx7b9offGwrsgeLyuisETVZg4CWZq30a9ZYFZMgbQzym75Gxoe12+gFvNWAjniaRu7bGa2t5kag8qXYAnIn+XJ4P+Nxk/GdNc5IU9EfQnSdIBDBOi+GkuH3c2Q01luwS7B7JWG1mGV049yOh2FlpKg2Bh1PWdqlZOy1KS2OrMuYNEQ0oYW1siAdJdNxRtU6kN00anfLtkyh1ylbnTRN4k6UlIytoySRfvIUsYapRie0y2jMolbA2kGcFKzH44RHrWdK5me3t0qfArzq9OULhPyuKObB/HFZUPJ0PgT1AJr71CN+2mvJxNitcNcnHjveS3mCctBOuQPNLyYV4q7pL9IPf1fkpyM/+BnT8dxUSh7IsKrM+8iCcJDRUlQI9B9CnBUalZdDSZgfN/79Svkn'], 'RelayState': ['/']}
2013-05-24 11:24:13,051 saml2.idp:INFO -- No USER --
2013-05-24 11:24:13,051 saml2.idp:DEBUG Callback: (<class '__main__.SSO'>, 'redirect')
2013-05-24 11:24:13,051 saml2.idp:DEBUG ENVIRON: {'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.7.2', 'SCRIPT_NAME': '', 'REQUEST_METHOD': 'GET', 'SERVER_PROTOCOL': 'HTTP/1.1', 'HOME': '/Users/rolandh', 'DISPLAY': '/tmp/launch-l4Dvdw/org.macosforge.xquartz:0', 'TERM_PROGRAM': 'Apple_Terminal', 'LANG': 'sv_SE.UTF-8', 'SHELL': '/bin/bash', 'SECURITYSESSIONID': '186a6', 'TMPDIR': '/var/folders/5t/4k01mls142jd38mx3m3ht9000000gp/T/', 'SERVER_PORT': '8088', 'HTTP_HOST': 'localhost:8088', 'TERM_PROGRAM_VERSION': '309', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'wsgi.version': (1, 0), 'wsgi.run_once': False, 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x100282270>, 'wsgi.multiprocess': False, 'HTTP_ACCEPT_LANGUAGE': 'sv-se', '__CF_USER_TEXT_ENCODING': '0x1F6:0:7\n', 'USER': 'rolandh', 'LOGNAME': 'rolandh', 'PATH_INFO': '/sso/redirect', 'QUERY_STRING': 'SAMLRequest=nVLBTgIxEL37FU0vnJbtLgssDbsEIUQSVAKLB2%2B1zEqTpcVOF%2BXvLYgaE8LBW2fy3sx7b9offGwrsgeLyuisETVZg4CWZq30a9ZYFZMgbQzym75Gxoe12%2BgFvNWAjniaRu7bGa2t5kag8qXYAnIn%2BXJ4P%2BNxk%2FGdNc5IU9EfQnSdIBDBOi%2BGkuH3c2Q01luwS7B7JWG1mGV049yOh2FlpKg2Bh1PWdqlZOy1KS2OrMuYNEQ0oYW1siAdJdNxRtU6kN00anfLtkyh1ylbnTRN4k6UlIytoySRfvIUsYapRie0y2jMolbA2kGcFKzH44RHrWdK5me3t0qfArzq9OULhPyuKObB%2FHFZUPJ0PgT1AJr71CN%2B2mvJxNitcNcnHjveS3mCctBOuQPNLyYV4q7pL9IPf1fkpyM%2F%2BBnT8dxUSh7IsKrM%2B8iCcJDRUlQI9B9CnBUalZdDSZgfN%2F79Svkn&RelayState=%2F', 'PATH': '/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin', 'TERM': 'xterm-256color', 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/536.29.13 (KHTML, like Gecko) Version/6.0.4 Safari/536.29.13', 'HTTP_CONNECTION': 'keep-alive', 'SERVER_NAME': 'lingon.catalogix.se', 'REMOTE_ADDR': '127.0.0.1', 'SHLVL': '1', 'MACOSX_DEPLOYMENT_TARGET': '10.6', 'myapp.url_args': 'sso/redirect', 'wsgi.url_scheme': 'http', 'CONTENT_LENGTH': '', 'TERM_SESSION_ID': '1B7BA483-5B67-4673-8FAF-0FB3A1DB7461', 'SSH_AUTH_SOCK': '/tmp/launch-tEficf/Listeners', 'wsgi.input': <socket._fileobject object at 0x101f7cf50>, 'Apple_PubSub_Socket_Render': '/tmp/launch-IrCxK4/Render', 'wsgi.multithread': True, 'LC_ALL': 'sv_SE.UTF-8', '_': './idp.py', 'GATEWAY_INTERFACE': 'CGI/1.1', 'OLDPWD': '/Users/rolandh/code/pysaml2/example', 'Apple_Ubiquity_Message': '/tmp/launch-wx2pJw/Apple_Ubiquity_Message', 'PWD': '/Users/rolandh/code/pysaml2/example/idp2', 'CONTENT_TYPE': 'text/plain', 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x101f0d050>, 'REMOTE_HOST': '1.0.0.127.in-addr.arpa', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate', 'COMMAND_MODE': 'unix2003'}
2013-05-24 11:24:13,051 saml2.idp:INFO --- In SSO Redirect ---
2013-05-24 11:24:13,051 saml2.entity:INFO receiver addresses: ['http://localhost:8088/sso/redirect']
2013-05-24 11:24:13,051 saml2.entity:INFO Binding: urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect
2013-05-24 11:24:13,051 saml2.request:INFO xmlstr: <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-c78157f5c8e96f368842614f00d144c7" IssueInstant="2013-05-24T09:24:13Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:24:13,052 saml2.request:INFO request: <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-c78157f5c8e96f368842614f00d144c7" IssueInstant="2013-05-24T09:24:13Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:24:13,052 saml2.entity:DEBUG Loaded request
2013-05-24 11:24:13,052 saml2.entity:DEBUG Verified request
2013-05-24 11:24:13,053 saml2.idp:DEBUG _store_request: {'SAMLRequest': 'nVLBTgIxEL37FU0vnJbtLgssDbsEIUQSVAKLB2+1zEqTpcVOF+XvLYgaE8LBW2fy3sx7b9offGwrsgeLyuisETVZg4CWZq30a9ZYFZMgbQzym75Gxoe12+gFvNWAjniaRu7bGa2t5kag8qXYAnIn+XJ4P+Nxk/GdNc5IU9EfQnSdIBDBOi+GkuH3c2Q01luwS7B7JWG1mGV049yOh2FlpKg2Bh1PWdqlZOy1KS2OrMuYNEQ0oYW1siAdJdNxRtU6kN00anfLtkyh1ylbnTRN4k6UlIytoySRfvIUsYapRie0y2jMolbA2kGcFKzH44RHrWdK5me3t0qfArzq9OULhPyuKObB/HFZUPJ0PgT1AJr71CN+2mvJxNitcNcnHjveS3mCctBOuQPNLyYV4q7pL9IPf1fkpyM/+BnT8dxUSh7IsKrM+8iCcJDRUlQI9B9CnBUalZdDSZgfN/79Svkn', 'RelayState': '/', 'req_info': <saml2.request.AuthnRequest object at 0x101f78750>}
2013-05-24 11:24:13,053 saml2.idp:DEBUG Do authentication
2013-05-24 11:24:13,053 saml2.idp:DEBUG Authn chosen: <function username_password_authn at 0x101d41398> (ref=1)
2013-05-24 11:24:13,053 saml2.idp:INFO The login page
2013-05-24 11:24:13,053 saml2.idp:INFO do_authentication argv: {'redirect_uri': 'http://localhost:8088/sso/redirect', 'key': '7bcb4d7cc4e77f7c5ab225d8590a0e46e67a02b9', 'action': '/verify', 'authn_reference': '1', 'login': '', 'password': ''}
2013-05-24 11:24:13,161 saml2.idp:INFO <application> PATH: css/main.css
2013-05-24 11:24:13,161 saml2.idp:DEBUG QUERY: {}
2013-05-24 11:24:13,161 saml2.idp:INFO -- No USER --
2013-05-24 11:24:20,003 saml2.idp:INFO <application> PATH: verify
2013-05-24 11:24:20,004 saml2.idp:DEBUG QUERY: {}
2013-05-24 11:24:20,004 saml2.idp:INFO -- No USER --
2013-05-24 11:24:20,004 saml2.idp:DEBUG Callback: <function do_verify at 0x101d41488>
2013-05-24 11:24:20,004 saml2.idp:DEBUG do_verify: {'form.submitted': ['Log In'], 'redirect_uri': ['http://localhost:8088/sso/redirect'], 'key': ['7bcb4d7cc4e77f7c5ab225d8590a0e46e67a02b9'], 'authn_reference': ['1'], 'login': ['upper'], 'password': ['crust']}
2013-05-24 11:24:20,004 saml2.idp:DEBUG Register upper under 'SDp3A101VLYh6LbZZLahAvVw'
2013-05-24 11:24:20,004 saml2.idp:DEBUG Cookie expires: Fri, 24-May-2013 09:29:20 GMT
2013-05-24 11:24:20,004 saml2.idp:DEBUG Redirect => http://localhost:8088/sso/redirect?id=SDp3A101VLYh6LbZZLahAvVw&key=7bcb4d7cc4e77f7c5ab225d8590a0e46e67a02b9
2013-05-24 11:24:20,011 saml2.idp:INFO <application> PATH: sso/redirect
2013-05-24 11:24:20,011 saml2.idp:INFO = KAKA =
2013-05-24 11:24:20,011 saml2.idp:DEBUG KAKA: idpauthn="U0RwM0ExMDFWTFloNkxiWlpMYWhBdlZ3OjE="
2013-05-24 11:24:20,011 saml2.idp:DEBUG Callback: (<class '__main__.SSO'>, 'redirect')
2013-05-24 11:24:20,012 saml2.idp:DEBUG ENVIRON: {'HTTP_REFERER': 'http://localhost:8088/sso/redirect?SAMLRequest=nVLBTgIxEL37FU0vnJbtLgssDbsEIUQSVAKLB2%2B1zEqTpcVOF%2BXvLYgaE8LBW2fy3sx7b9offGwrsgeLyuisETVZg4CWZq30a9ZYFZMgbQzym75Gxoe12%2BgFvNWAjniaRu7bGa2t5kag8qXYAnIn%2BXJ4P%2BNxk%2FGdNc5IU9EfQnSdIBDBOi%2BGkuH3c2Q01luwS7B7JWG1mGV049yOh2FlpKg2Bh1PWdqlZOy1KS2OrMuYNEQ0oYW1siAdJdNxRtU6kN00anfLtkyh1ylbnTRN4k6UlIytoySRfvIUsYapRie0y2jMolbA2kGcFKzH44RHrWdK5me3t0qfArzq9OULhPyuKObB%2FHFZUPJ0PgT1AJr71CN%2B2mvJxNitcNcnHjveS3mCctBOuQPNLyYV4q7pL9IPf1fkpyM%2F%2BBnT8dxUSh7IsKrM%2B8iCcJDRUlQI9B9CnBUalZdDSZgfN%2F79Svkn&RelayState=%2F', 'idp.authn_ref': '1', 'SERVER_PROTOCOL': 'HTTP/1.1', 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.7.2', 'TERM_PROGRAM_VERSION': '309', 'REQUEST_METHOD': 'GET', 'LOGNAME': 'rolandh', 'USER': 'rolandh', 'HTTP_ORIGIN': 'http://localhost:8088', 'HOME': '/Users/rolandh', 'QUERY_STRING': 'id=SDp3A101VLYh6LbZZLahAvVw&key=7bcb4d7cc4e77f7c5ab225d8590a0e46e67a02b9', 'PATH': '/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin', 'DISPLAY': '/tmp/launch-l4Dvdw/org.macosforge.xquartz:0', 'TERM_PROGRAM': 'Apple_Terminal', 'LANG': 'sv_SE.UTF-8', 'TERM': 'xterm-256color', 'SHELL': '/bin/bash', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_COOKIE': 'idpauthn="U0RwM0ExMDFWTFloNkxiWlpMYWhBdlZ3OjE="', 'SERVER_NAME': 'lingon.catalogix.se', 'REMOTE_ADDR': '127.0.0.1', 'SHLVL': '1', 'MACOSX_DEPLOYMENT_TARGET': '10.6', 'SECURITYSESSIONID': '186a6', 'wsgi.url_scheme': 'http', 'TMPDIR': '/var/folders/5t/4k01mls142jd38mx3m3ht9000000gp/T/', 'SERVER_PORT': '8088', 'PATH_INFO': '/sso/redirect', 'CONTENT_LENGTH': '', 'TERM_SESSION_ID': '1B7BA483-5B67-4673-8FAF-0FB3A1DB7461', 'SSH_AUTH_SOCK': '/tmp/launch-tEficf/Listeners', 'wsgi.input': <socket._fileobject object at 0x101f7cf50>, 'Apple_PubSub_Socket_Render': '/tmp/launch-IrCxK4/Render', 'HTTP_HOST': 'localhost:8088', 'SCRIPT_NAME': '', 'wsgi.multithread': True, 'LC_ALL': 'sv_SE.UTF-8', 'myapp.url_args': 'sso/redirect', '_': './idp.py', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'wsgi.version': (1, 0), 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/536.29.13 (KHTML, like Gecko) Version/6.0.4 Safari/536.29.13', 'GATEWAY_INTERFACE': 'CGI/1.1', 'wsgi.run_once': False, 'OLDPWD': '/Users/rolandh/code/pysaml2/example', 'wsgi.multiprocess': False, 'HTTP_ACCEPT_LANGUAGE': 'sv-se', 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x100282270>, '__CF_USER_TEXT_ENCODING': '0x1F6:0:7\n', 'Apple_Ubiquity_Message': '/tmp/launch-wx2pJw/Apple_Ubiquity_Message', 'PWD': '/Users/rolandh/code/pysaml2/example/idp2', 'CONTENT_TYPE': 'text/plain', 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x101f0d050>, 'REMOTE_HOST': '1.0.0.127.in-addr.arpa', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate', 'COMMAND_MODE': 'unix2003'}
2013-05-24 11:24:20,012 saml2.idp:INFO --- In SSO Redirect ---
2013-05-24 11:24:20,012 saml2.idp:DEBUG _operation: {'SAMLRequest': 'nVLBTgIxEL37FU0vnJbtLgssDbsEIUQSVAKLB2+1zEqTpcVOF+XvLYgaE8LBW2fy3sx7b9offGwrsgeLyuisETVZg4CWZq30a9ZYFZMgbQzym75Gxoe12+gFvNWAjniaRu7bGa2t5kag8qXYAnIn+XJ4P+Nxk/GdNc5IU9EfQnSdIBDBOi+GkuH3c2Q01luwS7B7JWG1mGV049yOh2FlpKg2Bh1PWdqlZOy1KS2OrMuYNEQ0oYW1siAdJdNxRtU6kN00anfLtkyh1ylbnTRN4k6UlIytoySRfvIUsYapRie0y2jMolbA2kGcFKzH44RHrWdK5me3t0qfArzq9OULhPyuKObB/HFZUPJ0PgT1AJr71CN+2mvJxNitcNcnHjveS3mCctBOuQPNLyYV4q7pL9IPf1fkpyM/+BnT8dxUSh7IsKrM+8iCcJDRUlQI9B9CnBUalZdDSZgfN/79Svkn', 'RelayState': '/', 'req_info': <saml2.request.AuthnRequest object at 0x101f78750>}
2013-05-24 11:24:20,012 saml2.idp:INFO parsed OK
2013-05-24 11:24:20,012 saml2.idp:DEBUG <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-c78157f5c8e96f368842614f00d144c7" IssueInstant="2013-05-24T09:24:13Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:24:20,012 saml2.mdstore:DEBUG _service(http://localhost:8087/sp.xml, spsso_descriptor, assertion_consumer_service, urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST)
2013-05-24 11:24:20,012 saml2.mdstore:DEBUG _service => [{'index': '1', 'binding': 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST', '__class__': 'urn:oasis:names:tc:SAML:2.0:metadata&AssertionConsumerService', 'location': 'http://localhost:8087'}]
2013-05-24 11:24:20,012 saml2.idp:DEBUG Binding: urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST, destination: http://localhost:8087
2013-05-24 11:24:20,012 saml2.mdstore:DEBUG _service(http://localhost:8087/sp.xml, spsso_descriptor, assertion_consumer_service, urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST)
2013-05-24 11:24:20,012 saml2.mdstore:DEBUG _service => [{'index': '1', 'binding': 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST', '__class__': 'urn:oasis:names:tc:SAML:2.0:metadata&AssertionConsumerService', 'location': 'http://localhost:8087'}]
2013-05-24 11:24:20,012 saml2.idp:INFO Identity: {'eduPersonAffiliation': 'affiliate', 'givenName': 'Derek', 'surname': 'Jeter', 'uid': 'upper'}
2013-05-24 11:24:20,013 saml2.ident:DEBUG local_policy: <saml2.assertion.Policy object at 0x101f113d0>, name_id_policy: <?xml version='1.0' encoding='UTF-8'?>
<ns0:NameIDPolicy xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" />
2013-05-24 11:24:20,013 saml2.assertion:DEBUG filter based on: {'edupersontargetedid': None}
2013-05-24 11:24:20,014 saml2.idp:INFO AuthNResponse: <?xml version='1.0' encoding='UTF-8'?>
<ns0:Response xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" Destination="http://localhost:8087" ID="id-5e243af8b0d17b4b6b6918a03cba2a3d" InResponseTo="id-c78157f5c8e96f368842614f00d144c7" IssueInstant="2013-05-24T09:24:20Z" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8088/idp.xml</ns1:Issuer><ns0:Status><ns0:StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success" /></ns0:Status><ns1:Assertion ID="id-e5a9b47a69a1d9f61e91493c6e32be99" IssueInstant="2013-05-24T09:24:20Z" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8088/idp.xml</ns1:Issuer><ns1:Subject><ns1:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" NameQualifier="" SPNameQualifier="http://localhost:8087/sp.xml">f308a67728e9d0ed3dd736b15cdcbe73a0e2884fe9236601ceb2a0c181f9fd58</ns1:NameID><ns1:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer"><ns1:SubjectConfirmationData InResponseTo="id-c78157f5c8e96f368842614f00d144c7" NotOnOrAfter="2013-05-24T09:39:20Z" Recipient="http://localhost:8087" /></ns1:SubjectConfirmation></ns1:Subject><ns1:Conditions NotBefore="2013-05-24T09:24:20Z" NotOnOrAfter="2013-05-24T09:39:20Z"><ns1:AudienceRestriction><ns1:Audience>http://localhost:8087/sp.xml</ns1:Audience></ns1:AudienceRestriction></ns1:Conditions><ns1:AuthnStatement AuthnInstant="2013-05-24T09:24:20Z" SessionIndex="id-921693a0737a48e86b7c59d25f2bfc9c"><ns1:AuthnContext><ns1:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</ns1:AuthnContextClassRef><ns1:AuthenticatingAuthority>http://lingon.catalogix.se</ns1:AuthenticatingAuthority></ns1:AuthnContext></ns1:AuthnStatement><ns1:AttributeStatement /></ns1:Assertion></ns0:Response>
2013-05-24 11:24:20,014 saml2.entity:INFO HTTP POST
2013-05-24 11:24:20,014 saml2.idp:DEBUG HTTPargs: {'url': 'http://localhost:8087', 'headers': [('Content-type', 'text/html')], 'data': ['<head>', '<title>SAML 2.0 POST</title>', '</head><body>', '<form method="post" action="http://localhost:8087">\n   <input type="hidden" name="SAMLResponse" value="PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz4KPG5zMDpSZXNwb25zZSB4bWxuczpuczA9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpwcm90b2NvbCIgeG1sbnM6bnMxPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIiBEZXN0aW5hdGlvbj0iaHR0cDovL2xvY2FsaG9zdDo4MDg3IiBJRD0iaWQtNWUyNDNhZjhiMGQxN2I0YjZiNjkxOGEwM2NiYTJhM2QiIEluUmVzcG9uc2VUbz0iaWQtYzc4MTU3ZjVjOGU5NmYzNjg4NDI2MTRmMDBkMTQ0YzciIElzc3VlSW5zdGFudD0iMjAxMy0wNS0yNFQwOToyNDoyMFoiIFZlcnNpb249IjIuMCI+PG5zMTpJc3N1ZXIgRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6bmFtZWlkLWZvcm1hdDplbnRpdHkiPmh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9pZHAueG1sPC9uczE6SXNzdWVyPjxuczA6U3RhdHVzPjxuczA6U3RhdHVzQ29kZSBWYWx1ZT0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOnN0YXR1czpTdWNjZXNzIiAvPjwvbnMwOlN0YXR1cz48bnMxOkFzc2VydGlvbiBJRD0iaWQtZTVhOWI0N2E2OWExZDlmNjFlOTE0OTNjNmUzMmJlOTkiIElzc3VlSW5zdGFudD0iMjAxMy0wNS0yNFQwOToyNDoyMFoiIFZlcnNpb249IjIuMCI+PG5zMTpJc3N1ZXIgRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6bmFtZWlkLWZvcm1hdDplbnRpdHkiPmh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9pZHAueG1sPC9uczE6SXNzdWVyPjxuczE6U3ViamVjdD48bnMxOk5hbWVJRCBGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpuYW1laWQtZm9ybWF0OnRyYW5zaWVudCIgTmFtZVF1YWxpZmllcj0iIiBTUE5hbWVRdWFsaWZpZXI9Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4Ny9zcC54bWwiPmYzMDhhNjc3MjhlOWQwZWQzZGQ3MzZiMTVjZGNiZTczYTBlMjg4NGZlOTIzNjYwMWNlYjJhMGMxODFmOWZkNTg8L25zMTpOYW1lSUQ+PG5zMTpTdWJqZWN0Q29uZmlybWF0aW9uIE1ldGhvZD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmNtOmJlYXJlciI+PG5zMTpTdWJqZWN0Q29uZmlybWF0aW9uRGF0YSBJblJlc3BvbnNlVG89ImlkLWM3ODE1N2Y1YzhlOTZmMzY4ODQyNjE0ZjAwZDE0NGM3IiBOb3RPbk9yQWZ0ZXI9IjIwMTMtMDUtMjRUMDk6Mzk6MjBaIiBSZWNpcGllbnQ9Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4NyIgLz48L25zMTpTdWJqZWN0Q29uZmlybWF0aW9uPjwvbnMxOlN1YmplY3Q+PG5zMTpDb25kaXRpb25zIE5vdEJlZm9yZT0iMjAxMy0wNS0yNFQwOToyNDoyMFoiIE5vdE9uT3JBZnRlcj0iMjAxMy0wNS0yNFQwOTozOToyMFoiPjxuczE6QXVkaWVuY2VSZXN0cmljdGlvbj48bnMxOkF1ZGllbmNlPmh0dHA6Ly9sb2NhbGhvc3Q6ODA4Ny9zcC54bWw8L25zMTpBdWRpZW5jZT48L25zMTpBdWRpZW5jZVJlc3RyaWN0aW9uPjwvbnMxOkNvbmRpdGlvbnM+PG5zMTpBdXRoblN0YXRlbWVudCBBdXRobkluc3RhbnQ9IjIwMTMtMDUtMjRUMDk6MjQ6MjBaIiBTZXNzaW9uSW5kZXg9ImlkLTkyMTY5M2EwNzM3YTQ4ZTg2YjdjNTlkMjVmMmJmYzljIj48bnMxOkF1dGhuQ29udGV4dD48bnMxOkF1dGhuQ29udGV4dENsYXNzUmVmPnVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphYzpjbGFzc2VzOlBhc3N3b3JkPC9uczE6QXV0aG5Db250ZXh0Q2xhc3NSZWY+PG5zMTpBdXRoZW50aWNhdGluZ0F1dGhvcml0eT5odHRwOi8vbGluZ29uLmNhdGFsb2dpeC5zZTwvbnMxOkF1dGhlbnRpY2F0aW5nQXV0aG9yaXR5PjwvbnMxOkF1dGhuQ29udGV4dD48L25zMTpBdXRoblN0YXRlbWVudD48bnMxOkF0dHJpYnV0ZVN0YXRlbWVudCAvPjwvbnMxOkFzc2VydGlvbj48L25zMDpSZXNwb25zZT4=" />\n   <input type="hidden" name="RelayState" value="/" />\n</form>', '<script type="text/javascript">', '     window.onload = function ()', ' { document.forms[0].submit(); }', '</script>', '</body>'], 'method': 'GET'}
2013-05-24 11:33:11,613 saml2:INFO Logging started
2013-05-24 11:33:34,065 saml2.idp:INFO <application> PATH: sso/redirect
2013-05-24 11:33:34,066 saml2.idp:DEBUG QUERY: {'SAMLRequest': ['nVLLbsIwELz3Kyxfcgp5QoNFglIQKhJtEYQeejOOUywlNvU6tPx9TUpbVUIcevOuZnZmZz0afzQ1OnANQsnUCXq+g7hkqhTyNXU2xcxNnHF2M5Lgk7w1O7niby0HgyxNArHtFLdaEkVB2JI2HIhhZJ0/LEjY88leK6OYqvEPIbhOoABcG2sGo/z7OVES2obrNdcHwfhmtUjxzpg98bxaMVrvFBiS+MktRlPrTUh6Yl3GJB6A8jQvhebMYDSfpliU7nBY9QfbJOoPy208iKsypIwynwYsjJOK9i0QoOVzCYZKk+LQDyLX77thXPhDEkUkHLxgtDxveydkF+DVTbdfICD3RbF0l0/rAqPn8yGwBeDMph6QTlejmdINNdcnnjp2l6qDEi6NMEecXUzKg33PXmTk/Upk3ZEf7Yz5dKlqwY4or2v1PtGcGp7iitbA8T+MGE0lCGsHIy87Kf79Stkn'], 'RelayState': ['/']}
2013-05-24 11:33:34,067 saml2.idp:INFO -- No USER --
2013-05-24 11:33:34,073 saml2.idp:DEBUG Callback: (<class '__main__.SSO'>, 'redirect')
2013-05-24 11:33:34,074 saml2.idp:DEBUG ENVIRON: {'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.7.2', 'SCRIPT_NAME': '', 'REQUEST_METHOD': 'GET', 'SERVER_PROTOCOL': 'HTTP/1.1', 'HOME': '/Users/rolandh', 'DISPLAY': '/tmp/launch-l4Dvdw/org.macosforge.xquartz:0', 'CONTENT_LENGTH': '', 'Apple_PubSub_Socket_Render': '/tmp/launch-IrCxK4/Render', 'SECURITYSESSIONID': '186a6', 'SERVER_PORT': '8088', 'PYTHONPATH': '/Users/rolandh/code/pysaml2/src:/Users/rolandh/code/pysaml2', 'HTTP_HOST': 'localhost:8088', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'wsgi.version': (1, 0), 'wsgi.run_once': False, 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x100282270>, 'wsgi.multiprocess': False, 'HTTP_ACCEPT_LANGUAGE': 'sv-se', 'PYCHARM_HOSTED': '1', '__CF_USER_TEXT_ENCODING': '0x1F6:0:7\n', 'USER': 'rolandh', 'PYTHONIOENCODING': 'UTF-8', 'LOGNAME': 'rolandh', 'PATH_INFO': '/sso/redirect', 'QUERY_STRING': 'SAMLRequest=nVLLbsIwELz3Kyxfcgp5QoNFglIQKhJtEYQeejOOUywlNvU6tPx9TUpbVUIcevOuZnZmZz0afzQ1OnANQsnUCXq%2Bg7hkqhTyNXU2xcxNnHF2M5Lgk7w1O7niby0HgyxNArHtFLdaEkVB2JI2HIhhZJ0%2FLEjY88leK6OYqvEPIbhOoABcG2sGo%2Fz7OVES2obrNdcHwfhmtUjxzpg98bxaMVrvFBiS%2BMktRlPrTUh6Yl3GJB6A8jQvhebMYDSfpliU7nBY9QfbJOoPy208iKsypIwynwYsjJOK9i0QoOVzCYZKk%2BLQDyLX77thXPhDEkUkHLxgtDxveydkF%2BDVTbdfICD3RbF0l0%2FrAqPn8yGwBeDMph6QTlejmdINNdcnnjp2l6qDEi6NMEecXUzKg33PXmTk%2FUpk3ZEf7Yz5dKlqwY4or2v1PtGcGp7iitbA8T%2BMGE0lCGsHIy87Kf79Stkn&RelayState=%2F', 'PATH': '/usr/bin:/bin:/usr/sbin:/sbin', 'PYTHONUNBUFFERED': '1', 'TERM': 'emacs', 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/536.29.13 (KHTML, like Gecko) Version/6.0.4 Safari/536.29.13', 'HTTP_CONNECTION': 'keep-alive', 'SERVER_NAME': 'lingon.catalogix.se', 'REMOTE_ADDR': '127.0.0.1', 'MACOSX_DEPLOYMENT_TARGET': '10.6', 'myapp.url_args': 'sso/redirect', 'wsgi.url_scheme': 'http', 'SSH_AUTH_SOCK': '/tmp/launch-tEficf/Listeners', 'wsgi.input': <socket._fileobject object at 0x106f8df50>, 'SHELL': '/bin/bash', 'wsgi.multithread': True, 'TMPDIR': '/var/folders/5t/4k01mls142jd38mx3m3ht9000000gp/T/', 'GATEWAY_INTERFACE': 'CGI/1.1', 'Apple_Ubiquity_Message': '/tmp/launch-wx2pJw/Apple_Ubiquity_Message', 'CONTENT_TYPE': 'text/plain', 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x106f96600>, 'REMOTE_HOST': '1.0.0.127.in-addr.arpa', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate', 'COMMAND_MODE': 'unix2003'}
2013-05-24 11:33:34,074 saml2.idp:INFO --- In SSO Redirect ---
2013-05-24 11:33:34,075 saml2.entity:INFO receiver addresses: ['http://localhost:8088/sso/redirect']
2013-05-24 11:33:34,075 saml2.entity:INFO Binding: urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect
2013-05-24 11:33:34,076 saml2.request:INFO xmlstr: <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-99f56b8359db464fd2acac0a1c248fa5" IssueInstant="2013-05-24T09:33:26Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:33:34,078 saml2.request:INFO request: <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-99f56b8359db464fd2acac0a1c248fa5" IssueInstant="2013-05-24T09:33:26Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:33:34,098 saml2.entity:DEBUG Loaded request
2013-05-24 11:33:34,099 saml2.entity:DEBUG Verified request
2013-05-24 11:33:34,099 saml2.idp:DEBUG _store_request: {'SAMLRequest': 'nVLLbsIwELz3Kyxfcgp5QoNFglIQKhJtEYQeejOOUywlNvU6tPx9TUpbVUIcevOuZnZmZz0afzQ1OnANQsnUCXq+g7hkqhTyNXU2xcxNnHF2M5Lgk7w1O7niby0HgyxNArHtFLdaEkVB2JI2HIhhZJ0/LEjY88leK6OYqvEPIbhOoABcG2sGo/z7OVES2obrNdcHwfhmtUjxzpg98bxaMVrvFBiS+MktRlPrTUh6Yl3GJB6A8jQvhebMYDSfpliU7nBY9QfbJOoPy208iKsypIwynwYsjJOK9i0QoOVzCYZKk+LQDyLX77thXPhDEkUkHLxgtDxveydkF+DVTbdfICD3RbF0l0/rAqPn8yGwBeDMph6QTlejmdINNdcnnjp2l6qDEi6NMEecXUzKg33PXmTk/Upk3ZEf7Yz5dKlqwY4or2v1PtGcGp7iitbA8T+MGE0lCGsHIy87Kf79Stkn', 'RelayState': '/', 'req_info': <saml2.request.AuthnRequest object at 0x107d10450>}
2013-05-24 11:33:34,100 saml2.idp:DEBUG Do authentication
2013-05-24 11:33:37,006 saml2.idp:DEBUG Authn chosen: <function username_password_authn at 0x106f1a848> (ref=1)
2013-05-24 11:33:37,007 saml2.idp:INFO The login page
2013-05-24 11:33:37,007 saml2.idp:INFO do_authentication argv: {'redirect_uri': 'http://localhost:8088/sso/redirect', 'key': 'faa15b323d6c66efd256342b56969fd32ae4f693', 'action': '/verify', 'authn_reference': '1', 'login': '', 'password': ''}
2013-05-24 11:33:38,597 saml2.idp:INFO <application> PATH: css/main.css
2013-05-24 11:33:38,597 saml2.idp:DEBUG QUERY: {}
2013-05-24 11:33:38,597 saml2.idp:INFO -- No USER --
2013-05-24 11:33:50,774 saml2.idp:INFO <application> PATH: verify
2013-05-24 11:33:50,774 saml2.idp:DEBUG QUERY: {}
2013-05-24 11:33:50,775 saml2.idp:INFO -- No USER --
2013-05-24 11:33:50,775 saml2.idp:DEBUG Callback: <function do_verify at 0x106f1a938>
2013-05-24 11:33:54,961 saml2.idp:DEBUG do_verify: {'form.submitted': ['Log In'], 'redirect_uri': ['http://localhost:8088/sso/redirect'], 'key': ['faa15b323d6c66efd256342b56969fd32ae4f693'], 'authn_reference': ['1'], 'login': ['upper'], 'password': ['crust']}
2013-05-24 11:33:54,962 saml2.idp:DEBUG Register upper under 'qmyJqkaUm9PWrwvgO6nEd37q'
2013-05-24 11:33:54,963 saml2.idp:DEBUG Cookie expires: Fri, 24-May-2013 09:38:54 GMT
2013-05-24 11:33:54,963 saml2.idp:DEBUG Redirect => http://localhost:8088/sso/redirect?id=qmyJqkaUm9PWrwvgO6nEd37q&key=faa15b323d6c66efd256342b56969fd32ae4f693
2013-05-24 11:33:55,966 saml2.idp:INFO <application> PATH: sso/redirect
2013-05-24 11:33:55,966 saml2.idp:INFO = KAKA =
2013-05-24 11:33:55,966 saml2.idp:DEBUG KAKA: idpauthn="cW15SnFrYVVtOVBXcnd2Z082bkVkMzdxOjE="
2013-05-24 11:33:55,967 saml2.idp:DEBUG Callback: (<class '__main__.SSO'>, 'redirect')
2013-05-24 11:33:55,968 saml2.idp:DEBUG ENVIRON: {'HTTP_REFERER': 'http://localhost:8088/sso/redirect?SAMLRequest=nVLLbsIwELz3Kyxfcgp5QoNFglIQKhJtEYQeejOOUywlNvU6tPx9TUpbVUIcevOuZnZmZz0afzQ1OnANQsnUCXq%2Bg7hkqhTyNXU2xcxNnHF2M5Lgk7w1O7niby0HgyxNArHtFLdaEkVB2JI2HIhhZJ0%2FLEjY88leK6OYqvEPIbhOoABcG2sGo%2Fz7OVES2obrNdcHwfhmtUjxzpg98bxaMVrvFBiS%2BMktRlPrTUh6Yl3GJB6A8jQvhebMYDSfpliU7nBY9QfbJOoPy208iKsypIwynwYsjJOK9i0QoOVzCYZKk%2BLQDyLX77thXPhDEkUkHLxgtDxveydkF%2BDVTbdfICD3RbF0l0%2FrAqPn8yGwBeDMph6QTlejmdINNdcnnjp2l6qDEi6NMEecXUzKg33PXmTk%2FUpk3ZEf7Yz5dKlqwY4or2v1PtGcGp7iitbA8T%2BMGE0lCGsHIy87Kf79Stkn&RelayState=%2F', 'idp.authn_ref': '1', 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.7.2', 'SCRIPT_NAME': '', 'REQUEST_METHOD': 'GET', 'HTTP_ORIGIN': 'http://localhost:8088', 'SERVER_PROTOCOL': 'HTTP/1.1', 'HOME': '/Users/rolandh', 'DISPLAY': '/tmp/launch-l4Dvdw/org.macosforge.xquartz:0', 'CONTENT_LENGTH': '', 'Apple_PubSub_Socket_Render': '/tmp/launch-IrCxK4/Render', 'SECURITYSESSIONID': '186a6', 'SERVER_PORT': '8088', 'PYTHONPATH': '/Users/rolandh/code/pysaml2/src:/Users/rolandh/code/pysaml2', 'HTTP_HOST': 'localhost:8088', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'wsgi.version': (1, 0), 'wsgi.run_once': False, 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x100282270>, 'wsgi.multiprocess': False, 'HTTP_ACCEPT_LANGUAGE': 'sv-se', 'PYCHARM_HOSTED': '1', '__CF_USER_TEXT_ENCODING': '0x1F6:0:7\n', 'USER': 'rolandh', 'PYTHONIOENCODING': 'UTF-8', 'HTTP_COOKIE': 'idpauthn="cW15SnFrYVVtOVBXcnd2Z082bkVkMzdxOjE="', 'LOGNAME': 'rolandh', 'PATH_INFO': '/sso/redirect', 'QUERY_STRING': 'id=qmyJqkaUm9PWrwvgO6nEd37q&key=faa15b323d6c66efd256342b56969fd32ae4f693', 'PATH': '/usr/bin:/bin:/usr/sbin:/sbin', 'PYTHONUNBUFFERED': '1', 'TERM': 'emacs', 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/536.29.13 (KHTML, like Gecko) Version/6.0.4 Safari/536.29.13', 'HTTP_CONNECTION': 'keep-alive', 'SERVER_NAME': 'lingon.catalogix.se', 'REMOTE_ADDR': '127.0.0.1', 'MACOSX_DEPLOYMENT_TARGET': '10.6', 'myapp.url_args': 'sso/redirect', 'wsgi.url_scheme': 'http', 'SSH_AUTH_SOCK': '/tmp/launch-tEficf/Listeners', 'wsgi.input': <socket._fileobject object at 0x106f8df50>, 'SHELL': '/bin/bash', 'wsgi.multithread': True, 'TMPDIR': '/var/folders/5t/4k01mls142jd38mx3m3ht9000000gp/T/', 'GATEWAY_INTERFACE': 'CGI/1.1', 'Apple_Ubiquity_Message': '/tmp/launch-wx2pJw/Apple_Ubiquity_Message', 'CONTENT_TYPE': 'text/plain', 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x106f96600>, 'REMOTE_HOST': '1.0.0.127.in-addr.arpa', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate', 'COMMAND_MODE': 'unix2003'}
2013-05-24 11:33:55,968 saml2.idp:INFO --- In SSO Redirect ---
2013-05-24 11:33:55,969 saml2.idp:DEBUG _operation: {'SAMLRequest': 'nVLLbsIwELz3Kyxfcgp5QoNFglIQKhJtEYQeejOOUywlNvU6tPx9TUpbVUIcevOuZnZmZz0afzQ1OnANQsnUCXq+g7hkqhTyNXU2xcxNnHF2M5Lgk7w1O7niby0HgyxNArHtFLdaEkVB2JI2HIhhZJ0/LEjY88leK6OYqvEPIbhOoABcG2sGo/z7OVES2obrNdcHwfhmtUjxzpg98bxaMVrvFBiS+MktRlPrTUh6Yl3GJB6A8jQvhebMYDSfpliU7nBY9QfbJOoPy208iKsypIwynwYsjJOK9i0QoOVzCYZKk+LQDyLX77thXPhDEkUkHLxgtDxveydkF+DVTbdfICD3RbF0l0/rAqPn8yGwBeDMph6QTlejmdINNdcnnjp2l6qDEi6NMEecXUzKg33PXmTk/Upk3ZEf7Yz5dKlqwY4or2v1PtGcGp7iitbA8T+MGE0lCGsHIy87Kf79Stkn', 'RelayState': '/', 'req_info': <saml2.request.AuthnRequest object at 0x107d10450>}
2013-05-24 11:33:55,969 saml2.idp:INFO parsed OK
2013-05-24 11:33:55,971 saml2.idp:DEBUG <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-99f56b8359db464fd2acac0a1c248fa5" IssueInstant="2013-05-24T09:33:26Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:33:55,971 saml2.mdstore:DEBUG _service(http://localhost:8087/sp.xml, spsso_descriptor, assertion_consumer_service, urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST)
2013-05-24 11:33:55,971 saml2.mdstore:DEBUG _service => [{'index': '1', 'binding': 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST', '__class__': 'urn:oasis:names:tc:SAML:2.0:metadata&AssertionConsumerService', 'location': 'http://localhost:8087'}]
2013-05-24 11:33:55,972 saml2.idp:DEBUG Binding: urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST, destination: http://localhost:8087
2013-05-24 11:33:55,972 saml2.mdstore:DEBUG _service(http://localhost:8087/sp.xml, spsso_descriptor, assertion_consumer_service, urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST)
2013-05-24 11:33:55,973 saml2.mdstore:DEBUG _service => [{'index': '1', 'binding': 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST', '__class__': 'urn:oasis:names:tc:SAML:2.0:metadata&AssertionConsumerService', 'location': 'http://localhost:8087'}]
2013-05-24 11:34:03,953 saml2.idp:INFO Identity: {'eduPersonAffiliation': 'affiliate', 'givenName': 'Derek', 'surname': 'Jeter'}
2013-05-24 11:34:32,432 saml2.ident:DEBUG local_policy: <saml2.assertion.Policy object at 0x106fa4610>, name_id_policy: <?xml version='1.0' encoding='UTF-8'?>
<ns0:NameIDPolicy xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" />
2013-05-24 11:35:09,024 saml2.assertion:DEBUG filter based on: {'edupersontargetedid': None}
2013-05-24 11:35:27,590 saml2:INFO Logging started
2013-05-24 11:35:39,265 saml2.idp:INFO <application> PATH: sso/redirect
2013-05-24 11:35:39,266 saml2.idp:INFO = KAKA =
2013-05-24 11:35:39,267 saml2.idp:DEBUG KAKA: idpauthn="cW15SnFrYVVtOVBXcnd2Z082bkVkMzdxOjE="
2013-05-24 11:35:39,268 saml2.idp:INFO -- No USER --
2013-05-24 11:35:39,273 saml2.idp:DEBUG Callback: (<class '__main__.SSO'>, 'redirect')
2013-05-24 11:35:39,274 saml2.idp:DEBUG ENVIRON: {'idp.authn_ref': None, 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.7.2', 'SCRIPT_NAME': '', 'REQUEST_METHOD': 'GET', 'SERVER_PROTOCOL': 'HTTP/1.1', 'HOME': '/Users/rolandh', 'DISPLAY': '/tmp/launch-l4Dvdw/org.macosforge.xquartz:0', 'CONTENT_LENGTH': '', 'Apple_PubSub_Socket_Render': '/tmp/launch-IrCxK4/Render', 'SECURITYSESSIONID': '186a6', 'SERVER_PORT': '8088', 'PYTHONPATH': '/Users/rolandh/code/pysaml2/src:/Users/rolandh/code/pysaml2', 'HTTP_HOST': 'localhost:8088', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'wsgi.version': (1, 0), 'wsgi.run_once': False, 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x100282270>, 'wsgi.multiprocess': False, 'HTTP_ACCEPT_LANGUAGE': 'sv-se', 'PYCHARM_HOSTED': '1', '__CF_USER_TEXT_ENCODING': '0x1F6:0:7\n', 'USER': 'rolandh', 'PYTHONIOENCODING': 'UTF-8', 'HTTP_COOKIE': 'idpauthn="cW15SnFrYVVtOVBXcnd2Z082bkVkMzdxOjE="', 'LOGNAME': 'rolandh', 'PATH_INFO': '/sso/redirect', 'QUERY_STRING': 'SAMLRequest=nVJBbsIwELz3FZYvnEKcQEqwSBAFoSLRNoLQQ28mWYqlYFOvQ8vva1LaqhLiUMkHezWzM7PrwfBjV5EDGJRaJa2gzVoEVKFLqV6T1iqfenFrmN4MFDI%2Bqu1WLeCtBrTE0RRyV05obRTXAqV7ih0gtwVfjh7mPGwzvjfa6kJX9IcQXCcIRDDWmaFk9H0da4X1DswSzEEWsFrME7q1ds99v9KFqLYaLY9Z3KNk4rxJJU6sy5jYR9S%2BgVIaKCwls0lCZelBIOKwDGNWRHAbR4Jt%2Bv01hKzbF8B6QeSAiDXMFFqhbEJDFnQ8FnlhN2d93onceaEkO6e9k6oZ4NWk6y8Q8vs8z7zsaZlT8nxeBHUAmrqpB7zRNWSqzU7Y6x1PFZdl00A5KCvtkaYXJ%2BXjvu02MvB%2FJdJmyY%2Bux2yS6UoWRzKqKv0%2BNiAsJHQjKgT6DyPWCIXS2aHET0%2BKf79S%2Bgk%3D&RelayState=%2F', 'PATH': '/usr/bin:/bin:/usr/sbin:/sbin', 'PYTHONUNBUFFERED': '1', 'TERM': 'emacs', 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/536.29.13 (KHTML, like Gecko) Version/6.0.4 Safari/536.29.13', 'HTTP_CONNECTION': 'keep-alive', 'SERVER_NAME': 'lingon.catalogix.se', 'REMOTE_ADDR': '127.0.0.1', 'MACOSX_DEPLOYMENT_TARGET': '10.6', 'myapp.url_args': 'sso/redirect', 'wsgi.url_scheme': 'http', 'SSH_AUTH_SOCK': '/tmp/launch-tEficf/Listeners', 'wsgi.input': <socket._fileobject object at 0x10678df50>, 'SHELL': '/bin/bash', 'wsgi.multithread': True, 'TMPDIR': '/var/folders/5t/4k01mls142jd38mx3m3ht9000000gp/T/', 'GATEWAY_INTERFACE': 'CGI/1.1', 'Apple_Ubiquity_Message': '/tmp/launch-wx2pJw/Apple_Ubiquity_Message', 'CONTENT_TYPE': 'text/plain', 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x106796600>, 'REMOTE_HOST': '1.0.0.127.in-addr.arpa', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate', 'COMMAND_MODE': 'unix2003'}
2013-05-24 11:35:39,275 saml2.idp:INFO --- In SSO Redirect ---
2013-05-24 11:35:39,276 saml2.entity:INFO receiver addresses: ['http://localhost:8088/sso/redirect']
2013-05-24 11:35:39,276 saml2.entity:INFO Binding: urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect
2013-05-24 11:35:39,277 saml2.request:INFO xmlstr: <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-e1a82d280c5e685a0f99be2049ae0715" IssueInstant="2013-05-24T09:35:35Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:35:39,281 saml2.request:INFO request: <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-e1a82d280c5e685a0f99be2049ae0715" IssueInstant="2013-05-24T09:35:35Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:35:39,298 saml2.entity:DEBUG Loaded request
2013-05-24 11:35:39,299 saml2.entity:DEBUG Verified request
2013-05-24 11:35:39,299 saml2.idp:DEBUG _store_request: {'SAMLRequest': 'nVJBbsIwELz3FZYvnEKcQEqwSBAFoSLRNoLQQ28mWYqlYFOvQ8vva1LaqhLiUMkHezWzM7PrwfBjV5EDGJRaJa2gzVoEVKFLqV6T1iqfenFrmN4MFDI+qu1WLeCtBrTE0RRyV05obRTXAqV7ih0gtwVfjh7mPGwzvjfa6kJX9IcQXCcIRDDWmaFk9H0da4X1DswSzEEWsFrME7q1ds99v9KFqLYaLY9Z3KNk4rxJJU6sy5jYR9S+gVIaKCwls0lCZelBIOKwDGNWRHAbR4Jt+v01hKzbF8B6QeSAiDXMFFqhbEJDFnQ8FnlhN2d93onceaEkO6e9k6oZ4NWk6y8Q8vs8z7zsaZlT8nxeBHUAmrqpB7zRNWSqzU7Y6x1PFZdl00A5KCvtkaYXJ+Xjvu02MvB/JdJmyY+ux2yS6UoWRzKqKv0+NiAsJHQjKgT6DyPWCIXS2aHET0+Kf79S+gk=', 'RelayState': '/', 'req_info': <saml2.request.AuthnRequest object at 0x107c10810>}
2013-05-24 11:35:39,300 saml2.idp:DEBUG Do authentication
2013-05-24 11:35:40,317 saml2.idp:DEBUG Authn chosen: <function username_password_authn at 0x10671a848> (ref=1)
2013-05-24 11:35:40,318 saml2.idp:INFO The login page
2013-05-24 11:35:40,318 saml2.idp:INFO do_authentication argv: {'redirect_uri': 'http://localhost:8088/sso/redirect', 'key': '4f989d27a8ce30c9ca393889fef0e37d0cdaec5f', 'action': '/verify', 'authn_reference': '1', 'login': '', 'password': ''}
2013-05-24 11:35:43,072 saml2.idp:INFO <application> PATH: css/main.css
2013-05-24 11:35:43,073 saml2.idp:INFO = KAKA =
2013-05-24 11:35:43,073 saml2.idp:DEBUG KAKA: idpauthn="cW15SnFrYVVtOVBXcnd2Z082bkVkMzdxOjE="
2013-05-24 11:35:43,074 saml2.idp:INFO -- No USER --
2013-05-24 11:35:54,762 saml2.idp:INFO <application> PATH: verify
2013-05-24 11:35:54,763 saml2.idp:INFO = KAKA =
2013-05-24 11:35:54,763 saml2.idp:DEBUG KAKA: idpauthn="cW15SnFrYVVtOVBXcnd2Z082bkVkMzdxOjE="
2013-05-24 11:35:54,764 saml2.idp:INFO -- No USER --
2013-05-24 11:35:54,764 saml2.idp:DEBUG Callback: <function do_verify at 0x10671a938>
2013-05-24 11:35:58,960 saml2.idp:DEBUG do_verify: {'form.submitted': ['Log In'], 'redirect_uri': ['http://localhost:8088/sso/redirect'], 'key': ['4f989d27a8ce30c9ca393889fef0e37d0cdaec5f'], 'authn_reference': ['1'], 'login': ['upper'], 'password': ['crust']}
2013-05-24 11:35:58,961 saml2.idp:DEBUG Register upper under 'zZyFrOt9qIQ5LF1ZNh6P20AF'
2013-05-24 11:35:58,961 saml2.idp:DEBUG Cookie expires: Fri, 24-May-2013 09:40:58 GMT
2013-05-24 11:35:58,962 saml2.idp:DEBUG Redirect => http://localhost:8088/sso/redirect?id=zZyFrOt9qIQ5LF1ZNh6P20AF&key=4f989d27a8ce30c9ca393889fef0e37d0cdaec5f
2013-05-24 11:36:00,350 saml2.idp:INFO <application> PATH: sso/redirect
2013-05-24 11:36:00,350 saml2.idp:INFO = KAKA =
2013-05-24 11:36:00,351 saml2.idp:DEBUG KAKA: idpauthn="elp5RnJPdDlxSVE1TEYxWk5oNlAyMEFGOjE="
2013-05-24 11:36:00,351 saml2.idp:DEBUG Callback: (<class '__main__.SSO'>, 'redirect')
2013-05-24 11:36:00,352 saml2.idp:DEBUG ENVIRON: {'HTTP_REFERER': 'http://localhost:8088/sso/redirect?SAMLRequest=nVJBbsIwELz3FZYvnEKcQEqwSBAFoSLRNoLQQ28mWYqlYFOvQ8vva1LaqhLiUMkHezWzM7PrwfBjV5EDGJRaJa2gzVoEVKFLqV6T1iqfenFrmN4MFDI%2Bqu1WLeCtBrTE0RRyV05obRTXAqV7ih0gtwVfjh7mPGwzvjfa6kJX9IcQXCcIRDDWmaFk9H0da4X1DswSzEEWsFrME7q1ds99v9KFqLYaLY9Z3KNk4rxJJU6sy5jYR9S%2BgVIaKCwls0lCZelBIOKwDGNWRHAbR4Jt%2Bv01hKzbF8B6QeSAiDXMFFqhbEJDFnQ8FnlhN2d93onceaEkO6e9k6oZ4NWk6y8Q8vs8z7zsaZlT8nxeBHUAmrqpB7zRNWSqzU7Y6x1PFZdl00A5KCvtkaYXJ%2BXjvu02MvB%2FJdJmyY%2Bux2yS6UoWRzKqKv0%2BNiAsJHQjKgT6DyPWCIXS2aHET0%2BKf79S%2Bgk%3D&RelayState=%2F', 'idp.authn_ref': '1', 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.7.2', 'SCRIPT_NAME': '', 'REQUEST_METHOD': 'GET', 'HTTP_ORIGIN': 'http://localhost:8088', 'SERVER_PROTOCOL': 'HTTP/1.1', 'HOME': '/Users/rolandh', 'DISPLAY': '/tmp/launch-l4Dvdw/org.macosforge.xquartz:0', 'CONTENT_LENGTH': '', 'Apple_PubSub_Socket_Render': '/tmp/launch-IrCxK4/Render', 'SECURITYSESSIONID': '186a6', 'SERVER_PORT': '8088', 'PYTHONPATH': '/Users/rolandh/code/pysaml2/src:/Users/rolandh/code/pysaml2', 'HTTP_HOST': 'localhost:8088', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'wsgi.version': (1, 0), 'wsgi.run_once': False, 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x100282270>, 'wsgi.multiprocess': False, 'HTTP_ACCEPT_LANGUAGE': 'sv-se', 'PYCHARM_HOSTED': '1', '__CF_USER_TEXT_ENCODING': '0x1F6:0:7\n', 'USER': 'rolandh', 'PYTHONIOENCODING': 'UTF-8', 'HTTP_COOKIE': 'idpauthn="elp5RnJPdDlxSVE1TEYxWk5oNlAyMEFGOjE="', 'LOGNAME': 'rolandh', 'PATH_INFO': '/sso/redirect', 'QUERY_STRING': 'id=zZyFrOt9qIQ5LF1ZNh6P20AF&key=4f989d27a8ce30c9ca393889fef0e37d0cdaec5f', 'PATH': '/usr/bin:/bin:/usr/sbin:/sbin', 'PYTHONUNBUFFERED': '1', 'TERM': 'emacs', 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/536.29.13 (KHTML, like Gecko) Version/6.0.4 Safari/536.29.13', 'HTTP_CONNECTION': 'keep-alive', 'SERVER_NAME': 'lingon.catalogix.se', 'REMOTE_ADDR': '127.0.0.1', 'MACOSX_DEPLOYMENT_TARGET': '10.6', 'myapp.url_args': 'sso/redirect', 'wsgi.url_scheme': 'http', 'SSH_AUTH_SOCK': '/tmp/launch-tEficf/Listeners', 'wsgi.input': <socket._fileobject object at 0x10678df50>, 'SHELL': '/bin/bash', 'wsgi.multithread': True, 'TMPDIR': '/var/folders/5t/4k01mls142jd38mx3m3ht9000000gp/T/', 'GATEWAY_INTERFACE': 'CGI/1.1', 'Apple_Ubiquity_Message': '/tmp/launch-wx2pJw/Apple_Ubiquity_Message', 'CONTENT_TYPE': 'text/plain', 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x106796600>, 'REMOTE_HOST': '1.0.0.127.in-addr.arpa', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate', 'COMMAND_MODE': 'unix2003'}
2013-05-24 11:36:00,352 saml2.idp:INFO --- In SSO Redirect ---
2013-05-24 11:36:00,353 saml2.idp:DEBUG _operation: {'SAMLRequest': 'nVJBbsIwELz3FZYvnEKcQEqwSBAFoSLRNoLQQ28mWYqlYFOvQ8vva1LaqhLiUMkHezWzM7PrwfBjV5EDGJRaJa2gzVoEVKFLqV6T1iqfenFrmN4MFDI+qu1WLeCtBrTE0RRyV05obRTXAqV7ih0gtwVfjh7mPGwzvjfa6kJX9IcQXCcIRDDWmaFk9H0da4X1DswSzEEWsFrME7q1ds99v9KFqLYaLY9Z3KNk4rxJJU6sy5jYR9S+gVIaKCwls0lCZelBIOKwDGNWRHAbR4Jt+v01hKzbF8B6QeSAiDXMFFqhbEJDFnQ8FnlhN2d93onceaEkO6e9k6oZ4NWk6y8Q8vs8z7zsaZlT8nxeBHUAmrqpB7zRNWSqzU7Y6x1PFZdl00A5KCvtkaYXJ+Xjvu02MvB/JdJmyY+ux2yS6UoWRzKqKv0+NiAsJHQjKgT6DyPWCIXS2aHET0+Kf79S+gk=', 'RelayState': '/', 'req_info': <saml2.request.AuthnRequest object at 0x107c10810>}
2013-05-24 11:36:00,353 saml2.idp:INFO parsed OK
2013-05-24 11:36:00,355 saml2.idp:DEBUG <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-e1a82d280c5e685a0f99be2049ae0715" IssueInstant="2013-05-24T09:35:35Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:36:00,355 saml2.mdstore:DEBUG _service(http://localhost:8087/sp.xml, spsso_descriptor, assertion_consumer_service, urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST)
2013-05-24 11:36:00,356 saml2.mdstore:DEBUG _service => [{'index': '1', 'binding': 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST', '__class__': 'urn:oasis:names:tc:SAML:2.0:metadata&AssertionConsumerService', 'location': 'http://localhost:8087'}]
2013-05-24 11:36:00,356 saml2.idp:DEBUG Binding: urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST, destination: http://localhost:8087
2013-05-24 11:36:00,357 saml2.mdstore:DEBUG _service(http://localhost:8087/sp.xml, spsso_descriptor, assertion_consumer_service, urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST)
2013-05-24 11:36:00,357 saml2.mdstore:DEBUG _service => [{'index': '1', 'binding': 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST', '__class__': 'urn:oasis:names:tc:SAML:2.0:metadata&AssertionConsumerService', 'location': 'http://localhost:8087'}]
2013-05-24 11:36:01,781 saml2.idp:INFO Identity: {'eduPersonAffiliation': 'affiliate', 'givenName': 'Derek', 'surname': 'Jeter'}
2013-05-24 11:36:01,784 saml2.ident:DEBUG local_policy: <saml2.assertion.Policy object at 0x1067a5610>, name_id_policy: <?xml version='1.0' encoding='UTF-8'?>
<ns0:NameIDPolicy xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" />
2013-05-24 11:39:50,331 saml2:INFO Logging started
2013-05-24 11:40:02,266 saml2.idp:INFO <application> PATH: sso/redirect
2013-05-24 11:40:02,266 saml2.idp:INFO = KAKA =
2013-05-24 11:40:02,266 saml2.idp:DEBUG KAKA: idpauthn="elp5RnJPdDlxSVE1TEYxWk5oNlAyMEFGOjE="
2013-05-24 11:40:02,267 saml2.idp:INFO -- No USER --
2013-05-24 11:40:02,267 saml2.idp:DEBUG Callback: (<class '__main__.SSO'>, 'redirect')
2013-05-24 11:40:02,267 saml2.idp:DEBUG ENVIRON: {'HTTP_COOKIE': 'idpauthn="elp5RnJPdDlxSVE1TEYxWk5oNlAyMEFGOjE="', 'idp.authn_ref': None, 'SERVER_PROTOCOL': 'HTTP/1.1', 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.7.2', 'TERM_PROGRAM_VERSION': '309', 'REQUEST_METHOD': 'GET', 'LOGNAME': 'rolandh', 'USER': 'rolandh', 'HOME': '/Users/rolandh', 'QUERY_STRING': 'SAMLRequest=nVJBbsIwELz3FZYvOYU4AUSwSBAFoSLRNoLQQ29OWIqlYFOvQ9vf10lpq0qIQ2%2Fe0czu7I5H4%2FdDRU5gUGqVeGGHeQRUqbdSvSTeJp%2F7sTdOb0YKGZ%2FUdq9W8FoDWuJkCrmDE1obxbVA6UpxAOS25OvJ%2FZJHHcaPRltd6or%2BCMLrAoEIxjozlEy%2Bn1OtsD6AWYM5yRI2q2VC99YeeRBUuhTVXqPlMYsHlMycN6lEo7rMiQNEHRjYSgOlpWQxS6jc%2BrtdDKIY9PrQ70Vhl8XdYbErYnBgWRQsdkTEGhYKrVA2oRELuz7r%2B1EvZ0PeY5xFz5Rk521vpWoPeHXT4ouE%2FC7PMz97XOeUPJ2DoI5AU3f1kLdzDZlrcxD2escGaXZpqRyUlfaDphcvFeCx4xIZBb8j0jbkB9djMct0JcsPMqkq%2FTY1ICwkdCcqBPoPI9YIhdLZoSRIm4l%2Fv1L6CQ%3D%3D&RelayState=%2F', 'PATH': '/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin', 'DISPLAY': '/tmp/launch-l4Dvdw/org.macosforge.xquartz:0', 'TERM_PROGRAM': 'Apple_Terminal', 'LANG': 'sv_SE.UTF-8', 'TERM': 'xterm-256color', 'SHELL': '/bin/bash', 'HTTP_CONNECTION': 'keep-alive', 'SERVER_NAME': 'lingon.catalogix.se', 'REMOTE_ADDR': '127.0.0.1', 'SHLVL': '1', 'MACOSX_DEPLOYMENT_TARGET': '10.6', 'SECURITYSESSIONID': '186a6', 'wsgi.url_scheme': 'http', 'TMPDIR': '/var/folders/5t/4k01mls142jd38mx3m3ht9000000gp/T/', 'SERVER_PORT': '8088', 'PATH_INFO': '/sso/redirect', 'CONTENT_LENGTH': '', 'TERM_SESSION_ID': '1B7BA483-5B67-4673-8FAF-0FB3A1DB7461', 'SSH_AUTH_SOCK': '/tmp/launch-tEficf/Listeners', 'wsgi.input': <socket._fileobject object at 0x101dfb250>, 'Apple_PubSub_Socket_Render': '/tmp/launch-IrCxK4/Render', 'HTTP_HOST': 'localhost:8088', 'SCRIPT_NAME': '', 'wsgi.multithread': True, 'LC_ALL': 'sv_SE.UTF-8', 'myapp.url_args': 'sso/redirect', '_': './idp.py', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'wsgi.version': (1, 0), 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/536.29.13 (KHTML, like Gecko) Version/6.0.4 Safari/536.29.13', 'GATEWAY_INTERFACE': 'CGI/1.1', 'wsgi.run_once': False, 'OLDPWD': '/Users/rolandh/code/pysaml2/example', 'wsgi.multiprocess': False, 'HTTP_ACCEPT_LANGUAGE': 'sv-se', 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x100282270>, '__CF_USER_TEXT_ENCODING': '0x1F6:0:7\n', 'Apple_Ubiquity_Message': '/tmp/launch-wx2pJw/Apple_Ubiquity_Message', 'PWD': '/Users/rolandh/code/pysaml2/example/idp2', 'CONTENT_TYPE': 'text/plain', 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x101f0d050>, 'REMOTE_HOST': '1.0.0.127.in-addr.arpa', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate', 'COMMAND_MODE': 'unix2003'}
2013-05-24 11:40:02,267 saml2.idp:INFO --- In SSO Redirect ---
2013-05-24 11:40:02,268 saml2.entity:INFO receiver addresses: ['http://localhost:8088/sso/redirect']
2013-05-24 11:40:02,268 saml2.entity:INFO Binding: urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect
2013-05-24 11:40:02,268 saml2.request:INFO xmlstr: <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-ff8eab745e542130839bfb8eeabcbb08" IssueInstant="2013-05-24T09:40:02Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:40:02,268 saml2.request:INFO request: <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-ff8eab745e542130839bfb8eeabcbb08" IssueInstant="2013-05-24T09:40:02Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:40:02,274 saml2.entity:DEBUG Loaded request
2013-05-24 11:40:02,274 saml2.entity:DEBUG Verified request
2013-05-24 11:40:02,274 saml2.idp:DEBUG _store_request: {'SAMLRequest': 'nVJBbsIwELz3FZYvOYU4AUSwSBAFoSLRNoLQQ29OWIqlYFOvQ9vf10lpq0qIQ2/e0czu7I5H4/dDRU5gUGqVeGGHeQRUqbdSvSTeJp/7sTdOb0YKGZ/Udq9W8FoDWuJkCrmDE1obxbVA6UpxAOS25OvJ/ZJHHcaPRltd6or+CMLrAoEIxjozlEy+n1OtsD6AWYM5yRI2q2VC99YeeRBUuhTVXqPlMYsHlMycN6lEo7rMiQNEHRjYSgOlpWQxS6jc+rtdDKIY9PrQ70Vhl8XdYbErYnBgWRQsdkTEGhYKrVA2oRELuz7r+1EvZ0PeY5xFz5Rk521vpWoPeHXT4ouE/C7PMz97XOeUPJ2DoI5AU3f1kLdzDZlrcxD2escGaXZpqRyUlfaDphcvFeCx4xIZBb8j0jbkB9djMct0JcsPMqkq/TY1ICwkdCcqBPoPI9YIhdLZoSRIm4l/v1L6CQ==', 'RelayState': '/', 'req_info': <saml2.request.AuthnRequest object at 0x101f78750>}
2013-05-24 11:40:02,274 saml2.idp:DEBUG Do authentication
2013-05-24 11:40:02,274 saml2.idp:DEBUG Authn chosen: <function username_password_authn at 0x101d41398> (ref=1)
2013-05-24 11:40:02,274 saml2.idp:INFO The login page
2013-05-24 11:40:02,274 saml2.idp:INFO do_authentication argv: {'redirect_uri': 'http://localhost:8088/sso/redirect', 'key': 'de78ba2e2a7e16d3d6a7143a8898039ea1d62f46', 'action': '/verify', 'authn_reference': '1', 'login': '', 'password': ''}
2013-05-24 11:40:02,397 saml2.idp:INFO <application> PATH: css/main.css
2013-05-24 11:40:02,397 saml2.idp:INFO = KAKA =
2013-05-24 11:40:02,397 saml2.idp:DEBUG KAKA: idpauthn="elp5RnJPdDlxSVE1TEYxWk5oNlAyMEFGOjE="
2013-05-24 11:40:02,397 saml2.idp:INFO -- No USER --
2013-05-24 11:40:08,063 saml2.idp:INFO <application> PATH: verify
2013-05-24 11:40:08,063 saml2.idp:INFO = KAKA =
2013-05-24 11:40:08,063 saml2.idp:DEBUG KAKA: idpauthn="elp5RnJPdDlxSVE1TEYxWk5oNlAyMEFGOjE="
2013-05-24 11:40:08,063 saml2.idp:INFO -- No USER --
2013-05-24 11:40:08,063 saml2.idp:DEBUG Callback: <function do_verify at 0x101d41488>
2013-05-24 11:40:08,063 saml2.idp:DEBUG do_verify: {'form.submitted': ['Log In'], 'redirect_uri': ['http://localhost:8088/sso/redirect'], 'key': ['de78ba2e2a7e16d3d6a7143a8898039ea1d62f46'], 'authn_reference': ['1'], 'login': ['upper'], 'password': ['crust']}
2013-05-24 11:40:08,063 saml2.idp:DEBUG Register upper under '65UQ1NcJoHh2SCkgNd6oIXKC'
2013-05-24 11:40:08,063 saml2.idp:DEBUG Cookie expires: Fri, 24-May-2013 09:45:08 GMT
2013-05-24 11:40:08,064 saml2.idp:DEBUG Redirect => http://localhost:8088/sso/redirect?id=65UQ1NcJoHh2SCkgNd6oIXKC&key=de78ba2e2a7e16d3d6a7143a8898039ea1d62f46
2013-05-24 11:40:08,075 saml2.idp:INFO <application> PATH: sso/redirect
2013-05-24 11:40:08,075 saml2.idp:INFO = KAKA =
2013-05-24 11:40:08,075 saml2.idp:DEBUG KAKA: idpauthn="NjVVUTFOY0pvSGgyU0NrZ05kNm9JWEtDOjE="
2013-05-24 11:40:08,075 saml2.idp:DEBUG Callback: (<class '__main__.SSO'>, 'redirect')
2013-05-24 11:40:08,075 saml2.idp:DEBUG ENVIRON: {'HTTP_REFERER': 'http://localhost:8088/sso/redirect?SAMLRequest=nVJBbsIwELz3FZYvOYU4AUSwSBAFoSLRNoLQQ29OWIqlYFOvQ9vf10lpq0qIQ2%2Fe0czu7I5H4%2FdDRU5gUGqVeGGHeQRUqbdSvSTeJp%2F7sTdOb0YKGZ%2FUdq9W8FoDWuJkCrmDE1obxbVA6UpxAOS25OvJ%2FZJHHcaPRltd6or%2BCMLrAoEIxjozlEy%2Bn1OtsD6AWYM5yRI2q2VC99YeeRBUuhTVXqPlMYsHlMycN6lEo7rMiQNEHRjYSgOlpWQxS6jc%2BrtdDKIY9PrQ70Vhl8XdYbErYnBgWRQsdkTEGhYKrVA2oRELuz7r%2B1EvZ0PeY5xFz5Rk521vpWoPeHXT4ouE%2FC7PMz97XOeUPJ2DoI5AU3f1kLdzDZlrcxD2escGaXZpqRyUlfaDphcvFeCx4xIZBb8j0jbkB9djMct0JcsPMqkq%2FTY1ICwkdCcqBPoPI9YIhdLZoSRIm4l%2Fv1L6CQ%3D%3D&RelayState=%2F', 'idp.authn_ref': '1', 'SERVER_PROTOCOL': 'HTTP/1.1', 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.7.2', 'TERM_PROGRAM_VERSION': '309', 'REQUEST_METHOD': 'GET', 'LOGNAME': 'rolandh', 'USER': 'rolandh', 'HTTP_ORIGIN': 'http://localhost:8088', 'HOME': '/Users/rolandh', 'QUERY_STRING': 'id=65UQ1NcJoHh2SCkgNd6oIXKC&key=de78ba2e2a7e16d3d6a7143a8898039ea1d62f46', 'PATH': '/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin', 'DISPLAY': '/tmp/launch-l4Dvdw/org.macosforge.xquartz:0', 'TERM_PROGRAM': 'Apple_Terminal', 'LANG': 'sv_SE.UTF-8', 'TERM': 'xterm-256color', 'SHELL': '/bin/bash', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_COOKIE': 'idpauthn="NjVVUTFOY0pvSGgyU0NrZ05kNm9JWEtDOjE="', 'SERVER_NAME': 'lingon.catalogix.se', 'REMOTE_ADDR': '127.0.0.1', 'SHLVL': '1', 'MACOSX_DEPLOYMENT_TARGET': '10.6', 'SECURITYSESSIONID': '186a6', 'wsgi.url_scheme': 'http', 'TMPDIR': '/var/folders/5t/4k01mls142jd38mx3m3ht9000000gp/T/', 'SERVER_PORT': '8088', 'PATH_INFO': '/sso/redirect', 'CONTENT_LENGTH': '', 'TERM_SESSION_ID': '1B7BA483-5B67-4673-8FAF-0FB3A1DB7461', 'SSH_AUTH_SOCK': '/tmp/launch-tEficf/Listeners', 'wsgi.input': <socket._fileobject object at 0x101dfb250>, 'Apple_PubSub_Socket_Render': '/tmp/launch-IrCxK4/Render', 'HTTP_HOST': 'localhost:8088', 'SCRIPT_NAME': '', 'wsgi.multithread': True, 'LC_ALL': 'sv_SE.UTF-8', 'myapp.url_args': 'sso/redirect', '_': './idp.py', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'wsgi.version': (1, 0), 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/536.29.13 (KHTML, like Gecko) Version/6.0.4 Safari/536.29.13', 'GATEWAY_INTERFACE': 'CGI/1.1', 'wsgi.run_once': False, 'OLDPWD': '/Users/rolandh/code/pysaml2/example', 'wsgi.multiprocess': False, 'HTTP_ACCEPT_LANGUAGE': 'sv-se', 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x100282270>, '__CF_USER_TEXT_ENCODING': '0x1F6:0:7\n', 'Apple_Ubiquity_Message': '/tmp/launch-wx2pJw/Apple_Ubiquity_Message', 'PWD': '/Users/rolandh/code/pysaml2/example/idp2', 'CONTENT_TYPE': 'text/plain', 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x101f0d050>, 'REMOTE_HOST': '1.0.0.127.in-addr.arpa', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate', 'COMMAND_MODE': 'unix2003'}
2013-05-24 11:40:08,075 saml2.idp:INFO --- In SSO Redirect ---
2013-05-24 11:40:08,075 saml2.idp:DEBUG _operation: {'SAMLRequest': 'nVJBbsIwELz3FZYvOYU4AUSwSBAFoSLRNoLQQ29OWIqlYFOvQ9vf10lpq0qIQ2/e0czu7I5H4/dDRU5gUGqVeGGHeQRUqbdSvSTeJp/7sTdOb0YKGZ/Udq9W8FoDWuJkCrmDE1obxbVA6UpxAOS25OvJ/ZJHHcaPRltd6or+CMLrAoEIxjozlEy+n1OtsD6AWYM5yRI2q2VC99YeeRBUuhTVXqPlMYsHlMycN6lEo7rMiQNEHRjYSgOlpWQxS6jc+rtdDKIY9PrQ70Vhl8XdYbErYnBgWRQsdkTEGhYKrVA2oRELuz7r+1EvZ0PeY5xFz5Rk521vpWoPeHXT4ouE/C7PMz97XOeUPJ2DoI5AU3f1kLdzDZlrcxD2escGaXZpqRyUlfaDphcvFeCx4xIZBb8j0jbkB9djMct0JcsPMqkq/TY1ICwkdCcqBPoPI9YIhdLZoSRIm4l/v1L6CQ==', 'RelayState': '/', 'req_info': <saml2.request.AuthnRequest object at 0x101f78750>}
2013-05-24 11:40:08,076 saml2.idp:INFO parsed OK
2013-05-24 11:40:08,076 saml2.idp:DEBUG <?xml version='1.0' encoding='UTF-8'?>
<ns0:AuthnRequest xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" AssertionConsumerServiceURL="http://localhost:8087" Destination="http://localhost:8088/sso/redirect" ID="id-ff8eab745e542130839bfb8eeabcbb08" IssueInstant="2013-05-24T09:40:02Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8087/sp.xml</ns1:Issuer><ns0:NameIDPolicy AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" /></ns0:AuthnRequest>
2013-05-24 11:40:08,076 saml2.mdstore:DEBUG _service(http://localhost:8087/sp.xml, spsso_descriptor, assertion_consumer_service, urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST)
2013-05-24 11:40:08,076 saml2.mdstore:DEBUG _service => [{'index': '1', 'binding': 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST', '__class__': 'urn:oasis:names:tc:SAML:2.0:metadata&AssertionConsumerService', 'location': 'http://localhost:8087'}]
2013-05-24 11:40:08,076 saml2.idp:DEBUG Binding: urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST, destination: http://localhost:8087
2013-05-24 11:40:08,076 saml2.mdstore:DEBUG _service(http://localhost:8087/sp.xml, spsso_descriptor, assertion_consumer_service, urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST)
2013-05-24 11:40:08,076 saml2.mdstore:DEBUG _service => [{'index': '1', 'binding': 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST', '__class__': 'urn:oasis:names:tc:SAML:2.0:metadata&AssertionConsumerService', 'location': 'http://localhost:8087'}]
2013-05-24 11:40:08,076 saml2.idp:INFO Identity: {'eduPersonAffiliation': 'affiliate', 'givenName': 'Derek', 'surname': 'Jeter'}
2013-05-24 11:40:08,077 saml2.ident:DEBUG local_policy: <saml2.assertion.Policy object at 0x101f113d0>, name_id_policy: <?xml version='1.0' encoding='UTF-8'?>
<ns0:NameIDPolicy xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" AllowCreate="false" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" />
2013-05-24 11:40:08,077 saml2.assertion:DEBUG filter based on: {'edupersontargetedid': None}
2013-05-24 11:40:08,078 saml2.idp:INFO AuthNResponse: <?xml version='1.0' encoding='UTF-8'?>
<ns0:Response xmlns:ns0="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" Destination="http://localhost:8087" ID="id-2348e99999d75d91fc19b18b9594cba8" InResponseTo="id-ff8eab745e542130839bfb8eeabcbb08" IssueInstant="2013-05-24T09:40:08Z" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8088/idp.xml</ns1:Issuer><ns0:Status><ns0:StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success" /></ns0:Status><ns1:Assertion ID="id-ee82ff5745574857c06d3d9ca373c69c" IssueInstant="2013-05-24T09:40:08Z" Version="2.0"><ns1:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://localhost:8088/idp.xml</ns1:Issuer><ns1:Subject><ns1:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" NameQualifier="" SPNameQualifier="http://localhost:8087/sp.xml">9eb466a7622818b02bc796156bbbf5b0a8dcdadb74402097c4fa49d26ed55b9e</ns1:NameID><ns1:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer"><ns1:SubjectConfirmationData InResponseTo="id-ff8eab745e542130839bfb8eeabcbb08" NotOnOrAfter="2013-05-24T09:55:08Z" Recipient="http://localhost:8087" /></ns1:SubjectConfirmation></ns1:Subject><ns1:Conditions NotBefore="2013-05-24T09:40:08Z" NotOnOrAfter="2013-05-24T09:55:08Z"><ns1:AudienceRestriction><ns1:Audience>http://localhost:8087/sp.xml</ns1:Audience></ns1:AudienceRestriction></ns1:Conditions><ns1:AuthnStatement AuthnInstant="2013-05-24T09:40:08Z" SessionIndex="id-df2e3bfb25b447c37d72235834933300"><ns1:AuthnContext><ns1:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</ns1:AuthnContextClassRef><ns1:AuthenticatingAuthority>http://lingon.catalogix.se</ns1:AuthenticatingAuthority></ns1:AuthnContext></ns1:AuthnStatement><ns1:AttributeStatement /></ns1:Assertion></ns0:Response>
2013-05-24 11:40:08,078 saml2.entity:INFO HTTP POST
2013-05-24 11:40:08,078 saml2.idp:DEBUG HTTPargs: {'url': 'http://localhost:8087', 'headers': [('Content-type', 'text/html')], 'data': ['<head>', '<title>SAML 2.0 POST</title>', '</head><body>', '<form method="post" action="http://localhost:8087">\n   <input type="hidden" name="SAMLResponse" value="PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz4KPG5zMDpSZXNwb25zZSB4bWxuczpuczA9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpwcm90b2NvbCIgeG1sbnM6bnMxPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIiBEZXN0aW5hdGlvbj0iaHR0cDovL2xvY2FsaG9zdDo4MDg3IiBJRD0iaWQtMjM0OGU5OTk5OWQ3NWQ5MWZjMTliMThiOTU5NGNiYTgiIEluUmVzcG9uc2VUbz0iaWQtZmY4ZWFiNzQ1ZTU0MjEzMDgzOWJmYjhlZWFiY2JiMDgiIElzc3VlSW5zdGFudD0iMjAxMy0wNS0yNFQwOTo0MDowOFoiIFZlcnNpb249IjIuMCI+PG5zMTpJc3N1ZXIgRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6bmFtZWlkLWZvcm1hdDplbnRpdHkiPmh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9pZHAueG1sPC9uczE6SXNzdWVyPjxuczA6U3RhdHVzPjxuczA6U3RhdHVzQ29kZSBWYWx1ZT0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOnN0YXR1czpTdWNjZXNzIiAvPjwvbnMwOlN0YXR1cz48bnMxOkFzc2VydGlvbiBJRD0iaWQtZWU4MmZmNTc0NTU3NDg1N2MwNmQzZDljYTM3M2M2OWMiIElzc3VlSW5zdGFudD0iMjAxMy0wNS0yNFQwOTo0MDowOFoiIFZlcnNpb249IjIuMCI+PG5zMTpJc3N1ZXIgRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6bmFtZWlkLWZvcm1hdDplbnRpdHkiPmh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9pZHAueG1sPC9uczE6SXNzdWVyPjxuczE6U3ViamVjdD48bnMxOk5hbWVJRCBGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpuYW1laWQtZm9ybWF0OnRyYW5zaWVudCIgTmFtZVF1YWxpZmllcj0iIiBTUE5hbWVRdWFsaWZpZXI9Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4Ny9zcC54bWwiPjllYjQ2NmE3NjIyODE4YjAyYmM3OTYxNTZiYmJmNWIwYThkY2RhZGI3NDQwMjA5N2M0ZmE0OWQyNmVkNTViOWU8L25zMTpOYW1lSUQ+PG5zMTpTdWJqZWN0Q29uZmlybWF0aW9uIE1ldGhvZD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmNtOmJlYXJlciI+PG5zMTpTdWJqZWN0Q29uZmlybWF0aW9uRGF0YSBJblJlc3BvbnNlVG89ImlkLWZmOGVhYjc0NWU1NDIxMzA4MzliZmI4ZWVhYmNiYjA4IiBOb3RPbk9yQWZ0ZXI9IjIwMTMtMDUtMjRUMDk6NTU6MDhaIiBSZWNpcGllbnQ9Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4NyIgLz48L25zMTpTdWJqZWN0Q29uZmlybWF0aW9uPjwvbnMxOlN1YmplY3Q+PG5zMTpDb25kaXRpb25zIE5vdEJlZm9yZT0iMjAxMy0wNS0yNFQwOTo0MDowOFoiIE5vdE9uT3JBZnRlcj0iMjAxMy0wNS0yNFQwOTo1NTowOFoiPjxuczE6QXVkaWVuY2VSZXN0cmljdGlvbj48bnMxOkF1ZGllbmNlPmh0dHA6Ly9sb2NhbGhvc3Q6ODA4Ny9zcC54bWw8L25zMTpBdWRpZW5jZT48L25zMTpBdWRpZW5jZVJlc3RyaWN0aW9uPjwvbnMxOkNvbmRpdGlvbnM+PG5zMTpBdXRoblN0YXRlbWVudCBBdXRobkluc3RhbnQ9IjIwMTMtMDUtMjRUMDk6NDA6MDhaIiBTZXNzaW9uSW5kZXg9ImlkLWRmMmUzYmZiMjViNDQ3YzM3ZDcyMjM1ODM0OTMzMzAwIj48bnMxOkF1dGhuQ29udGV4dD48bnMxOkF1dGhuQ29udGV4dENsYXNzUmVmPnVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphYzpjbGFzc2VzOlBhc3N3b3JkPC9uczE6QXV0aG5Db250ZXh0Q2xhc3NSZWY+PG5zMTpBdXRoZW50aWNhdGluZ0F1dGhvcml0eT5odHRwOi8vbGluZ29uLmNhdGFsb2dpeC5zZTwvbnMxOkF1dGhlbnRpY2F0aW5nQXV0aG9yaXR5PjwvbnMxOkF1dGhuQ29udGV4dD48L25zMTpBdXRoblN0YXRlbWVudD48bnMxOkF0dHJpYnV0ZVN0YXRlbWVudCAvPjwvbnMxOkFzc2VydGlvbj48L25zMDpSZXNwb25zZT4=" />\n   <input type="hidden" name="RelayState" value="/" />\n</form>', '<script type="text/javascript">', '     window.onload = function ()', ' { document.forms[0].submit(); }', '</script>', '</body>'], 'method': 'GET'}
