
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation Tutorial (part 1: the Server) &mdash; FireWorks 0.13 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.13',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="FireWorks 0.13 documentation" href="index.html" />
    <link rel="next" title="Installation Tutorial (part 2: the Worker)" href="installation_tutorial_pt2.html" />
    <link rel="prev" title="FireWorks Changelog" href="changelog.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installation_tutorial_pt2.html" title="Installation Tutorial (part 2: the Worker)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="FireWorks Changelog"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">FireWorks 0.13 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation-tutorial-part-1-the-server">
<h1>Installation Tutorial (part 1: the Server)<a class="headerlink" href="#installation-tutorial-part-1-the-server" title="Permalink to this headline">¶</a></h1>
<p>This tutorial will guide you through FireWorks installation on the central server. The purpose of this tutorial is to get you set up as quickly as possible; it isn&#8217;t intended to demonstrate the features of FireWorks or explain things in great detail.</p>
<p>This tutorial can be safely completed from the command line, and requires no programming.</p>
<div class="section" id="set-up-the-central-server-fireserver">
<h2>Set up the central server (FireServer)<a class="headerlink" href="#set-up-the-central-server-fireserver" title="Permalink to this headline">¶</a></h2>
<p>The FireWorks central server (FireServer) hosts the FireWorks database. For production, you should choose a central server that has a fixed IP address/hostname so that you can connect to it from other machines reliably. For initially testing the installation, it should be OK to use a laptop or workstation with a dynamic IP. To set up a FireServer:</p>
<ol class="arabic">
<li><p class="first">Follow the instructions listed at <a class="reference internal" href="installation.html"><em>Basic FireWorks Installation</em></a>.</p>
</li>
<li><p class="first">Install <a class="reference external" href="http://www.mongodb.org">MongoDB</a> on the server.</p>
</li>
<li><p class="first">Start MongoDB:</p>
<div class="highlight-python"><pre>mongod &amp;</pre>
</div>
</li>
</ol>
<p>You are now ready to start playing with FireWorks!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If MongoDB is outputting a lot of text, you might want to start it in a dedicated Terminal window or use the <tt class="docutils literal"><span class="pre">--quiet</span></tt> option. In addition, if you are running it on a shared machine, make sure that the <tt class="docutils literal"><span class="pre">--dbpath</span></tt> variable is set to a directory that you can access.</p>
</div>
<div class="section" id="reset-the-fireserver">
<h3>Reset the FireServer<a class="headerlink" href="#reset-the-fireserver" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Navigate to the FireWorks installation tutorial directory:</p>
<div class="highlight-python"><pre>cd &lt;INSTALL_DIR&gt;/fw_tutorials/installation</pre>
</div>
<p>where &lt;INSTALL_DIR&gt; is your FireWorks installation directory.</p>
</li>
<li><p class="first">Reset the FireWorks database (the LaunchPad):</p>
<div class="highlight-python"><pre>lpad reset &lt;TODAY'S DATE&gt;</pre>
</div>
<p>where &lt;TODAY&#8217;S DATE&gt; is formatted like &#8216;2012-01-31&#8217; (this serves as a safeguard to accidentally overwriting an existing database). You should receive confirmation that the LaunchPad was reset.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are already curious about the various options that the LaunchPad offers, you can type <tt class="docutils literal"><span class="pre">lpad</span> <span class="pre">-h</span></tt>. The <tt class="docutils literal"><span class="pre">-h</span></tt> help option is available for all of the scripts in FireWorks.</p>
</div>
</div>
<div class="section" id="add-a-firework-to-the-fireserver-database">
<h3>Add a FireWork to the FireServer database<a class="headerlink" href="#add-a-firework-to-the-fireserver-database" title="Permalink to this headline">¶</a></h3>
<p>A FireWork contains the computing job to be performed. For this tutorial, we will use a FireWork that consists of only a single step. We&#8217;ll tackle more complex workflows in other tutorials.</p>
<ol class="arabic">
<li><p class="first">Staying in the tutorial directory, run the following command:</p>
<div class="highlight-python"><pre>lpad add fw_test.yaml</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can look inside the file <tt class="docutils literal"><span class="pre">fw_test.yaml</span></tt> with a text editor if you&#8217;d like; we&#8217;ll explain its components shortly.</p>
</div>
</li>
<li><p class="first">You should have received confirmation that the FireWork got added. You can query the database for this FireWork as follows:</p>
<div class="highlight-python"><pre>lpad get_fw 1</pre>
</div>
<p>This prints out the FireWork with <tt class="docutils literal"><span class="pre">fw_id</span></tt> = 1 (the first FireWork entered into the database):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;fw_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s">&quot;spec&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&quot;_tasks&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&quot;_fw_name&quot;</span><span class="p">:</span> <span class="s">&quot;Script Task&quot;</span><span class="p">,</span>
                <span class="s">&quot;script&quot;</span><span class="p">:</span> <span class="s">&quot;echo </span><span class="se">\&quot;</span><span class="s">howdy, your job launched successfully!</span><span class="se">\&quot;</span><span class="s"> &gt;&gt; howdy.txt&quot;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="s">&quot;created_on&quot;</span><span class="p">:</span> <span class="s">&quot;2013-04-05T22:53:24.552834&quot;</span><span class="p">,</span>
    <span class="s">&quot;state&quot;</span><span class="p">:</span> <span class="s">&quot;READY&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Some of the FireWork is straightforward, but a few sections deserve further explanation:</p>
</li>
</ol>
<ul class="simple">
<li>The <strong>spec</strong> of the FireWork contains <em>all</em> the information about what job to run and the parameters needed to run it.</li>
<li>Within the <strong>spec</strong>, the <strong>_tasks</strong> section tells you what jobs will run. The <tt class="docutils literal"><span class="pre">Script</span> <span class="pre">Task</span></tt> is a particular type of task that runs commands through the shell. Other sections of the <strong>spec</strong> can be also be defined, but for now we&#8217;ll stick to just <strong>_tasks</strong>. Later on, we&#8217;ll describe how to run multiple <strong>_tasks</strong> or customized <strong>_tasks</strong>.</li>
<li>This FireWork runs the script <tt class="docutils literal"><span class="pre">echo</span> <span class="pre">&quot;howdy,</span> <span class="pre">your</span> <span class="pre">job</span> <span class="pre">launched</span> <span class="pre">successfully!&quot;</span> <span class="pre">&gt;&gt;</span> <span class="pre">howdy.txt&quot;</span></tt>, which prints text to a file named <tt class="docutils literal"><span class="pre">howdy.txt</span></tt>.</li>
<li>The <strong>state</strong> of <em>READY</em> means the FireWork is ready to be run.</li>
</ul>
<p>You have now stored a FireWork in the LaunchPad, and it&#8217;s ready to run!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">More details on using the <tt class="docutils literal"><span class="pre">ScriptTask</span></tt> are presented in the later tutorials.</p>
</div>
</div>
</div>
<div class="section" id="launch-a-rocket-on-the-fireserver">
<h2>Launch a Rocket on the FireServer<a class="headerlink" href="#launch-a-rocket-on-the-fireserver" title="Permalink to this headline">¶</a></h2>
<p>A Rocket fetches a FireWork from the LaunchPad and runs it. A Rocket might be run on a separate machine (FireWorker) or through a queuing system. For now, we will run the Rocket on the FireServer itself and without a queue.</p>
<ol class="arabic">
<li><p class="first">We can launch Rockets using the Rocket Launcher. Execute the following command (once):</p>
<div class="highlight-python"><pre>rlaunch singleshot</pre>
</div>
<p>The Rocket fetches an available FireWork from the FireServer and runs it.</p>
</li>
<li><p class="first">Verify that the desired task ran:</p>
<div class="highlight-python"><pre>cat howdy.txt</pre>
</div>
<p>You should see the text: <tt class="docutils literal"><span class="pre">howdy,</span> <span class="pre">your</span> <span class="pre">job</span> <span class="pre">launched</span> <span class="pre">successfully!</span></tt></p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In addition to <tt class="docutils literal"><span class="pre">howdy.txt</span></tt>, you should also see a file called <tt class="docutils literal"><span class="pre">FW.json</span></tt>. This contains a JSON representation of the FireWork that the Rocket ran and can be useful later for tracking down a launch or debugging.</p>
</div>
<ol class="arabic">
<li><p class="first">Check the status of your FireWork:</p>
<div class="highlight-python"><pre>lpad get_fw 1</pre>
</div>
<p>You will now see lots of information about your Rocket launch, such as the time and directory of the launch. A lot of it is probably unclear, but you should notice that the state of the FireWork is now <tt class="docutils literal"><span class="pre">COMPLETED</span></tt>.</p>
</li>
<li><p class="first">Try launching another rocket (you should get an error):</p>
<div class="highlight-python"><pre>rlaunch singleshot</pre>
</div>
<p>The error <tt class="docutils literal"><span class="pre">No</span> <span class="pre">FireWorks</span> <span class="pre">are</span> <span class="pre">ready</span> <span class="pre">to</span> <span class="pre">run</span> <span class="pre">and</span> <span class="pre">match</span> <span class="pre">query!</span></tt> indicates that the Rocket tried to fetch a FireWork from the database, but none could be found. Indeed, we had previously run the only FireWork that was in the database.</p>
</li>
</ol>
</div>
<div class="section" id="launch-many-rockets-rapidfire-mode">
<h2>Launch many Rockets (rapidfire mode)<a class="headerlink" href="#launch-many-rockets-rapidfire-mode" title="Permalink to this headline">¶</a></h2>
<p>If you just want to run many jobs on the central server itself, the simplest way is to run the Rocket Launcher in &#8220;rapidfire mode&#8221;. Let&#8217;s try this feature:</p>
<ol class="arabic">
<li><p class="first">Staying in the same directory, clean up your output files:</p>
<div class="highlight-python"><pre>rm FW.json howdy.txt</pre>
</div>
</li>
<li><p class="first">Let&#8217;s add 3 identical FireWorks:</p>
<div class="highlight-python"><pre>lpad add fw_test.yaml
lpad add fw_test.yaml
lpad add fw_test.yaml</pre>
</div>
</li>
<li><p class="first">Confirm that the three FireWorks got added to the database, in addition to the one from before (4 total):</p>
<div class="highlight-python"><pre>lpad get_fws</pre>
</div>
</li>
<li><p class="first">We could also just get the <tt class="docutils literal"><span class="pre">fw_id</span></tt> of jobs that are ready to run (our 3 new FireWorks):</p>
<div class="highlight-python"><pre>lpad get_fws -q '{"state":"READY"}' -d 'ids'</pre>
</div>
</li>
<li><p class="first">Let&#8217;s run launch Rockets in &#8220;rapidfire&#8221; mode, which will keep repeating until we run out of FireWorks to run:</p>
<div class="highlight-python"><pre>rlaunch rapidfire</pre>
</div>
</li>
<li><p class="first">You should see three directories starting with the tag <tt class="docutils literal"><span class="pre">launcher_</span></tt>. Inside each of these directories, you&#8217;ll find the results of one of your FireWorks (a file named <tt class="docutils literal"><span class="pre">howdy.txt</span></tt>):</p>
<div class="highlight-python"><pre>cat launch*/howdy.txt</pre>
</div>
</li>
</ol>
</div>
<div class="section" id="running-fireworks-automatically">
<h2>Running FireWorks automatically<a class="headerlink" href="#running-fireworks-automatically" title="Permalink to this headline">¶</a></h2>
<p>We can set our Rocket Launcher to continuously look for new FireWorks to run. Let&#8217;s try this feature.</p>
<ol class="arabic">
<li><p class="first">Staying in the same directory, clean up your previous output files:</p>
<div class="highlight-python"><pre>rm -r launcher_*</pre>
</div>
</li>
<li><p class="first">Start the Rocket Launcher so that it looks for new FireWorks every 10 seconds:</p>
<div class="highlight-python"><pre>rlaunch rapidfire --nlaunches infinite --sleep 10</pre>
</div>
</li>
<li><p class="first"><strong>In a new terminal window</strong>, navigate back to your working directory containing <tt class="docutils literal"><span class="pre">fw_test.yaml</span></tt>. Let&#8217;s insert two FireWorks:</p>
<div class="highlight-python"><pre>lpad add fw_test.yaml
lpad add fw_test.yaml</pre>
</div>
</li>
<li><p class="first">After a few seconds, the Rocket Launcher should have picked up the new jobs and run them. Confirm this is the case:</p>
<div class="highlight-python"><pre>cat launch*/howdy.txt</pre>
</div>
<p>You should see two outputs, one for each FireWork we inserted.</p>
</li>
<li><p class="first">You can continue adding FireWorks as desired; the Rocket Launcher will run them automatically and create a new directory for each job. When you are finished, you can exit out of the Rocket Launcher terminal window and clean up your working directory.</p>
</li>
<li><p class="first">As with all FireWorks scripts, you can run the built-in help for more information:</p>
<div class="highlight-python"><pre>rlaunch -h
rlaunch singleshot -h
rlaunch rapidfire -h</pre>
</div>
</li>
</ol>
</div>
<div class="section" id="what-just-happened">
<h2>What just happened?<a class="headerlink" href="#what-just-happened" title="Permalink to this headline">¶</a></h2>
<p>It&#8217;s important to understand that when you add a FireWork to the LaunchPad using the <tt class="docutils literal"><span class="pre">lpad</span></tt> script, the job just sits in the database and waits. The LaunchPad does not submit jobs to a computing resource when a new FireWork is added to the LaunchPad. Rather, a computing resource must <em>request</em> a computing task by running the Rocket Launcher. By running the Rocket Launcher from different locations, you can have different computing resources run your jobs.</p>
<p>When we ran the Rocket Launcher in rapid-fire mode, the Rocket Launcher requests a new task from the LaunchPad immediately after completing its current task. It stops requesting tasks when none are left in the database. It might <em>appear</em> like the LaunchPad is feeding FireWorks to the Rocket Launcher, but in reality the Rocket Launcher must initiate the request for a FireWork. You might have noticed this when we ran the Rocket Launcher in infinite mode with a sleep time of 10. In this mode, we are requesting a new task every 10 seconds after completing the previous set of tasks. When you add a new FireWork to the LaunchPad, it does not start running automatically. We must wait up to 10 seconds for the Rocket Launcher to request it!</p>
</div>
<div class="section" id="next-steps">
<h2>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>At this point, you&#8217;ve successfully stored a simple job in a database and run it later on command. You even executed multiple jobs with a single command: <tt class="docutils literal"><span class="pre">rlaunch</span> <span class="pre">rapidfire</span></tt>, and looked for new jobs automatically using the <strong>infinite</strong> Rocket Launcher. This should give a basic feeling of how you can automate many jobs using FireWorks.</p>
<p>Your next step depends on your application. If you want to stick with our simple script and automate it on at least one worker node, forge on to the next tutorial in the series: <a class="reference internal" href="installation_tutorial_pt2.html"><em>Installation Tutorial (part 2: the Worker)</em></a>. This is the path we recommend for most users, except in the simplest of circumstances in which you only want to run jobs on the FireServer itself.</p>
<p>If you are only running on the FireServer, you can skip ahead to <a class="reference internal" href="firetask_tutorial.html"><em>defining jobs using FireTasks</em></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation Tutorial (part 1: the Server)</a><ul>
<li><a class="reference internal" href="#set-up-the-central-server-fireserver">Set up the central server (FireServer)</a><ul>
<li><a class="reference internal" href="#reset-the-fireserver">Reset the FireServer</a></li>
<li><a class="reference internal" href="#add-a-firework-to-the-fireserver-database">Add a FireWork to the FireServer database</a></li>
</ul>
</li>
<li><a class="reference internal" href="#launch-a-rocket-on-the-fireserver">Launch a Rocket on the FireServer</a></li>
<li><a class="reference internal" href="#launch-many-rockets-rapidfire-mode">Launch many Rockets (rapidfire mode)</a></li>
<li><a class="reference internal" href="#running-fireworks-automatically">Running FireWorks automatically</a></li>
<li><a class="reference internal" href="#what-just-happened">What just happened?</a></li>
<li><a class="reference internal" href="#next-steps">Next steps</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="changelog.html"
                        title="previous chapter">FireWorks Changelog</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="installation_tutorial_pt2.html"
                        title="next chapter">Installation Tutorial (part 2: the Worker)</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/installation_tutorial.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installation_tutorial_pt2.html" title="Installation Tutorial (part 2: the Worker)"
             >next</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="FireWorks Changelog"
             >previous</a> |</li>
        <li><a href="index.html">FireWorks 0.13 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Anubhav Jain.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>