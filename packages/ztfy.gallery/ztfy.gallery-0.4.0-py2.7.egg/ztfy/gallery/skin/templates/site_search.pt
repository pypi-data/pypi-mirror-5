<tal:var content="structure context/@@sections" />
<div class="search_results" i18n:domain="ztfy.gallery">
	<h1 i18n:translate="">Search results</h1>
	<div i18n:translate="">Your search criterias:</div>
	<ul>
		<li tal:condition="view/search_text"><span i18n:translate="">Search text: </span> <tal:var content="view/search_text" /></li>
		<li tal:condition="view/search_tag"><span i18n:translate="">Search tag: </span> <tal:var content="view/category/i18n:title" /></li>
	</ul>
	<div class="section">
		<div class="topics nofloat" tal:define="page_results view/results;
												results page_results/results;">
			<tal:loop repeat="result results">
				<div class="topic"
					 tal:define="topic python:result[0];
								 images python:result[1];">
					<tal:var define="preview nocall:topic/@@preview"
							 content="structure python:preview(images)" />
				</div>
			</tal:loop>
			<div class="pages" tal:define="pages page_results/pages;
										   current_page python:int(request.form.get('page',0));
										   first_page python:max(0,current_page-1);
										   last_page python:min(pages,current_page+2);"
							   tal:condition="python:pages > 1">
				<tal:if condition="python:first_page > 0">
					<a tal:attributes="href string:${request/URL}?page=0;"
					   title="First page" i18n:attributes="title">&lt;&lt;</a>
					<span>...</span>
				</tal:if>
				<a tal:repeat="page python:range(first_page,last_page)"
				   tal:attributes="href string:${request/URL}?page=${page};
								   class python:(current_page == page) and 'current' or '';"
				   tal:content="python:page+1">page</a>
				<tal:if condition="python:last_page < pages">
					<span>...</span>
					<a tal:define="last python:pages-1"
					   tal:attributes="href string:${request/URL}?page=${last};"
					   title="Last page" i18n:attributes="title">&gt;&gt;</a>
				</tal:if>
			</div>
		</div>
		<div class="warning" tal:condition="not:view/results/results">
			<span i18n:translate="">No result matching your criterias has been found !</span>
		</div>
	</div>
</div>