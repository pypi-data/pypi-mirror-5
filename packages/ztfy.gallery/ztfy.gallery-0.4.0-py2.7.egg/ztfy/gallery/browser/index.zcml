<configure
	xmlns="http://namespaces.zope.org/browser"
	xmlns:zope="http://namespaces.zope.org/zope"
	xmlns:z3c="http://namespaces.zope.org/z3c"
	i18n_domain="ztfy.gallery">

	<!-- Gallery index management views -->
	<zope:view
		name="index"
		factory=".index.GalleryIndexNamespaceTraverser"
		provides="zope.traversing.interfaces.ITraversable"
		for="..interfaces.IGalleryIndexManager"
		type="ztfy.skin.layer.IZTFYBrowserLayer" />

	<z3c:pagelet
		name="addGalleryIndex.html"
		for="..interfaces.IGalleryContainerTarget"
		class=".index.GalleryIndexAddForm"
		layer="ztfy.skin.layer.IZTFYBrowserLayer"
		permission="ztfy.ManageContent" />

	<viewlet
		name=":: Add gallery index..."
		viewURL="javascript:$.ZTFY.dialog.open('@@addGalleryIndex.html');"
		for="..interfaces.IGalleryContainerTarget"
		view=".gallery.IGalleryImageAddFormMenuTarget"
		manager="ztfy.skin.viewlets.contents.interfaces.IContentsViewletManager"
		class=".index.GalleryIndexAddMenuItem"
		permission="ztfy.ManageContent"
		layer="ztfy.skin.layer.IZTFYBackLayer"
		weight="25" />

	<z3c:pagelet
		name="contents.html"
		for="..interfaces.IGalleryIndex"
		class=".index.GalleryIndexContentsView"
		layer="ztfy.skin.layer.IZTFYBrowserLayer"
		permission="ztfy.ManageContent" />

	<z3c:template
		template="templates/index_contents.pt"
		for=".index.GalleryIndexContentsView"
		layer="ztfy.skin.layer.IZTFYBackLayer" />

	<z3c:pagelet
		name="indexProperties.html"
		for="..interfaces.IGalleryImage"
		class=".index.GalleryImageIndexEditForm"
		layer="ztfy.skin.layer.IZTFYBrowserLayer"
		permission="ztfy.ManageContent" />

	<viewlet
		name="index_image_prefix"
		for="..interfaces.IGalleryImage"
		view=".index.GalleryImageIndexEditForm"
		manager="ztfy.skin.interfaces.IWidgetsPrefixViewletsManager"
		class=".index.GalleryImageIndexPrefix"
		permission="ztfy.ManageContent"
		layer="ztfy.skin.layer.IZTFYBackLayer" />

	<z3c:template
		template="templates/index_prefix.pt"
		for=".index.GalleryImageIndexPrefix"
		layer="ztfy.skin.layer.IZTFYBackLayer" />

</configure>
