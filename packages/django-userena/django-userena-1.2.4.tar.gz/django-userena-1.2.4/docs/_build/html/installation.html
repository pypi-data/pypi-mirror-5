<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation. &mdash; django-userena 1.2.3 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.2.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="django-userena 1.2.3 documentation" href="index.html" />
    <link rel="next" title="Settings" href="settings.html" />
    <link rel="prev" title="Userena Introduction" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="settings.html" title="Settings"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Userena Introduction"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">django-userena 1.2.3 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation">
<span id="id1"></span><h1>Installation.<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>Before install django-userena, you&#8217;ll need to have a copy of <a class="reference external" href="http://www.djangoproject.com">Django</a> 1.2 or newer installed.</p>
<p>For further information, consult the <a class="reference external" href="http://www.djangoproject.com/download/">Django download page</a>, which offers convenient packaged
downloads and installation instructions.</p>
<p>warning:</p>
<div class="highlight-python"><pre>django-userena has not been tested on Python3 yet.</pre>
</div>
<div class="section" id="installing-django-userena">
<h2>Installing django-userena.<a class="headerlink" href="#installing-django-userena" title="Permalink to this headline">¶</a></h2>
<p>You can install django-userena automagicly with <tt class="docutils literal"><span class="pre">pip</span></tt>. Or by manually
placing it on on your <tt class="docutils literal"><span class="pre">PYTHON_PATH</span></tt>. The recommended way is the shown in
<a class="reference internal" href="#pip-install"><em>Automatic installation with pip.</em></a>.</p>
<p><em>It is also recommended to use</em> <a class="reference external" href="http://pypi.python.org/pypi/virtualenv">virtualenv</a> <em>to have an isolated python
environment. This way it&#8217;s possible to create a tailored environment for each
project.</em></p>
<div class="section" id="automatic-installation-with-pip">
<span id="pip-install"></span><h3>Automatic installation with pip.<a class="headerlink" href="#automatic-installation-with-pip" title="Permalink to this headline">¶</a></h3>
<p>Automatic install with <a class="reference external" href="http://www.pip-installer.org/en/latest/index.html">pip</a>. All you have to do is
run the following command:</p>
<div class="highlight-python"><pre>pip install django-userena</pre>
</div>
<p>If you want to have a specific version of userena, you can do so by adding the
following:</p>
<div class="highlight-python"><pre>pip install django-userena==1.0.1</pre>
</div>
</div>
<div class="section" id="manual-installation-with-easy-install">
<h3>Manual installation with easy_install.<a class="headerlink" href="#manual-installation-with-easy-install" title="Permalink to this headline">¶</a></h3>
<p>Clone the Git repository from Github. Then you can direct easy_install to the
<tt class="docutils literal"><span class="pre">setup.py</span></tt> file. For ex.:</p>
<div class="highlight-python"><pre>git clone git://github.com/bread-and-pepper/django-userena.git
cd django-userena
easy_install setup.py</pre>
</div>
</div>
<div class="section" id="automatic-installation-of-development-version-with-pip">
<h3>Automatic installation of development version with pip.<a class="headerlink" href="#automatic-installation-of-development-version-with-pip" title="Permalink to this headline">¶</a></h3>
<p>You can tell <a class="reference external" href="http://www.pip-installer.org/en/latest/index.html">pip</a> to install django-userena by supplying it with the git
repository on Github. Do this by typing the following in your terminal:</p>
<div class="highlight-python"><pre>pip install -e git+git://github.com/bread-and-pepper/django-userena.git#egg=userena</pre>
</div>
</div>
<div class="section" id="manual-installation-of-development-version-with-git">
<h3>Manual installation of development version with git.<a class="headerlink" href="#manual-installation-of-development-version-with-git" title="Permalink to this headline">¶</a></h3>
<p>Clone userena with:</p>
<div class="highlight-python"><pre>git clone git://github.com/bread-and-pepper/django-userena.git</pre>
</div>
<p>You now have a directory <tt class="docutils literal"><span class="pre">django-userena</span></tt> which contains the <tt class="docutils literal"><span class="pre">userena</span></tt>
application. You can add userena to your <tt class="docutils literal"><span class="pre">$PYTHONPATH</span></tt> by symlinking it. For
example:</p>
<div class="highlight-python"><pre>cd YOUR_PYTHON_PATH
ln -s ~/src/django-userena/userena userena</pre>
</div>
<p>Now userena is available to your project.</p>
</div>
</div>
<div class="section" id="required-settings">
<h2>Required settings<a class="headerlink" href="#required-settings" title="Permalink to this headline">¶</a></h2>
<p>You need to make some changes Django settings if you want to use Userena in
your project. This means modifying <tt class="docutils literal"><span class="pre">AUTHENTICATION_BACKENDS</span></tt>,
<tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt> and optionally <tt class="docutils literal"><span class="pre">MIDDLEWARE_CLASSES</span></tt>.</p>
<p>Begin by adding <tt class="docutils literal"><span class="pre">userena</span></tt>, <tt class="docutils literal"><span class="pre">guardian</span></tt> and <tt class="docutils literal"><span class="pre">easy_thumbnails</span></tt> to the
<tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt> in your settings.py file of your project.</p>
<p>Next add <tt class="docutils literal"><span class="pre">UserenaAuthenticationBackend</span></tt> and <tt class="docutils literal"><span class="pre">ObjectPermissionBackend</span></tt>
also in your settings.py file, from django-guardian, at the top of <tt class="docutils literal"><span class="pre">AUTHENTICATION_BACKENDS</span></tt>.
If you only have Django&#8217;s default backend, adding django-guardian and that of userena will get
the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">AUTHENTICATION_BACKENDS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">&#39;userena.backends.UserenaAuthenticationBackend&#39;</span><span class="p">,</span>
    <span class="s">&#39;guardian.backends.ObjectPermissionBackend&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.auth.backends.ModelBackend&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="section" id="start-new-app">
<h3>Start New App<a class="headerlink" href="#start-new-app" title="Permalink to this headline">¶</a></h3>
<p>Next, you need to create a new app on your Django project.
In your Command Prompt shell, type: <tt class="docutils literal"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">startapp</span> <span class="pre">accounts</span></tt>.
We are creating a new app for Userena titled &#8216;accounts&#8217;.</p>
<p>Next, add <tt class="docutils literal"><span class="pre">accounts</span></tt> to the <tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt> in your settings.py file.</p>
</div>
<div class="section" id="email-backend">
<h3>Email Backend<a class="headerlink" href="#email-backend" title="Permalink to this headline">¶</a></h3>
<p>Userena uses the Django email facilities to send mail to users, for example
after user signup for email verification.  By default Django uses the SMTP
backend, which may cause issues in development and/or if the default SMTP
settings are not suitable for your environment.  It is recommended to
explicitly set the email backend provider in your settings.py.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">EMAIL_BACKEND</span> <span class="o">=</span> <span class="s">&#39;django.core.mail.backends.dummy.EmailBackend&#39;</span>
</pre></div>
</div>
<p>To use GMail SMTP, you may use the following code in your settings.py:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">EMAIL_USE_TLS</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">EMAIL_HOST</span> <span class="o">=</span> <span class="s">&#39;smtp.gmail.com&#39;</span>
<span class="n">EMAIL_PORT</span> <span class="o">=</span> <span class="mi">587</span>
<span class="n">EMAIL_HOST_USER</span> <span class="o">=</span> <span class="s">&#39;yourgmailaccount@gmail.com&#39;</span>
<span class="n">EMAIL_HOST_PASSWORD</span> <span class="o">=</span> <span class="s">&#39;yourgmailpassword&#39;</span>
</pre></div>
</div>
<p>See: <a class="reference external" href="https://docs.djangoproject.com/en/dev/topics/email/">Django Email Documentation</a></p>
</div>
<div class="section" id="profiles">
<h3>Profiles<a class="headerlink" href="#profiles" title="Permalink to this headline">¶</a></h3>
<p>Userena needs you to define the profile that is used by supplying Django&#8217;s
<tt class="docutils literal"><span class="pre">AUTH_PROFILE_MODULE</span></tt> setting. Userena supplies the following two base
profiles for you that you should use for your own profile model by inheriting
from them:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">UserenaBaseProfile</span></tt></dt>
<dd>Basic profile that supplies your user with mugshots and the necessary
fields for privacy settings.</dd>
<dt><tt class="docutils literal"><span class="pre">UserenaLanguageBaseProfile</span></tt></dt>
<dd>Adds an extra field that lets the user define its preferred language
after logging in to your site.</dd>
</dl>
</div></blockquote>
<p><strong>IMPORTANT</strong>: The above profiles are <tt class="docutils literal"><span class="pre">abstract</span></tt> models. This means that you
cannot use them directly in <tt class="docutils literal"><span class="pre">AUTH_PROFILE_MODULE</span></tt> but you must create your
own profile model which inherits from one of the above models. This models
must also connect itself to the <tt class="xref py py-class docutils literal"><span class="pre">User</span></tt> model of Django.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext</span> <span class="k">as</span> <span class="n">_</span>
<span class="kn">from</span> <span class="nn">userena.models</span> <span class="kn">import</span> <span class="n">UserenaBaseProfile</span>

<span class="k">class</span> <span class="nc">MyProfile</span><span class="p">(</span><span class="n">UserenaBaseProfile</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">User</span><span class="p">,</span>
                                <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;user&#39;</span><span class="p">),</span>
                                <span class="n">related_name</span><span class="o">=</span><span class="s">&#39;my_profile&#39;</span><span class="p">)</span>
    <span class="n">favourite_snack</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">&#39;favourite snack&#39;</span><span class="p">),</span>
                                       <span class="n">max_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want the user have the ability to choose their default language in their
profile, you must add <tt class="docutils literal"><span class="pre">userena.middleware.UserenaLocaleMiddleware</span></tt> at the end of
<tt class="docutils literal"><span class="pre">MIDDLEWARE_CLASSES</span></tt> in your Django settings. This does require a profile
model which has a language field. You can use the
<tt class="docutils literal"><span class="pre">UserenaLanguageBaseProfile</span></tt> class of userena that does this for you.</p>
</div>
<div class="section" id="the-uri-s">
<h3>The URI&#8217;s<a class="headerlink" href="#the-uri-s" title="Permalink to this headline">¶</a></h3>
<p>Userena has a <tt class="docutils literal"><span class="pre">URLconf</span></tt> which sets all the urls and views for you. This
should be included in your project&#8217;s root <tt class="docutils literal"><span class="pre">URLconf</span></tt>.</p>
<p>For example, to place the URIs under the prefix <tt class="docutils literal"><span class="pre">/accounts/</span></tt>, you could add
the following to your project&#8217;s root <tt class="docutils literal"><span class="pre">URLconf</span></tt>.
Add this code under <tt class="docutils literal"><span class="pre">urlpatterns</span></tt> in your urls.py file.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="s">r&#39;^accounts/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;userena.urls&#39;</span><span class="p">)),</span>
</pre></div>
</div>
<p>This should have you a working accounts application for your project. See the
<a class="reference internal" href="settings.html#settings"><em>settings</em></a> for further configuration options.</p>
</div>
<div class="section" id="id2">
<h3>Required settings<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Django-guardian requires you to set the <tt class="docutils literal"><span class="pre">ANONYMOUS_USER_ID</span></tt> setting. I always
set this to <tt class="docutils literal"><span class="pre">-1</span></tt>. As noted before, you are also required to set the
<tt class="docutils literal"><span class="pre">AUTH_PROFILE_MODULE</span></tt> to your custom defined profile.</p>
<p>For example, add the following into your settings.py file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ANONYMOUS_USER_ID</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

<span class="n">AUTH_PROFILE_MODULE</span> <span class="o">=</span> <span class="s">&#39;accounts.MyProfile&#39;</span>
</pre></div>
</div>
<p>To integrate Django with userena you should alter the following three settings
to reflect the URI you have chosen for userena. For example, if userena lives
under <tt class="docutils literal"><span class="pre">accounts</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">LOGIN_REDIRECT_URL</span> <span class="o">=</span> <span class="s">&#39;/accounts/</span><span class="si">%(username)s</span><span class="s">/&#39;</span>
<span class="n">LOGIN_URL</span> <span class="o">=</span> <span class="s">&#39;/accounts/signin/&#39;</span>
<span class="n">LOGOUT_URL</span> <span class="o">=</span> <span class="s">&#39;/accounts/signout/&#39;</span>
</pre></div>
</div>
<p>The above should supply you with a fully functional account management app for
your project. You can look into the next chapter to fully customize userena to
your likings.</p>
</div>
<div class="section" id="permission-check">
<h3>Permission check<a class="headerlink" href="#permission-check" title="Permalink to this headline">¶</a></h3>
<p>Sometimes Django decides to skip installing the default permissions for a
model. To check if all permissions are there, run the <tt class="docutils literal"><span class="pre">check_permissions</span></tt> in
the management <a class="reference internal" href="commands.html#commands"><em>Commands.</em></a>.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation.</a><ul>
<li><a class="reference internal" href="#installing-django-userena">Installing django-userena.</a><ul>
<li><a class="reference internal" href="#automatic-installation-with-pip">Automatic installation with pip.</a></li>
<li><a class="reference internal" href="#manual-installation-with-easy-install">Manual installation with easy_install.</a></li>
<li><a class="reference internal" href="#automatic-installation-of-development-version-with-pip">Automatic installation of development version with pip.</a></li>
<li><a class="reference internal" href="#manual-installation-of-development-version-with-git">Manual installation of development version with git.</a></li>
</ul>
</li>
<li><a class="reference internal" href="#required-settings">Required settings</a><ul>
<li><a class="reference internal" href="#start-new-app">Start New App</a></li>
<li><a class="reference internal" href="#email-backend">Email Backend</a></li>
<li><a class="reference internal" href="#profiles">Profiles</a></li>
<li><a class="reference internal" href="#the-uri-s">The URI&#8217;s</a></li>
<li><a class="reference internal" href="#id2">Required settings</a></li>
<li><a class="reference internal" href="#permission-check">Permission check</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Userena Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="settings.html"
                        title="next chapter">Settings</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/installation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="settings.html" title="Settings"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Userena Introduction"
             >previous</a> |</li>
        <li><a href="index.html">django-userena 1.2.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, 2011 Bread &amp; Pepper.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b3.
    </div>
  </body>
</html>