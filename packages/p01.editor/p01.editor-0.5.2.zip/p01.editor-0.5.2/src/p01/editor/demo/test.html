<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>xEditor Demo</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="qunit.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/xeditor.css" type="text/css" media="screen" />
<script src="./jquery-1.7.1.min.js" type="text/javascript"></script>
<script type="text/javascript"
    src="http://localhost:8080/@@/z3c.xmlhttp-0.5.0.js"> </script>
<script type="text/javascript"
    src="http://localhost:8080/@@/z3c.jsonrpcproxy-0.5.0.js"> </script>
<script src="qunit.js" type="text/javascript"></script>
<script src="../js/xeditor.js" type="text/javascript"></script>
<script type="text/javascript">

var settings = {
    containerClass : 'xEditor',
    siteURL: 'http://localhost:8080',
    imgURL : 'http://localhost:8080/@@/xEditorImages',
    stylesURL: 'http://localhost:8080/@@/xEditorStyles.css',
    toolbarItems: [
        'bold', 'italic', '|',
        'unorderedlist', 'justifyLeft', 'justifyCenter', 'justifyRight',
        'justifyFull', '|',
        'paste', '|',
        'undo', 'redo', 'link', 'media', 'flash', '|',
        'htmlsource', 'removeFormatting', 'clearAll','resize',
        ]
};

(function($){
    var fooBar = function(element) {
        $.extend(this, {
            init: function() {
                this.blabla = false;
            }               
        });
        this.init();
    };
    $.fn.extend({
        fooBar: function() {
            return this.each(function(){
                new fooBar(this);
            });
        }
    });
})(jQuery);

(function($) {
    $.fn.foo = function() {
    
        var bla = false;
    
        function init(self) {
            self.blabla = false;
            $(self).attr('title', 'NEW');
        }
    
        return this.each(function(){
            init(this);
        });
    };
})(jQuery);

$(document).ready(function() {

    /* Before Editor */
    module("Before Editor");
    test("XEditor IFrame", function () {
        expect(3);
        var textareas = $('.xEditor')
        equals(textareas.length, 2, "There are 2 textareas available by class name");
        var ta1 = $('#editor')
        equals(ta1.length, 1, "First Textarea found");
        var ta2 = $('#editor2')
        equals(ta2.length, 1, "Second Textarea found");
    });

    /* Smart Editor 1 */
    module("Smart Editor 1", {
        setup: function () {
            var ta1 = $('#editor');
            this.sm1 = ta1.xEditor(settings);
        },
        teardown: function () {
            this.sm1 = null;
        }
    });

    test("name", function () {
        expect(1);
        equal($(this.sm1).attr('name'), 'editorEditorTextarea', "pass");
    });

    /* Smart Editor 2 */
    module("Smart Editor 2", {
        setup: function () {
            ta2 = $('#editor2');
            this.sm2 = ta2.xEditor(settings);
        },
        teardown: function () {
            this.sm2 = null;
        }
    });
    test("name", function () {
        expect(1);
        equal($(this.sm2).attr('name'), 'editor2EditorTextarea', "pass");
    });
});

QUnit.log = function(result, message) {
    //alert(message);
}
</script>
</head>

<body>
<h1>xEditor Demo</h1>
<form action="#">
    <div>First editor</div>
    <textarea class="xEditor" name="editor" id="editor">
        <div id="foo">
          <div class="smartEditable">
            <P><EM><STRONG>smart</STRONG></EM>Editor<STRONG> rocks !</STRONG></P>
          </div>
        </div>
        <div id="bar">
          <div class="smartEditable">Block</div>
        </div>
        <div class="smartEditable">
          <div id="foobar" class="smartEditableStyle">
            Smart editable style
          </div>
        </div>
        <div>non editable content</div>
        <br />
        <div class="smartEditable">editable content</div>
        <div>non editable content</div>
        <div class="smartEditable">editable content</div>
        <br />
    </textarea>
    <div>Second editor</div>
    <textarea class="xEditor" name="editor2" id="editor2">
        <div id="foo">
          <div class="smartEditable">
            <P><EM><STRONG>smart</STRONG></EM>Editor<STRONG> rocks !</STRONG></P>
          </div>
        </div>
        <div id="bar">
          <div class="smartEditable">Block</div>
        </div>
        <div class="smartEditable">
          <div id="foobar" class="smartEditableStyle">
            Smart editable style
          </div>
        </div>
        <div>non editable content</div>
        <br />
        <div class="smartEditable">editable content</div>
        <div>non editable content</div>
        <div class="smartEditable">editable content</div>
        <br />
    </textarea>
</form>
<div>
    <h1 id="qunit-header">QUnit example</h1>
    <h2 id="qunit-banner"></h2>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
</div>
</body>
</html>
