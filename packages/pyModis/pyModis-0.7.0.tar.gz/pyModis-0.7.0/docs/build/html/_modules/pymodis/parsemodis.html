

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pymodis.parsemodis &mdash; pyModis 0.8.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="pyModis 0.8.0 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" />
<link rel="stylesheet" href="../../_static/pymodis.css" type="text/css" />

  </head>
  <body>
<h1 class="bigger"><img src="../../_static/pyModis.png"></img> pyModis</h1>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">pyModis 0.8.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>PDF documentation</h3>
<p>
Download the documentation in <a href='pyModis.pdf'>pdf format</a>
</p><br /><br />
<p>
<script type="text/javascript" src="http://www.ohloh.net/p/486825/widgets/project_partner_badge.js"></script>
</p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for pymodis.parsemodis</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python</span>
<span class="c">#  class to parse modis data</span>
<span class="c">#</span>
<span class="c">#  (c) Copyright Luca Delucchi 2010</span>
<span class="c">#  Authors: Luca Delucchi</span>
<span class="c">#  Email: luca dot delucchi at iasma dot it</span>
<span class="c">#</span>
<span class="c">##################################################################</span>
<span class="c">#</span>
<span class="c">#  This MODIS Python class is licensed under the terms of GNU GPL 2.</span>
<span class="c">#  This program is free software; you can redistribute it and/or</span>
<span class="c">#  modify it under the terms of the GNU General Public License as</span>
<span class="c">#  published by the Free Software Foundation; either version 2 of</span>
<span class="c">#  the License, or (at your option) any later version.</span>
<span class="c">#  This program is distributed in the hope that it will be useful,</span>
<span class="c">#  but WITHOUT ANY WARRANTY; without even implied warranty of</span>
<span class="c">#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span>
<span class="c">#  See the GNU General Public License for more details.</span>
<span class="c">#</span>
<span class="c">##################################################################</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">string</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c">## lists of parameters accepted by resample MRT software</span>
<span class="c"># projections</span>
<span class="n">PROJ_LIST</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;AEA&#39;</span><span class="p">,</span><span class="s">&#39;GEO&#39;</span><span class="p">,</span> <span class="s">&#39;HAM&#39;</span><span class="p">,</span> <span class="s">&#39;IGH&#39;</span><span class="p">,</span> <span class="s">&#39;ISIN&#39;</span><span class="p">,</span> <span class="s">&#39;LA&#39;</span><span class="p">,</span> <span class="s">&#39;LCC&#39;</span><span class="p">,</span> <span class="s">&#39;MOL&#39;</span><span class="p">,</span> <span class="s">&#39;PS&#39;</span><span class="p">,</span>
             <span class="s">&#39;SIN&#39;</span><span class="p">,</span><span class="s">&#39;TM&#39;</span><span class="p">,</span> <span class="s">&#39;UTM&#39;</span><span class="p">,</span> <span class="s">&#39;MERCAT&#39;</span><span class="p">]</span>
<span class="c"># resampling</span>
<span class="n">RESAM_LIST</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;NEAREST_NEIGHBOR&#39;</span><span class="p">,</span> <span class="s">&#39;BICUBIC&#39;</span><span class="p">,</span> <span class="s">&#39;CUBIC_CONVOLUTION&#39;</span><span class="p">,</span> <span class="s">&#39;NONE&#39;</span><span class="p">]</span>
<span class="n">RESAM_LIST_SWATH</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;NN&#39;</span><span class="p">,</span> <span class="s">&#39;BI&#39;</span><span class="p">,</span> <span class="s">&#39;CC&#39;</span><span class="p">]</span>

<span class="c"># datum</span>
<span class="n">DATUM_LIST</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;NODATUM&#39;</span><span class="p">,</span> <span class="s">&#39;NAD27&#39;</span><span class="p">,</span> <span class="s">&#39;NAD83&#39;</span><span class="p">,</span> <span class="s">&#39;WGS66&#39;</span><span class="p">,</span> <span class="s">&#39;WGS72&#39;</span><span class="p">,</span> <span class="s">&#39;WGS84&#39;</span><span class="p">]</span>
<span class="n">SPHERE_LIST</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span>
               <span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">]</span>


<div class="viewcode-block" id="parseModis"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis">[docs]</a><span class="k">class</span> <span class="nc">parseModis</span><span class="p">:</span>
  <span class="sd">&quot;&quot;&quot;Class to parse MODIS xml files, it also can create the parameter</span>
<span class="sd">     configuration file for resampling MODIS DATA with the MRT software or</span>
<span class="sd">     convertmodis Module</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Initialization function :</span>

<span class="sd">       filename = the name of MODIS hdf file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">xml.etree</span> <span class="kn">import</span> <span class="n">ElementTree</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
      <span class="c"># hdf name</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">hdfname</span> <span class="o">=</span> <span class="n">filename</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> not exists&#39;</span> <span class="o">%</span> <span class="n">filename</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hdfname</span> <span class="o">+</span> <span class="s">&#39;.xml&#39;</span><span class="p">):</span>
      <span class="c"># xml hdf name</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">xmlname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hdfname</span> <span class="o">+</span> <span class="s">&#39;.xml&#39;</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> not exists&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">hdfname</span> <span class="o">+</span> <span class="s">&#39;.xml&#39;</span><span class="p">)</span>

    <span class="c"># tif name for the output file for resample MRT software</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tifname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hdfname</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;.hdf&#39;</span><span class="p">,</span> <span class="s">&#39;.tif&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xmlname</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="n">ElementTree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="c"># return the code of tile for conf file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hdfname</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hdfname</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

  <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Print the file without xml tags&quot;&quot;&quot;</span>
    <span class="n">retString</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
          <span class="n">retString</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">getiterator</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
          <span class="n">retString</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">retString</span>

<div class="viewcode-block" id="parseModis.getRoot"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.getRoot">[docs]</a>  <span class="k">def</span> <span class="nf">getRoot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the root element&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rootree</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="parseModis.retDTD"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retDTD">[docs]</a>  <span class="k">def</span> <span class="nf">retDTD</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the DTDVersion element&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getRoot</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rootree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;DTDVersion&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</div>
<div class="viewcode-block" id="parseModis.retDataCenter"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retDataCenter">[docs]</a>  <span class="k">def</span> <span class="nf">retDataCenter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the DataCenterId element&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getRoot</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rootree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;DataCenterId&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</div>
<div class="viewcode-block" id="parseModis.getGranule"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.getGranule">[docs]</a>  <span class="k">def</span> <span class="nf">getGranule</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the GranuleURMetaData element&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getRoot</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">granule</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rootree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;GranuleURMetaData&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="parseModis.retGranuleUR"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retGranuleUR">[docs]</a>  <span class="k">def</span> <span class="nf">retGranuleUR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the GranuleUR element&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;GranuleUR&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</div>
<div class="viewcode-block" id="parseModis.retDbID"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retDbID">[docs]</a>  <span class="k">def</span> <span class="nf">retDbID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the DbID element&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;DbID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</div>
<div class="viewcode-block" id="parseModis.retInsertTime"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retInsertTime">[docs]</a>  <span class="k">def</span> <span class="nf">retInsertTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the InsertTime element&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;InsertTime&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</div>
<div class="viewcode-block" id="parseModis.retLastUpdate"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retLastUpdate">[docs]</a>  <span class="k">def</span> <span class="nf">retLastUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the LastUpdate element&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;LastUpdate&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</div>
<div class="viewcode-block" id="parseModis.retCollectionMetaData"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retCollectionMetaData">[docs]</a>  <span class="k">def</span> <span class="nf">retCollectionMetaData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the CollectionMetaData element as dictionary&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="n">collect</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;CollectionMetaData&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getiterator</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
        <span class="n">collect</span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="n">collect</span>
</div>
<div class="viewcode-block" id="parseModis.retDataFiles"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retDataFiles">[docs]</a>  <span class="k">def</span> <span class="nf">retDataFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the DataFiles element as dictionary&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="n">collect</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">datafiles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;DataFiles&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">datafiles</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;DataFileContainer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getiterator</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
        <span class="n">collect</span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="n">collect</span>
</div>
<div class="viewcode-block" id="parseModis.retDataGranule"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retDataGranule">[docs]</a>  <span class="k">def</span> <span class="nf">retDataGranule</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the ECSDataGranule elements as dictionary&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="n">datagran</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;ECSDataGranule&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getiterator</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
        <span class="n">datagran</span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="n">datagran</span>
</div>
<div class="viewcode-block" id="parseModis.retPGEVersion"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retPGEVersion">[docs]</a>  <span class="k">def</span> <span class="nf">retPGEVersion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the PGEVersion element&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;PGEVersionClass&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;PGEVersion&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</div>
<div class="viewcode-block" id="parseModis.retRangeTime"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retRangeTime">[docs]</a>  <span class="k">def</span> <span class="nf">retRangeTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the RangeDateTime elements as dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="n">rangeTime</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;RangeDateTime&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getiterator</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
        <span class="n">rangeTime</span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="n">rangeTime</span>
</div>
<div class="viewcode-block" id="parseModis.retBoundary"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retBoundary">[docs]</a>  <span class="k">def</span> <span class="nf">retBoundary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the maximum extend (Bounding Box) of the MODIS file as</span>
<span class="sd">    dictionary&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">boundary</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">lat</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">lon</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">spatialContainer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;SpatialDomainContainer&#39;</span><span class="p">)</span>
    <span class="n">horizontal</span> <span class="o">=</span> <span class="n">spatialContainer</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;HorizontalSpatialDomainContainer&#39;</span><span class="p">)</span>
    <span class="n">boundary</span> <span class="o">=</span> <span class="n">horizontal</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;GPolygon&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;Boundary&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">boundary</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;Point&#39;</span><span class="p">):</span>
      <span class="n">la</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;PointLongitude&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
      <span class="n">lo</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;PointLatitude&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
      <span class="n">lon</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">la</span><span class="p">)</span>
      <span class="n">lat</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lo</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;lat&#39;</span><span class="p">:</span> <span class="n">la</span><span class="p">,</span> <span class="s">&#39;lon&#39;</span><span class="p">:</span> <span class="n">lo</span><span class="p">})</span>
    <span class="n">extent</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;min_lat&#39;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">lat</span><span class="p">),</span> <span class="s">&#39;max_lat&#39;</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">lat</span><span class="p">),</span> <span class="s">&#39;min_lon&#39;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">lon</span><span class="p">),</span>
              <span class="s">&#39;max_lon&#39;</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">lon</span><span class="p">)}</span>
    <span class="k">return</span> <span class="n">extent</span>
</div>
<div class="viewcode-block" id="parseModis.retMeasure"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retMeasure">[docs]</a>  <span class="k">def</span> <span class="nf">retMeasure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return statistics of QA as dictionary&quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="n">mes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;MeasuredParameter&#39;</span><span class="p">)</span>
    <span class="n">mespc</span> <span class="o">=</span> <span class="n">mes</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;MeasuredParameterContainer&#39;</span><span class="p">)</span>
    <span class="n">value</span><span class="p">[</span><span class="s">&#39;ParameterName&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mespc</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;ParameterName&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="n">meStat</span> <span class="o">=</span> <span class="n">mespc</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;QAStats&#39;</span><span class="p">)</span>
    <span class="n">qastat</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">meStat</span><span class="o">.</span><span class="n">getiterator</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="s">&#39;QAStats&#39;</span><span class="p">:</span>
        <span class="n">qastat</span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">text</span>
    <span class="n">value</span><span class="p">[</span><span class="s">&#39;QAStats&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qastat</span>
    <span class="n">meFlag</span> <span class="o">=</span> <span class="n">mespc</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;QAFlags&#39;</span><span class="p">)</span>
    <span class="n">flagstat</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">meFlag</span><span class="o">.</span><span class="n">getiterator</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="s">&#39;QAFlags&#39;</span><span class="p">:</span>
        <span class="n">flagstat</span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">text</span>
    <span class="n">value</span><span class="p">[</span><span class="s">&#39;QAFlags&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">flagstat</span>
    <span class="k">return</span> <span class="n">value</span>
</div>
<div class="viewcode-block" id="parseModis.retPlatform"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retPlatform">[docs]</a>  <span class="k">def</span> <span class="nf">retPlatform</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the platform values as dictionary.&quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="n">plat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;Platform&#39;</span><span class="p">)</span>
    <span class="n">value</span><span class="p">[</span><span class="s">&#39;PlatformShortName&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">plat</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;PlatformShortName&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="n">instr</span> <span class="o">=</span> <span class="n">plat</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;Instrument&#39;</span><span class="p">)</span>
    <span class="n">value</span><span class="p">[</span><span class="s">&#39;InstrumentShortName&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">instr</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;InstrumentShortName&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="n">sensor</span> <span class="o">=</span> <span class="n">instr</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;Sensor&#39;</span><span class="p">)</span>
    <span class="n">value</span><span class="p">[</span><span class="s">&#39;SensorShortName&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sensor</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;SensorShortName&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="n">value</span>
</div>
<div class="viewcode-block" id="parseModis.retPSA"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retPSA">[docs]</a>  <span class="k">def</span> <span class="nf">retPSA</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the PSA values as dictionary, the PSAName is the key and</span>
<span class="sd">       and PSAValue is the value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="n">psas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;PSAs&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">psas</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;PSA&#39;</span><span class="p">):</span>
      <span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;PSAName&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;PSAValue&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="n">value</span>
</div>
<div class="viewcode-block" id="parseModis.retInputGranule"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retInputGranule">[docs]</a>  <span class="k">def</span> <span class="nf">retInputGranule</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the input files (InputGranule) used to process the considered</span>
<span class="sd">    file&quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;InputGranule&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getiterator</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="s">&#39;InputGranule&#39;</span><span class="p">:</span>
        <span class="n">value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</div>
<div class="viewcode-block" id="parseModis.retBrowseProduct"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.retBrowseProduct">[docs]</a>  <span class="k">def</span> <span class="nf">retBrowseProduct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the BrowseProduct element&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">getGranule</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">granule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;BrowseProduct&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;BrowseGranuleId&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">return</span> <span class="n">value</span>
</div>
<div class="viewcode-block" id="parseModis.confResample"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.confResample">[docs]</a>  <span class="k">def</span> <span class="nf">confResample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spectral</span><span class="p">,</span> <span class="n">res</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">datum</span><span class="o">=</span><span class="s">&#39;WGS84&#39;</span><span class="p">,</span>
                  <span class="n">resample</span><span class="o">=</span><span class="s">&#39;NEAREST_NEIGHBOR&#39;</span><span class="p">,</span> <span class="n">projtype</span><span class="o">=</span><span class="s">&#39;GEO&#39;</span><span class="p">,</span>  <span class="n">utm</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                  <span class="n">projpar</span><span class="o">=</span><span class="s">&#39;( 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 )&#39;</span><span class="p">,</span>
                  <span class="n">bound</span><span class="o">=</span><span class="bp">None</span>
                  <span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create the parameter file to use with resample MRT software to create</span>
<span class="sd">    tif file</span>

<span class="sd">        spectral = the spectral subset to be used, look the product table to</span>
<span class="sd">        understand the layer that you want use. For example:</span>

<span class="sd">            - NDVI ( 1 1 1 0 0 0 0 0 0 0 0 0) copy only layer NDVI, EVI</span>
<span class="sd">              and QA VI the other layers are not used</span>
<span class="sd">            - LST ( 1 1 0 0 1 1 0 0 0 0 0 0 ) copy only layer daily and</span>
<span class="sd">              nightly temperature and QA</span>

<span class="sd">        res = the resolution for the output file, it must be set in the map</span>
<span class="sd">        unit of output projection system. The software will use the</span>
<span class="sd">        original resolution of input file if res it isn&#39;t set</span>

<span class="sd">        output = the output name, if it doesn&#39;t set will use the prefix name</span>
<span class="sd">        of input hdf file</span>

<span class="sd">        utm = the UTM zone if projection system is UTM</span>

<span class="sd">        resample = the type of resampling, the valid values are:</span>
<span class="sd">            - NN (nearest neighbor)</span>
<span class="sd">            - BI (bilinear)</span>
<span class="sd">            - CC (cubic convolution)</span>

<span class="sd">        projtype = the output projection system, the valid values are:</span>
<span class="sd">            - AEA (Albers Equal Area)</span>
<span class="sd">            - ER (Equirectangular)</span>
<span class="sd">            - GEO (Geographic Latitude/Longitude)</span>
<span class="sd">            - HAM (Hammer)</span>
<span class="sd">            - ISIN (Integerized Sinusoidal)</span>
<span class="sd">            - IGH (Interrupted Goode Homolosine)</span>
<span class="sd">            - LA (Lambert Azimuthal)</span>
<span class="sd">            - LCC (LambertConformal Conic)</span>
<span class="sd">            - MERCAT (Mercator)</span>
<span class="sd">            - MOL (Mollweide)</span>
<span class="sd">            - PS (Polar Stereographic)</span>
<span class="sd">            - SIN (Sinusoidal)</span>
<span class="sd">            - UTM (Universal TransverseMercator)</span>

<span class="sd">        datum = the datum to use, the valid values are:</span>
<span class="sd">            - NAD27</span>
<span class="sd">            - NAD83</span>
<span class="sd">            - WGS66</span>
<span class="sd">            - WGS76</span>
<span class="sd">            - WGS84</span>
<span class="sd">            - NODATUM</span>

<span class="sd">        projpar = a list of projection parameters, for more info check the</span>
<span class="sd">        Appendix C of MODIS reprojection tool user manual</span>
<span class="sd">        https://lpdaac.usgs.gov/content/download/4831/22895/file/mrt41_usermanual_032811.pdf</span>

<span class="sd">        bound = dictionary with the following keys:</span>
<span class="sd">            - max_lat</span>
<span class="sd">            - max_lon</span>
<span class="sd">            - min_lat</span>
<span class="sd">            - min_lon</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="c">#check if spectral it&#39;s write with correct construct ( value )</span>
    <span class="k">if</span> <span class="n">string</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">spectral</span><span class="p">,</span> <span class="s">&#39;(&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">or</span>  <span class="n">string</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">spectral</span><span class="p">,</span> <span class="s">&#39;)&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;ERROR: The spectral string should be similar to: ( 1 0 )&#39;</span><span class="p">)</span>
    <span class="c"># output name</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="p">:</span>
      <span class="n">fileout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tifname</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">fileout</span> <span class="o">=</span> <span class="n">output</span>
    <span class="c"># the name of the output parameters files for resample MRT software</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">_mrt_resample.conf&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
    <span class="c"># if the file already exists it remove it </span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
      <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="c"># open the file</span>
    <span class="n">conFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;INPUT_FILENAME = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">hdfname</span><span class="p">)</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;SPECTRAL_SUBSET = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">spectral</span><span class="p">)</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;SPATIAL_SUBSET_TYPE = INPUT_LAT_LONG</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">bound</span><span class="p">:</span>
      <span class="c"># return the boundary from the input xml file</span>
      <span class="n">bound</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retBoundary</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">if</span> <span class="s">&#39;max_lat&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bound</span> <span class="ow">or</span> <span class="s">&#39;min_lat&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bound</span>  <span class="ow">or</span> \
      <span class="s">&#39;min_lon&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bound</span> <span class="ow">or</span> <span class="s">&#39;max_lon&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bound</span><span class="p">:</span>
          <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;bound variable is a dictionary with the following &#39;</span> \
                        <span class="s">&#39;keys: max_lat, min_lat, min_lon, max_lon&#39;</span><span class="p">)</span>
    <span class="c"># Order:  UL: N W  - LR: S E</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;SPATIAL_SUBSET_UL_CORNER = ( </span><span class="si">%f</span><span class="s"> </span><span class="si">%f</span><span class="s"> )</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bound</span><span class="p">[</span><span class="s">&#39;max_lat&#39;</span><span class="p">],</span>
                                                              <span class="n">bound</span><span class="p">[</span><span class="s">&#39;min_lon&#39;</span><span class="p">]))</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;SPATIAL_SUBSET_LR_CORNER = ( </span><span class="si">%f</span><span class="s"> </span><span class="si">%f</span><span class="s"> )</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bound</span><span class="p">[</span><span class="s">&#39;min_lat&#39;</span><span class="p">],</span>
                                                              <span class="n">bound</span><span class="p">[</span><span class="s">&#39;max_lon&#39;</span><span class="p">]))</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_FILENAME = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">fileout</span><span class="p">)</span>
    <span class="c"># if resample is in resam_list set the parameter otherwise return an error</span>
    <span class="k">if</span> <span class="n">resample</span> <span class="ow">in</span> <span class="n">RESAM_LIST</span><span class="p">:</span>
      <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;RESAMPLING_TYPE = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">resample</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;The resampling type </span><span class="si">%s</span><span class="s"> is not supportet.</span><span class="se">\n</span><span class="s">&#39;</span> \
                   <span class="s">&#39;The resampling type supported are </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">resample</span><span class="p">,</span>
                                                             <span class="n">RESAM_LIST</span><span class="p">))</span>
    <span class="c"># if projtype is in proj_list set the parameter otherwise return an error</span>
    <span class="k">if</span> <span class="n">projtype</span> <span class="ow">in</span> <span class="n">PROJ_LIST</span><span class="p">:</span>
      <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_PROJECTION_TYPE = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">projtype</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;The projection type </span><span class="si">%s</span><span class="s"> is not supported.</span><span class="se">\n</span><span class="s">&#39;</span> \
                   <span class="s">&#39;The projections supported are </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">projtype</span><span class="p">,</span> <span class="n">PROJ_LIST</span><span class="p">))</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_PROJECTION_PARAMETERS = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">projpar</span><span class="p">)</span>
    <span class="c"># if datum is in datum_list set the parameter otherwise return an error</span>
    <span class="k">if</span> <span class="n">datum</span> <span class="ow">in</span> <span class="n">DATUM_LIST</span><span class="p">:</span>
      <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;DATUM = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">datum</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;The datum </span><span class="si">%s</span><span class="s"> is not supported.</span><span class="se">\n</span><span class="s">&#39;</span> \
                   <span class="s">&#39;The datum supported are </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">datum</span><span class="p">,</span> <span class="n">DATUM_LIST</span><span class="p">))</span>
    <span class="c"># if utm is not None write the UTM_ZONE parameter in the file</span>
    <span class="k">if</span> <span class="n">utm</span><span class="p">:</span>
      <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;UTM_ZONE = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">utm</span><span class="p">)</span>
    <span class="c"># if res is not None write the OUTPUT_PIXEL_SIZE parameter in the file</span>
    <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
      <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_PIXEL_SIZE = </span><span class="si">%i</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">res</span><span class="p">)</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">filename</span>
</div>
<div class="viewcode-block" id="parseModis.confResample_swath"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModis.confResample_swath">[docs]</a>  <span class="k">def</span> <span class="nf">confResample_swath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sds</span><span class="p">,</span> <span class="n">geoloc</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> 
                  <span class="n">sphere</span><span class="o">=</span><span class="s">&#39;8&#39;</span><span class="p">,</span> <span class="n">resample</span><span class="o">=</span><span class="s">&#39;NN&#39;</span><span class="p">,</span> <span class="n">projtype</span><span class="o">=</span><span class="s">&#39;GEO&#39;</span><span class="p">,</span>  <span class="n">utm</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                  <span class="n">projpar</span><span class="o">=</span><span class="s">&#39;0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0&#39;</span><span class="p">,</span>
                  <span class="n">bound</span><span class="o">=</span><span class="bp">None</span>
                  <span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create the parameter file to use with resample MRT software to create</span>
<span class="sd">       tif file</span>

<span class="sd">        sds = Name of band/s (Science Data Set) to resample</span>

<span class="sd">        geoloc = Name geolocation file (example MOD3, MYD3)</span>

<span class="sd">        res = the resolution for the output file, it must be set in the map</span>
<span class="sd">        unit of output projection system. The software will use the</span>
<span class="sd">        original resolution of input file if res it isn&#39;t set</span>

<span class="sd">        output = the output name, if it doesn&#39;t set will use the prefix name</span>
<span class="sd">        of input hdf file</span>

<span class="sd">        sphere = Output sphere number. Valid options are:</span>
<span class="sd">            - 0=Clarke 1866</span>
<span class="sd">            - 1=Clarke 1880</span>
<span class="sd">            - 2=Bessel</span>
<span class="sd">            - 3=International 1967</span>
<span class="sd">            - 4=International 1909</span>
<span class="sd">            - 5=WGS 72</span>
<span class="sd">            - 6=Everest</span>
<span class="sd">            - 7=WGS 66</span>
<span class="sd">            - 8=GRS1980/WGS 84</span>
<span class="sd">            - 9=Airy</span>
<span class="sd">            - 10=Modified Everest</span>
<span class="sd">            - 11=Modified Airy</span>
<span class="sd">            - 12=Walbeck</span>
<span class="sd">            - 13=Southeast Asia</span>
<span class="sd">            - 14=Australian National</span>
<span class="sd">            - 15=Krassovsky</span>
<span class="sd">            - 16=Hough</span>
<span class="sd">            - 17=Mercury1960</span>
<span class="sd">            - 18=Modified Mercury1968</span>
<span class="sd">            - 19=Sphere 19 (Radius 6370997)</span>
<span class="sd">            - 20=MODIS Sphere (Radius 6371007.181)</span>

<span class="sd">        resample = the type of resampling, the valid values are:</span>
<span class="sd">            - NN (nearest neighbor)</span>
<span class="sd">            - BI (bilinear)</span>
<span class="sd">            - CC (cubic convolution)</span>

<span class="sd">        projtype = the output projection system, the valid values are:</span>
<span class="sd">            - AEA (Albers Equal Area)</span>
<span class="sd">            - ER (Equirectangular)</span>
<span class="sd">            - GEO (Geographic Latitude/Longitude)</span>
<span class="sd">            - HAM (Hammer)</span>
<span class="sd">            - ISIN (Integerized Sinusoidal)</span>
<span class="sd">            - IGH (Interrupted Goode Homolosine)</span>
<span class="sd">            - LA (Lambert Azimuthal)</span>
<span class="sd">            - LCC (LambertConformal Conic)</span>
<span class="sd">            - MERCAT (Mercator)</span>
<span class="sd">            - MOL (Mollweide)</span>
<span class="sd">            - PS (Polar Stereographic),</span>
<span class="sd">            - SIN ()Sinusoidal)</span>
<span class="sd">            - UTM (Universal TransverseMercator)</span>

<span class="sd">        utm = the UTM zone if projection system is UTM</span>

<span class="sd">        projpar = a list of projection parameters, for more info check</span>
<span class="sd">        the Appendix C of MODIS reprojection tool user manual</span>
<span class="sd">        https://lpdaac.usgs.gov/content/download/4831/22895/file/mrt41_usermanual_032811.pdf</span>

<span class="sd">        bound = dictionary with the following keys:</span>
<span class="sd">            - max_lat</span>
<span class="sd">            - max_lon</span>
<span class="sd">            - min_lat</span>
<span class="sd">            - min_lon</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="c"># output name</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="p">:</span>
      <span class="n">fileout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tifname</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">fileout</span> <span class="o">=</span> <span class="n">output</span>
    <span class="c"># the name of the output parameters files for resample MRT software</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">_mrt_resample.prm&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
    <span class="c"># if the file already exists it remove it </span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
      <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="c"># open the file</span>
    <span class="n">conFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;INPUT_FILENAME = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">hdfname</span><span class="p">)</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;GEOLOCATION_FILENAME = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">geoloc</span><span class="p">)</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;INPUT_SDS_NAME = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">sds</span><span class="p">)</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_SPATIAL_SUBSET_TYPE = LAT_LONG</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">bound</span><span class="p">:</span>
      <span class="c"># return the boundary from the input xml file</span>
      <span class="n">bound</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retBoundary</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">if</span> <span class="s">&#39;max_lat&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bound</span> <span class="ow">or</span> <span class="s">&#39;min_lat&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bound</span>  <span class="ow">or</span> \
      <span class="s">&#39;min_lon&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bound</span> <span class="ow">or</span> <span class="s">&#39;max_lon&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bound</span><span class="p">:</span>
          <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;bound variable is a dictionary with the following &#39;</span> \
                        <span class="s">&#39;keys: max_lat, min_lat, min_lon, max_lon&#39;</span><span class="p">)</span>
    <span class="c"># Order:  UL: N W  - LR: S E</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_SPACE_UPPER_LEFT_CORNER (LONG LAT) = </span><span class="si">%f</span><span class="s"> </span><span class="si">%f</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bound</span><span class="p">[</span><span class="s">&#39;max_lat&#39;</span><span class="p">],</span>
                                                              <span class="n">bound</span><span class="p">[</span><span class="s">&#39;min_lon&#39;</span><span class="p">]))</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_SPACE_LOWER_RIGHT_CORNER (LONG LAT) = </span><span class="si">%f</span><span class="s"> </span><span class="si">%f</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bound</span><span class="p">[</span><span class="s">&#39;min_lat&#39;</span><span class="p">],</span>
                                                              <span class="n">bound</span><span class="p">[</span><span class="s">&#39;max_lon&#39;</span><span class="p">]))</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_FILENAME = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">fileout</span><span class="p">)</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_FILE_FORMAT = GEOTIFF_FMT</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="c"># if resample is in resam_list set the parameter otherwise return an error</span>
    <span class="k">if</span> <span class="n">resample</span> <span class="ow">in</span> <span class="n">RESAM_LIST_SWATH</span><span class="p">:</span>
      <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;KERNEL_TYPE (CC/BI/NN) = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">resample</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;The resampling type </span><span class="si">%s</span><span class="s"> is not supportet.</span><span class="se">\n</span><span class="s">&#39;</span> \
                   <span class="s">&#39;The resampling type supported are </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">resample</span><span class="p">,</span>
                                                             <span class="n">RESAM_LIST_SWATH</span><span class="p">))</span>
    <span class="c"># if projtype is in proj_list set the parameter otherwise return an error</span>
    <span class="k">if</span> <span class="n">projtype</span> <span class="ow">in</span> <span class="n">PROJ_LIST</span><span class="p">:</span>
      <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_PROJECTION_NUMBER = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">projtype</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;The projection type </span><span class="si">%s</span><span class="s"> is not supported.</span><span class="se">\n</span><span class="s">&#39;</span> \
                   <span class="s">&#39;The projections supported are </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">projtype</span><span class="p">,</span> <span class="n">PROJ_LIST</span><span class="p">))</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_PROJECTION_PARAMETER = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">projpar</span><span class="p">)</span>
    <span class="c"># if sphere is in sphere_list set the parameter otherwise return an error</span>
    <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">sphere</span><span class="p">)</span> <span class="ow">in</span> <span class="n">SPHERE_LIST</span><span class="p">:</span>
      <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_PROJECTION_SPHERE = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">sphere</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;The sphere </span><span class="si">%s</span><span class="s"> is not supported.</span><span class="se">\n</span><span class="s">&#39;</span> \
                   <span class="s">&#39;The spheres supported are </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sphere</span><span class="p">,</span> <span class="n">SPHERE_LIST</span><span class="p">))</span>
    <span class="c"># if utm is not None write the UTM_ZONE parameter in the file</span>
    <span class="k">if</span> <span class="n">utm</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">utm</span> <span class="o">&lt;</span> <span class="s">&#39;-60&#39;</span> <span class="ow">or</span> <span class="n">utm</span> <span class="o">&gt;</span> <span class="s">&#39;60&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;The valid UTM zone are -60 to 60&#39;</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_PROJECTION_ZONE = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">utm</span><span class="p">)</span>
    <span class="c"># if res is not None write the OUTPUT_PIXEL_SIZE parameter in the file</span>
    <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
      <span class="n">conFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;OUTPUT_PIXEL_SIZE = </span><span class="si">%f</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">res</span><span class="p">)</span>
    <span class="n">conFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">filename</span>

</div></div>
<div class="viewcode-block" id="parseModisMulti"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti">[docs]</a><span class="k">class</span> <span class="nc">parseModisMulti</span><span class="p">:</span>
  <span class="sd">&quot;&quot;&quot;A class to obtain some variables for the xml file of several MODIS tiles.</span>
<span class="sd">     It can also create the xml file</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hdflist</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;hdflist = python list containing the hdf files&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">xml.etree</span> <span class="kn">import</span> <span class="n">ElementTree</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span> <span class="o">=</span> <span class="n">ElementTree</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hdflist</span> <span class="o">=</span> <span class="n">hdflist</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nfiles</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c"># for each hdf files create a parseModis object</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">hdflist</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parseModis</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">nfiles</span> <span class="o">+=</span> <span class="mi">1</span>


  <span class="k">def</span> <span class="nf">_most_common</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lst</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the most common value of a list&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">lst</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="n">lst</span><span class="o">.</span><span class="n">count</span><span class="p">)</span>


  <span class="k">def</span> <span class="nf">_checkval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Internal function to return values from list</span>

<span class="sd">    vals = list of values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">vals</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">nfiles</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">[</span><span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">outvals</span> <span class="o">=</span> <span class="p">[]</span>
      <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">outvals</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
          <span class="n">outvals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">outvals</span>

  <span class="k">def</span> <span class="nf">_checkvaldict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Internal function to return values from dictionary</span>

<span class="sd">    vals = dictionary of values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">outvals</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
      <span class="n">valtemp</span> <span class="o">=</span> <span class="p">[]</span>
      <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
        <span class="n">valtemp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
      <span class="k">if</span> <span class="n">valtemp</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">valtemp</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">nfiles</span><span class="p">:</span>
        <span class="n">outvals</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">valtemp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">valtemp</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">nfiles</span><span class="p">:</span>
        <span class="n">outvals</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_most_common</span><span class="p">(</span><span class="n">valtemp</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;Something wrong reading XML files&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">outvals</span>

  <span class="k">def</span> <span class="nf">_minval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Internal function to return the minimum value</span>

<span class="sd">    vals = list of values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">outval</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)):</span>
      <span class="k">if</span> <span class="n">outval</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
        <span class="n">outval</span> <span class="o">=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">outval</span>

  <span class="k">def</span> <span class="nf">_maxval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Internal function to return the maximum value</span>

<span class="sd">    vals = list of values   </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">outval</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)):</span>
      <span class="k">if</span> <span class="n">outval</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">:</span>
        <span class="n">outval</span> <span class="o">=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">outval</span>

  <span class="k">def</span> <span class="nf">_cicle_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Internal function to add values from a dictionary</span>

<span class="sd">    obj = element to add values</span>

<span class="sd">    values = dictionary containing keys and values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
      <span class="n">elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
      <span class="n">elem</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">v</span>

  <span class="k">def</span> <span class="nf">_addPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Internal function to add a point in boundary xml tag</span>

<span class="sd">    obj = element to add point</span>

<span class="sd">    lon = longitude of point</span>

<span class="sd">    lat = latitude of point</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&#39;Point&#39;</span><span class="p">)</span>
    <span class="n">ptlon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">pt</span><span class="p">,</span> <span class="s">&#39;PointLongitude&#39;</span><span class="p">)</span>
    <span class="n">ptlon</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">boundary</span><span class="p">[</span><span class="n">lon</span><span class="p">])</span>
    <span class="n">ptlat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">pt</span><span class="p">,</span> <span class="s">&#39;PointLatitude&#39;</span><span class="p">)</span>
    <span class="n">ptlat</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">boundary</span><span class="p">[</span><span class="n">lat</span><span class="p">])</span>

<div class="viewcode-block" id="parseModisMulti.valDTD"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.valDTD">[docs]</a>  <span class="k">def</span> <span class="nf">valDTD</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to add DTDVersion</span>

<span class="sd">    obj = element to add DTDVersion</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">:</span>
      <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retDTD</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkval</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
      <span class="n">dtd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&#39;DTDVersion&#39;</span><span class="p">)</span>
      <span class="n">dtd</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">i</span>
</div>
<div class="viewcode-block" id="parseModisMulti.valDataCenter"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.valDataCenter">[docs]</a>  <span class="k">def</span> <span class="nf">valDataCenter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to add DataCenter</span>

<span class="sd">    obj = element to add DataCenter</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">:</span>
      <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retDataCenter</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkval</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
      <span class="n">dci</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&#39;DataCenterId&#39;</span><span class="p">)</span>
      <span class="n">dci</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">i</span>
</div>
<div class="viewcode-block" id="parseModisMulti.valGranuleUR"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.valGranuleUR">[docs]</a>  <span class="k">def</span> <span class="nf">valGranuleUR</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to add GranuleUR</span>

<span class="sd">    obj = element to add GranuleUR</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">:</span>
      <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retGranuleUR</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkval</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
      <span class="n">gur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&#39;GranuleUR&#39;</span><span class="p">)</span>
      <span class="n">gur</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">i</span>
</div>
<div class="viewcode-block" id="parseModisMulti.valDbID"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.valDbID">[docs]</a>  <span class="k">def</span> <span class="nf">valDbID</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to add DbID</span>

<span class="sd">    obj = element to add DbID</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">:</span>
      <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retDbID</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkval</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
      <span class="n">dbid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&#39;DbID&#39;</span><span class="p">)</span>
      <span class="n">dbid</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">i</span>
</div>
<div class="viewcode-block" id="parseModisMulti.valInsTime"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.valInsTime">[docs]</a>  <span class="k">def</span> <span class="nf">valInsTime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to add the minimum of InsertTime</span>

<span class="sd">    obj = element to add InsertTime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">:</span>
      <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retInsertTime</span><span class="p">())</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minval</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="parseModisMulti.valCollectionMetaData"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.valCollectionMetaData">[docs]</a>  <span class="k">def</span> <span class="nf">valCollectionMetaData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to add CollectionMetaData</span>

<span class="sd">    obj = element to add CollectionMetaData</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">:</span>
      <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retCollectionMetaData</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cicle_values</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkvaldict</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="parseModisMulti.valDataFiles"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.valDataFiles">[docs]</a>  <span class="k">def</span> <span class="nf">valDataFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to add DataFileContainer</span>

<span class="sd">    obj = element to add DataFileContainer</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">:</span>
      <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retDataFiles</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
      <span class="n">dfc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&#39;DataFileContainer&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_cicle_values</span><span class="p">(</span><span class="n">dfc</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="parseModisMulti.valPGEVersion"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.valPGEVersion">[docs]</a>  <span class="k">def</span> <span class="nf">valPGEVersion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to add PGEVersion</span>
<span class="sd">    </span>
<span class="sd">    obj = element to add PGEVersion</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">:</span>
      <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retPGEVersion</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkval</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
      <span class="n">pge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&#39;PGEVersion&#39;</span><span class="p">)</span>
      <span class="n">pge</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">i</span>
</div>
<div class="viewcode-block" id="parseModisMulti.valRangeTime"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.valRangeTime">[docs]</a>  <span class="k">def</span> <span class="nf">valRangeTime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to add RangeDateTime</span>

<span class="sd">    obj = element to add RangeDateTime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">:</span>
      <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retRangeTime</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cicle_values</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkvaldict</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="parseModisMulti.valBound"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.valBound">[docs]</a>  <span class="k">def</span> <span class="nf">valBound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function return the Bounding Box of mosaic</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">boundary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">retBoundary</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">)):</span>
      <span class="n">bound</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">retBoundary</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">bound</span><span class="p">[</span><span class="s">&#39;min_lat&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">boundary</span><span class="p">[</span><span class="s">&#39;min_lat&#39;</span><span class="p">]:</span>
        <span class="n">boundary</span><span class="p">[</span><span class="s">&#39;min_lat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bound</span><span class="p">[</span><span class="s">&#39;min_lat&#39;</span><span class="p">]</span>
      <span class="k">if</span> <span class="n">bound</span><span class="p">[</span><span class="s">&#39;min_lon&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">boundary</span><span class="p">[</span><span class="s">&#39;min_lon&#39;</span><span class="p">]:</span>
        <span class="n">boundary</span><span class="p">[</span><span class="s">&#39;min_lon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bound</span><span class="p">[</span><span class="s">&#39;min_lon&#39;</span><span class="p">]</span>
      <span class="k">if</span> <span class="n">bound</span><span class="p">[</span><span class="s">&#39;max_lat&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">boundary</span><span class="p">[</span><span class="s">&#39;max_lat&#39;</span><span class="p">]:</span>
        <span class="n">boundary</span><span class="p">[</span><span class="s">&#39;max_lat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bound</span><span class="p">[</span><span class="s">&#39;max_lat&#39;</span><span class="p">]</span>
      <span class="k">if</span> <span class="n">bound</span><span class="p">[</span><span class="s">&#39;max_lon&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">boundary</span><span class="p">[</span><span class="s">&#39;max_lon&#39;</span><span class="p">]:</span>
        <span class="n">boundary</span><span class="p">[</span><span class="s">&#39;max_lon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bound</span><span class="p">[</span><span class="s">&#39;max_lon&#39;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">boundary</span> <span class="o">=</span> <span class="n">boundary</span>
</div>
<div class="viewcode-block" id="parseModisMulti.valMeasuredParameter"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.valMeasuredParameter">[docs]</a>  <span class="k">def</span> <span class="nf">valMeasuredParameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to add ParameterName</span>

<span class="sd">    obj = element to add ParameterName</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">valuesQAStats</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">valuesQAFlags</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">valuesParameter</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">:</span>
      <span class="n">valuesQAStats</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retMeasure</span><span class="p">()[</span><span class="s">&#39;QAStats&#39;</span><span class="p">])</span>
      <span class="n">valuesQAFlags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retMeasure</span><span class="p">()[</span><span class="s">&#39;QAFlags&#39;</span><span class="p">])</span>
      <span class="n">valuesParameter</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retMeasure</span><span class="p">()[</span><span class="s">&#39;ParameterName&#39;</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkval</span><span class="p">(</span><span class="n">valuesParameter</span><span class="p">):</span>
      <span class="n">pn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&#39;ParameterName&#39;</span><span class="p">)</span>
      <span class="n">pn</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">i</span>
</div>
<div class="viewcode-block" id="parseModisMulti.valInputPointer"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.valInputPointer">[docs]</a>  <span class="k">def</span> <span class="nf">valInputPointer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to add InputPointer</span>

<span class="sd">    obj = element to add InputPointer</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">retInputGranule</span><span class="p">():</span>
        <span class="n">ip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&#39;InputPointer&#39;</span><span class="p">)</span>
        <span class="n">ip</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">v</span>
</div>
<div class="viewcode-block" id="parseModisMulti.valPlatform"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.valPlatform">[docs]</a>  <span class="k">def</span> <span class="nf">valPlatform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to add Platform elements</span>

<span class="sd">    obj = element to add Platform elements</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">valuesSName</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">valuesInstr</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">valuesSensor</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parModis</span><span class="p">:</span>
        <span class="n">valuesSName</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retPlatform</span><span class="p">()[</span><span class="s">&#39;PlatformShortName&#39;</span><span class="p">])</span>
        <span class="n">valuesInstr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retPlatform</span><span class="p">()[</span><span class="s">&#39;InstrumentShortName&#39;</span><span class="p">])</span>
        <span class="n">valuesSensor</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">retPlatform</span><span class="p">()[</span><span class="s">&#39;SensorShortName&#39;</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkval</span><span class="p">(</span><span class="n">valuesSName</span><span class="p">):</span>
      <span class="n">pn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&#39;PlatformShortName&#39;</span><span class="p">)</span>
      <span class="n">pn</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">i</span>

    <span class="n">valInstr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkval</span><span class="p">(</span><span class="n">valuesInstr</span><span class="p">)</span>
    <span class="n">valSens</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkval</span><span class="p">(</span><span class="n">valuesSensor</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">valInstr</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">valSens</span><span class="p">):</span>
      <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;Something wrong reading XML files&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">valInstr</span><span class="p">)):</span>
        <span class="n">ins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&#39;Instrument&#39;</span><span class="p">)</span>
        <span class="n">pn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">ins</span><span class="p">,</span> <span class="s">&#39;InstrumentShortName&#39;</span><span class="p">)</span>
        <span class="n">pn</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">valInstr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">sens</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">ins</span><span class="p">,</span> <span class="s">&#39;Sensor&#39;</span><span class="p">)</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sens</span><span class="p">,</span> <span class="s">&#39;SensorShortName&#39;</span><span class="p">)</span>
        <span class="n">ps</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">valSens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="parseModisMulti.writexml"><a class="viewcode-back" href="../../pymodis/pymodis.html#pymodis.parsemodis.parseModisMulti.writexml">[docs]</a>  <span class="k">def</span> <span class="nf">writexml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outputname</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Write a xml file for a mosaic</span>

<span class="sd">    outputname = the name of xml file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># the root element</span>
    <span class="n">granule</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s">&#39;GranuleMetaDataFile&#39;</span><span class="p">)</span>
    <span class="c"># add DTDVersion</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valDTD</span><span class="p">(</span><span class="n">granule</span><span class="p">)</span>
    <span class="c"># add DataCenterId</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valDataCenter</span><span class="p">(</span><span class="n">granule</span><span class="p">)</span>
    <span class="c"># add GranuleURMetaData</span>
    <span class="n">gurmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">granule</span><span class="p">,</span> <span class="s">&#39;GranuleURMetaData&#39;</span><span class="p">)</span>
    <span class="c"># add GranuleUR</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valGranuleUR</span><span class="p">(</span><span class="n">gurmd</span><span class="p">)</span>
    <span class="c"># add dbID</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valDbID</span><span class="p">(</span><span class="n">gurmd</span><span class="p">)</span>

    <span class="c"># TODO ADD InsertTime LastUpdate</span>

    <span class="c"># add CollectionMetaData</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">gurmd</span><span class="p">,</span> <span class="s">&#39;CollectionMetaData&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valCollectionMetaData</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="c"># add DataFiles</span>
    <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">gurmd</span><span class="p">,</span> <span class="s">&#39;DataFiles&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valDataFiles</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

    <span class="c"># TODO ADD ECSDataGranule</span>

    <span class="c"># add PGEVersionClass</span>
    <span class="n">pgevc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">gurmd</span><span class="p">,</span> <span class="s">&#39;PGEVersionClass&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valPGEVersion</span><span class="p">(</span><span class="n">pgevc</span><span class="p">)</span>
    <span class="c"># add RangeDateTime</span>
    <span class="n">rdt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">gurmd</span><span class="p">,</span> <span class="s">&#39;RangeDateTime&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valRangeTime</span><span class="p">(</span><span class="n">rdt</span><span class="p">)</span>
    <span class="c"># SpatialDomainContainer</span>
    <span class="n">sdc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">gurmd</span><span class="p">,</span> <span class="s">&#39;SpatialDomainContainer&#39;</span><span class="p">)</span>
    <span class="n">hsdc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sdc</span><span class="p">,</span> <span class="s">&#39;HorizontalSpatialDomainContainer&#39;</span><span class="p">)</span>
    <span class="n">gp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">hsdc</span><span class="p">,</span> <span class="s">&#39;GPolygon&#39;</span><span class="p">)</span>
    <span class="n">bound</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">gp</span><span class="p">,</span> <span class="s">&#39;Boundary&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valBound</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_addPoint</span><span class="p">(</span><span class="n">bound</span><span class="p">,</span> <span class="s">&#39;min_lon&#39;</span><span class="p">,</span> <span class="s">&#39;max_lat&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_addPoint</span><span class="p">(</span><span class="n">bound</span><span class="p">,</span> <span class="s">&#39;max_lon&#39;</span><span class="p">,</span> <span class="s">&#39;max_lat&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_addPoint</span><span class="p">(</span><span class="n">bound</span><span class="p">,</span> <span class="s">&#39;min_lon&#39;</span><span class="p">,</span> <span class="s">&#39;min_lat&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_addPoint</span><span class="p">(</span><span class="n">bound</span><span class="p">,</span> <span class="s">&#39;max_lon&#39;</span><span class="p">,</span> <span class="s">&#39;min_lat&#39;</span><span class="p">)</span>
    <span class="c"># add MeasuredParameter</span>
    <span class="n">mp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">gurmd</span><span class="p">,</span> <span class="s">&#39;MeasuredParameter&#39;</span><span class="p">)</span>
    <span class="n">mpc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">mp</span><span class="p">,</span> <span class="s">&#39;MeasuredParameterContainer&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valMeasuredParameter</span><span class="p">(</span><span class="n">mpc</span><span class="p">)</span>
    <span class="c"># Platform</span>
    <span class="n">pl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">gurmd</span><span class="p">,</span> <span class="s">&#39;Platform&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valPlatform</span><span class="p">(</span><span class="n">pl</span><span class="p">)</span>

    <span class="c"># add PSAs</span>
    <span class="n">psas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">gurmd</span><span class="p">,</span> <span class="s">&#39;PSAs&#39;</span><span class="p">)</span>
    <span class="c"># TODO ADD all PSA</span>

    <span class="c"># add InputGranule and InputPointer</span>
    <span class="n">ig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">gurmd</span><span class="p">,</span> <span class="s">&#39;InputGranule&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valInputPointer</span><span class="p">(</span><span class="n">ig</span><span class="p">)</span>
    <span class="c"># TODO ADD BrowseProduct</span>
    <span class="n">output</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">outputname</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
    <span class="n">output</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#39;</span><span class="p">)</span>
    <span class="n">output</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;&lt;!DOCTYPE GranuleMetaDataFile SYSTEM &quot;http://ecsinfo.gsfc.&#39;</span> \
    <span class="s">&#39;nasa.gov/ECSInfo/ecsmetadata/dtds/DPL/ECS/ScienceGranuleMetadata.dtd&quot;&gt;&#39;</span><span class="p">)</span>
    <span class="n">output</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ElementTree</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">granule</span><span class="p">))</span>
    <span class="n">output</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">pyModis 0.8.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
<table align="rigth">
<tr>
<td><div class="footer"><a href="http://gis.cri.fmach.it" target="_blank">GIS & Remote Sensing Platform, Fondazione Edmund Mach</a></div></td>
<td><div class="footer">Documentation created using <a href="http://sphinx.pocoo.org" target="_blank">Sphinx</a></div></td>
<td>
    <div class="footer">
      Last updated on Jul 05, 2013.
    </div></td>
</tr>
</table>

  </body>
</html>