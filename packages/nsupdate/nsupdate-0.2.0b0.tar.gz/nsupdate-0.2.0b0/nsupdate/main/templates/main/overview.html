{% extends "base.html" %}
{% load bootstrap %}

{% block content %}
    <div class="row">
        <div class="col-lg-12">
            <h3>Your Hosts</h3>
            <table class="table">
            <tr><th>Host</th><th>IPv4 Address</th><th>IPv6 Address</th><th>Comment</th></tr>
            {% for host in hosts %}
                <tr>
                    <td><a href="{% url 'host_view' host.pk %}"><b>{{ host.subdomain }}.{{ host.domain.domain }}</b></a></td>
                    <td>{{ host.get_ipv4 }} ({{ host.last_update_ipv4|timesince }}, {% if not host.ssl_update_ipv4 %}no {% endif %}SSL)</td>
                    <td>{{ host.get_ipv6 }} ({{ host.last_update_ipv6|timesince }}, {% if not host.ssl_update_ipv6 %}no {% endif %}SSL)</td>
                    <td>{{ host.comment }}</td>
                </tr>
            {% empty %}
                <tr>No hosts yet.</tr>
            {% endfor %}
            </table>
        </div>
    </div>
    <hr>

    <div class="row">
        <div class="col-lg-4">
            <div class="well well-sm">
                <h3>Create a new Host</h3>
                <form method="post" action="">
                    {% csrf_token %}
                    {{ form|bootstrap }}
                    <button type="submit" class="btn btn-primary">Create</button>
                </form>
            </div>
        </div>
        <div class="col-lg-8">
            <div class="well well-sm">
                <h3>Your current IP(s):</h3>
                <p><b>IPv4:</b> <span id="ipv4" class="ipv4addr">{{ request.session.ipv4 }}</span></p>
                <p><b>IPv6:</b> <span id="ipv6" class="ipv6addr">{{ request.session.ipv6 }}</span></p>
            </div>
        </div>
    </div>
{% endblock %}
