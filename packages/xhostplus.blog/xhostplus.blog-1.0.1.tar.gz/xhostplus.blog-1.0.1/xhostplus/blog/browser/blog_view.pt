<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    lang="en"
    metal:use-macro="here/main_template/macros/master"
    i18n:domain="xhostplus.blog">
    <body>

        <div metal:fill-slot="main">
            <metal:body define-macro="body_macro"
                tal:define="kssClassesView context/@@kss_field_decorator_view;
                            getKssClasses nocall:kssClassesView/getKssClassesInlineEditable;
                            templateId template/getId;
                            batch view/batch;
                            url_quote nocall:modules/Products.PythonScripts.standard/url_quote;
                            portal_discussion nocall:context/portal_discussion;
                            checkPermission nocall:context/portal_membership/checkPermission;
                            toLocalizedTime nocall:toLocalizedTime|nocall:context/@@plone/toLocalizedTime;
                            normalizeString nocall:normalizeString|nocall:context/@@plone/normalizeString;
                            nav_root context/@@plone_portal_state/navigation_root_url;
                            isAnon isAnon|context/@@plone_portal_state/anonymous;
                            wtool wtool|context/portal_workflow;
                            show_body view/show_body;
                            show_header python:view.getFieldValue('show_header', context);
                            hiddableStyle python:(not show_header) and 'visibility:hidden;;height:1px;;padding:0;;margin:0;;' or None;
                            use_view_action nocall:context/portal_properties/site_properties/typesUseViewActionInListings|python:();">

                <div tal:replace="structure provider:plone.abovecontenttitle" />

                <metal:blogTitle use-macro="here/xhostplus_blog_macros/macros/blog_title"/>

                <tal:block condition="not:batch">
                    <div tal:replace="structure provider:plone.belowcontenttitle" />
                </tal:block>

                <metal:blogDesc use-macro="here/xhostplus_blog_macros/macros/blog_description"/>

                <div class="visualClear" id="clear-before-entries-listing"><!-- --></div>

                <tal:block condition="not:batch">
                    <div tal:replace="structure provider:plone.abovecontentbody" />
                </tal:block>

                <metal:blogText use-macro="here/xhostplus_blog_macros/macros/blog_text"/>

                <div class="visualClear" id="clear-before-entry-listing"><!-- --></div>
                <tal:contents>
                    <tal:listing condition="batch">
                        <tal:foldercontents>
                            <tal:entries tal:repeat="item batch">
                                <tal:block tal:define="item_id          item/getId;
                                                       item_url         item/getURL;
                                                       item_title_or_id item/pretty_title_or_id;
                                                       item_description item/Description;
                                                       item_type        item/portal_type;
                                                       item_type_title  item/Type;
                                                       item_date        python:toLocalizedTime(item.Date,long_format=1);
                                                       item_type_class  python:'contenttype-' + normalizeString(item_type);
                                                       item_wf_state    item/review_state;
                                                       item_wf_state_class python:'state-' + normalizeString(item_wf_state);
                                                       item_creator     item/Creator;
                                                       item_subject     item/Subject|nothing;
                                                       item_object      item/getObject;
                                                       item_blogger     python:view.getFieldValue('blogger_name', item_object);
                                                       item_blogger_bio python:view.getFieldValue('blogger_bio', item_object);
                                                       item_text        item_object/getText|nothing;
                                                       item_can_edit    python:checkPermission('Modify portal content', item_object)">

                                    <div class="blogListingEntry">
                                        <metal:entryTitleImage use-macro="here/xhostplus_blog_macros/macros/entry_title_image"/>

                                        <metal:entryTitle use-macro="here/xhostplus_blog_macros/macros/entry_title"/>

                                        <metal:entryDocumentByLine use-macro="here/xhostplus_blog_macros/macros/entry_documentbyline"/>

                                        <metal:entryDesc use-macro="here/xhostplus_blog_macros/macros/entry_description"/>

                                        <div class="visualClear"><!-- --></div>

                                        <metal:entryFooter use-macro="here/xhostplus_blog_macros/macros/entry_footer"/>
                                    </div>
                                </tal:block>
                            </tal:entries>

                            <!-- Navigation -->
                            <tal:navigation define="batch_base_url context/absolute_url">
                                <div metal:use-macro="context/batch_macros/macros/navigation" />
                            </tal:navigation>

                        </tal:foldercontents>
                    </tal:listing>

                    <metal:blogEmpty use-macro="here/xhostplus_blog_macros/macros/blog_empty" />

                </tal:contents>
            </metal:body>

            <div tal:replace="structure provider:plone.belowcontentbody" />

        </div>
    </body>
</html>
