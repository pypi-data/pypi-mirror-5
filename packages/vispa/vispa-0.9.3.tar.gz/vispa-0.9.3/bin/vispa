#!/usr/bin/env python
# -*- coding: utf-8 -*-

# imports
from argparse import ArgumentParser
import os, sys
base = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
if os.path.isdir(base):
    sys.path.insert(0, base)
from vispa.server import Server

VERSION = '1.0'

def parse_commandline():
    parser = ArgumentParser()
    parser.add_argument('-c', '--config-dir', dest='configdir', default=os.path.expanduser('~/.vispa-%s' % VERSION),
                      help='Directory containing configuration files '\
                      '(default: ~/.vispa-%s)' % VERSION)
    parser.add_argument('-d', '--data-dir', dest='vardir', default=os.path.expanduser('~/.vispa-%s' % VERSION),
                      help='Directory containing server '\
                      'data and cache files (default: ~/.vispa-%s)' % VERSION)
    parser.add_argument('-l', '--loglevel', dest='loglevel', default=None,
                      help='enable debug messages')

    return parser.parse_args()

def run():
    args = parse_commandline()
    server = Server(args)
    server.run()

if __name__ == '__main__':
    run()
