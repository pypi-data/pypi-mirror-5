## workspace.html
<%! import os.path%>
<%! from vispa import url%>
<%inherit file="${os.path.join('..','base.html')}" />
<%namespace name="base" file="${os.path.join('..','base.html')}"/>

<%block name="title">Vispa - Add a Workspace</%block>

<%block name="favicon">"${url.static('img/ico/favicon.ico')}"</%block>

<%block name="js_imports_pre">
    <%
        jquery_scripts = ["jquery.min.js",
                          "ui/jquery.ui.min.js",
                          "qtip/jquery.qtip.min.js",
                          "ui/jquery.ui.touch-punch.min.js",
                          "topics/jquery.topics.min.js",
                          "sha256/jquery.sha256.min.js",
                          "logger/jquery.logger.min.js"]
        base_scripts = ["jquerymods.js",
                        "helpers.js",
                        "messenger.js",
                        "url.js"]
        framework_scripts = ["class/class.min.js",
                             "json/json2.js"]
        site_scripts = ["workspace.js",
                        "view.js"]

        for script in jquery_scripts:
            base.import_js(url.static(url.join("frameworks/jquery", script)))
        for script in framework_scripts:
            base.import_js(url.static(url.join("frameworks", script)))
        for script in base_scripts:
            base.import_js(url.static(url.join("js/base", script)))
        for script in site_scripts:
            base.import_js(url.static(url.join("js/sites/workspace", script)))
    %>
</%block>

<%block name="css_imports">
    <%
        jquery_scripts = ["qtip/css/jquery.qtip.min.css",
                          "ui/css/overcast/jquery-ui-1.10.2.custom.min.css"]
        base_scripts = ["resets.css",
                        "overlay.css",
                        "messenger.css"]
        site_scripts = ["workspace.css"]

        for script in jquery_scripts:
            base.import_css(url.static(url.join("frameworks/jquery", script)))
        for script in base_scripts:
            base.import_css(url.static(url.join("css/base", script)))
        for script in site_scripts:
            base.import_css(url.static(url.join("css/sites/workspace", script)))
    %>
</%block>

<%block name="js_inline_post">
$(function() {
    // simple config
    var config = {
        requestedPath: '${requested_path}',
        showAddForm: ${'true' if show_add_form else 'false'},
        urlHandler: {
            dynamicBase: '${base_dynamic}',
            staticBase: '${base_static}'
        }
    };

    // the workspace data
    var workspaceData = $.parseJSON("${workspace_data}".replace(/\'/g, '"'));
    window.Vispa = new Vispa(config, workspaceData);
    window.Vispa.startup();
});
</%block>

## Workspace GUI Markup

<div id='startup-overlay' class='startup-overlay'></div>

<div class='content-outer'>
    <div class='content-logo'>
        <img src='${url.static('img/vispa/Vispa2.0Logo_300.png')}' />
    </div>
    <div class='content-top'>
        <center>Please add a workspace before you start working!</center>
    </div>
    <button id='logout'>Logout</button>
    <div class='accordion-outer'>
        <div id='accordion'>
            <h3 id='ws-select-container-header'>Select a Workspace</h3>
            <div id='ws-select-container'></div>
            <h3 id='ws-add-container-header'>Add Workspace</h3>
            <div id='ws-add-container'>
                <table class='table'>
                    <tr>
                        <td>Workspace name:</td>
                        <td><input type='text' id='ws-name' class='input' style='font-size:14px;' /></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Host:</td>
                        <td><input type='text' id='ws-host' class='input' style='font-size:14px;' /></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Login:</td>
                        <td><input type='text' id='ws-login' class='input' style='font-size:14px;' /></td>
                        <td>(optional)</td>
                    </tr>
                    <tr>
                        <td>Key:</td>
                        <td><input type='text' id='ws-key' class='input' style='font-size:14px;' /></td>
                        <td>(optional)</td>
                    </tr>
                    <tr>
                        <td>Command:</td>
                        <td><input type='text' id='ws-command' class='input' style='font-size:14px;' /></td>
                        <td>(optional)</td>
                    </tr>
                    <tr>
                        <td>Directory:</td>
                        <td><input type='text' id='ws-basedir' class='input' style='font-size:14px;' /></td>
                        <td>(optional)</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            <button id='ws-submit'>Add</button>
                        </td>
                        <td>
                            <button id='ws-reset'>Reset</button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>