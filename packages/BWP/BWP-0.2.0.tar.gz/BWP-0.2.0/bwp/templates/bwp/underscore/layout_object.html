{# Шаблон Underscore #}{% load bwp_verbatim %}{% verbatim %}
<div class="row-fluid">
{% if (data.composes.length >0) { %}
    <div class="btn-group subtabs" data-toggle="buttons-radio" data-id="{{ data.id }}">
        <button class="btn btn-mini btn-primary active"
            data-toggle="tab"
            data-target="#objectpane_{{ data.id }}">
            Объект
        </button>
    {% _.each(data.composes, function(compose) { %}
        {%/* Если объект не сохранён в DB, то запрещаем операции с вложениями */%}
        {% var _compose_btn_class = ''; if (compose.is_m2m) { _compose_btn_class = 'btn-info'} %}
        <button class="btn btn-mini {{ _compose_btn_class }}"
        {% if (!data.pk) { %}
            disabled="disabled"
        {% } else { %}
            data-toggle="tab"
            data-loading="true"
        {% } %}
            data-target="#layout_{{ compose.id }}"
            data-id="{{ compose.id }}">
            {{ compose.label }}
        </button>
    {% }); %}
    </div>
{% } %}
    <div class="tab-content">
    {% _.each(data.composes, function(compose) { %}
        <div class="tab-pane" id="layout_{{ compose.id }}">
            {% endverbatim %}
            <div align="center"><img src="{{ STATIC_URL }}img/bwp/ajax-loader.gif" /> загрузка данных...</div>
            {% verbatim %}
        </div>
    {% }); %}
        <div class="tab-pane active" id="objectpane_{{ data.id }}">
            <legend>{{ data.label }}</legend>
            <div class="form form-horizontal" data-id="{{ data.id }}">
        {% endverbatim %}
                {% include "bwp/underscore/_object_fields.html" %}
            </div>
        </div>
    </div>
</div>
