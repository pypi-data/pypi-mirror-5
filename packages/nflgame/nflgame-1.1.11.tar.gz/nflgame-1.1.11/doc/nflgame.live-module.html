<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>nflgame.live</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="nflgame-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >nflgame</th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="nflgame-module.html">Package&nbsp;nflgame</a> ::
        Module&nbsp;live
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="nflgame.live-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module live</h1><p class="nomargin-top"><span class="codelink"><a href="nflgame.live-pysrc.html">source&nbsp;code</a></span></p>
<p>The live module provides a mechanism of periodically checking which 
  games are being actively played.</p>
  <p>It requires the third party library pytz to be installed, which makes 
  sure game times are compared properly with respect to time zones. pytz 
  can be downloaded from PyPI: http://pypi.python.org/pypi/pytz/</p>
  <p>It works by periodically downloading data from NFL.com for games that 
  started before the current time. Once a game completes, the live module 
  stops asking NFL.com for data for that game.</p>
  <p>If there are no games being actively played (i.e., it's been more than
  N hours since the last game started), then the live module sleeps for 
  longer periods of time.</p>
  <p>Thus, the live module can switch between two different modes: active 
  and inactive.</p>
  <p>In the active mode, the live module downloads data from NFL.com in 
  short intervals. A transition to an inactive mode occurs when no more 
  games are being played.</p>
  <p>In the inactive mode, the live module only checks if a game is playing
  (or about to play) every 15 minutes. If a game is playing or about to 
  play, the live module switches to the active mode. Otherwise, it stays in
  the inactive mode.</p>
  <p>With this strategy, if the live module is working properly, you could 
  theoretically keep it running for the entire season.</p>
  <p>(N.B. Half-time is ignored. Games are either being actively played or 
  not.)</p>
  <h1 class="heading">Alpha status</h1>
    <p>This module is emphatically in alpha status. I believe things will 
    work OK for the regular season, but the postseason brings new 
    challenges. Moreover, it will probably affect the API at least a little
    bit.</p>

<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Functions</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="nflgame.live-module.html#current_year_and_week" class="summary-sig-name">current_year_and_week</a>()</span><br />
      Returns a tuple (year, week) where year is the current year of the 
      season and week is the current week number of games being played.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="nflgame.live-pysrc.html#current_year_and_week">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="nflgame.live-module.html#current_games" class="summary-sig-name">current_games</a>(<span class="summary-sig-arg">year</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">week</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">kind</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">REG</code><code class="variable-quote">'</code></span>)</span><br />
      Returns a list of game.Games of games that are currently playing.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="nflgame.live-pysrc.html#current_games">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="nflgame.live-module.html#run" class="summary-sig-name">run</a>(<span class="summary-sig-arg">callback</span>,
        <span class="summary-sig-arg">active_interval</span>=<span class="summary-sig-default">15</span>,
        <span class="summary-sig-arg">inactive_interval</span>=<span class="summary-sig-default">900</span>,
        <span class="summary-sig-arg">stop</span>=<span class="summary-sig-default">None</span>)</span><br />
      Starts checking for games that are currently playing.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="nflgame.live-pysrc.html#run">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Variables</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'nflgame'"><code class="variable-quote">'</code><code class="variable-string">nflgame</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Function Details</span></td>
</tr>
</table>
<a name="current_year_and_week"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">current_year_and_week</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="nflgame.live-pysrc.html#current_year_and_week">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns a tuple (year, week) where year is the current year of the 
  season and week is the current week number of games being played. i.e., 
  (2012, 3).</p>
  <p>N.B. This always downloads the schedule XML data.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="current_games"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">current_games</span>(<span class="sig-arg">year</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">week</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">kind</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">REG</code><code class="variable-quote">'</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="nflgame.live-pysrc.html#current_games">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns a list of game.Games of games that are currently playing. This
  fetches all current information from NFL.com.</p>
  <p>If either year or week is none, then the current year and week are 
  fetched from the schedule on NFL.com. If they are *both* provided, then 
  the schedule from NFL.com won't need to be downloaded, and thus saving 
  time.</p>
  <p>So for example:</p>
<pre class="literalblock">
   year, week = nflgame.live.current_year_and_week()
   while True:
       games = nflgame.live.current_games(year, week)
       # Do something with games
       time.sleep(60)
</pre>
  <p>The kind parameter specifies whether to fetch preseason, regular 
  season or postseason games. Valid values are PRE, REG and POST.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="run"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">run</span>(<span class="sig-arg">callback</span>,
        <span class="sig-arg">active_interval</span>=<span class="sig-default">15</span>,
        <span class="sig-arg">inactive_interval</span>=<span class="sig-default">900</span>,
        <span class="sig-arg">stop</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="nflgame.live-pysrc.html#run">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Starts checking for games that are currently playing.</p>
  <p>Every time there is an update, callback will be called with two lists:
  active and completed. The active list is a list of game.Game that are 
  currently being played. The completed list is a list of game.Game that 
  have just finished. A game will appear in the completed list only once, 
  after which that game will not be in either the active or completed 
  lists. No game can ever be in both lists at the same time.</p>
  <p>It is possible that a game in the active list is not yet playing 
  because it hasn't started yet. It ends up in the active list because the 
  &quot;pregame&quot; has started on NFL.com's GameCenter web site, and 
  sometimes game data is partially filled. When this is the case, the 
  'playing' method on a nflgame.game.Game will return False.</p>
  <p>When in the active mode (see live module description), active_interval
  specifies the number of seconds to wait between checking for updated game
  data. Please do not make this number too low to avoid angering NFL.com. 
  If you anger them too much, it is possible that they could ban your IP 
  address.</p>
  <p>Note that NFL.com's GameCenter page is updated every 15 seconds, so 
  setting the active_interval much smaller than that is wasteful.</p>
  <p>When in the inactive mode (see live module description), 
  inactive_interval specifies the number of seconds to wait between 
  checking whether any games have started or are about to start.</p>
  <p>With the default parameters, run will never stop. However, you may set
  stop to a Python datetime.datetime value. After time passes the stopping 
  point, run will quit. (Technically, it's possible that it won't quit 
  until at most inactive_interval seconds after the stopping point is 
  reached.) The stop value is compared against datetime.datetime.now().</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="nflgame-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >nflgame</th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Tue Aug  6 00:36:55 2013
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
