#!/usr/bin/env python

import argparse, pdb
import pscripts.external_ip_address as eia
import sys

parser = argparse.ArgumentParser(description='Update external IP address with Dynamic DNS service.')
parser.add_argument('--update_url','-u', help='url to "touch" to trigger IP update')
parser.add_argument('--verbose','-v', action='store_true', help='print debugging info to STDERR')
a = parser.parse_args() 

if not a.update_url:
    parser.print_help()
    sys.exit(1)

if a.verbose:
    eia.update_ddns_server(update_url=a.update_url, verbose=True)
else:
    eia.update_ddns_server(update_url=a.update_url, verbose=False)

sys.exit(0)
