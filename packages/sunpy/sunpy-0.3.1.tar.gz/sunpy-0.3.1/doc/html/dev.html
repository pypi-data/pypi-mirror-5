

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Developer’s Guide &mdash; SunPy 0.2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="SunPy 0.2.0 documentation" href="index.html" />
    <link rel="next" title="SSW/SunPy Cheat Sheat" href="ssw.html" />
    <link rel="prev" title="Callisto Spectrograms" href="reference/callisto.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ssw.html" title="SSW/SunPy Cheat Sheat"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="reference/callisto.html" title="Callisto Spectrograms"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">SunPy 0.2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="developer-s-guide">
<h1>Developer&#8217;s Guide<a class="headerlink" href="#developer-s-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This article describes the guidelines to be followed by developers working on
SunPy. You if you are thinking of contributing to SunPy please read the following
carefully.</p>
</div>
<div class="section" id="version-control">
<h2>Version Control<a class="headerlink" href="#version-control" title="Permalink to this headline">¶</a></h2>
<p>Source-code for SunPy is managed using <a class="reference external" href="http://git-scm.com">Git</a>,
a Distributed Version Control system. Code branches are hosted on
<a class="reference external" href="http://github.com/sunpy/sunpy">GitHub.com</a>, a free project hosting  website
for Open-Source software.</p>
<div class="section" id="creating-your-own-repo">
<h3>Creating Your Own Repo<a class="headerlink" href="#creating-your-own-repo" title="Permalink to this headline">¶</a></h3>
<p><strong>Overview</strong></p>
<p>Each person contributing to SunPy should create their own code repository on
GitHub by forking the master repository or repo. All development is then done on that
fork, using topic branches to isolate work on different features. New
contributers can then initiate pull requests to have their code incorporated
into the SunPy master repository. Regular contributers can become members of the
<a class="reference external" href="https://github.com/sunpy">SunPy team</a> on GitHub. Code will be reviewed by regular
contributors and comments will usually be provided before code is accepted.</p>
<p><strong>Getting Started</strong></p>
<p>Creating your own repo on GitHub is easy to do. If you followed the SunPy installation
instructions you should already have git installed. Go ahead and create a free account
on <a class="reference external" href="https://github.com/signup/free">create an account on GitHub</a>. Github has some
<a class="reference external" href="https://help.github.com/">great resources to help</a>. Here is a quick overview of the
process.</p>
<p><strong>Adding an SSH key to GitHub</strong></p>
<p>Next, you need to tell GitHub who you are. In order to push any code to GitHub
you need to create a public SSH key and associate it with your GitHub account.
For instructions on how this is done, see the article on GitHub on
<a class="reference external" href="http://help.github.com/set-up-git-redirect">Setting up git</a> under
&#8220;Set Up SSH Keys&#8221;. You only need to do this once, although if you plan to
work from multiple computers you will need to go through the process for each
computer you wish to work on. Once you have created your account and
associated a public SSH key it, you are ready to go.</p>
<p><strong>Identifying yourself</strong></p>
<p>Begin by identifying yourself to GitHub and logging in to
GitHub:</p>
<div class="highlight-python"><pre>git config --global user.name "Firstname Lastname"
git config --global user.email "your_email@youremail.com"</pre>
</div>
<p><strong>Forking SunPy</strong></p>
<p>Each contributer to SunPy has their own copy of the SunPy master repo. When
working on the code, changes are made to this copied repo, and only when the
changes are completed, and have been verified to work, are they pull requested back
to the master repo. GitHub provides a simple mechanism to setup your own
personal repo by providing an option to <a class="reference external" href="http://help.github.com/fork-a-repo/">fork a repository</a>. When you create a fork of a GitHub
project, a copy of the repo will automatically be created for you, and a link
will be provided which you can use to download the code to your machine and
begin working on it.</p>
<p>To begin, fork the main SunPy repo on GitHub by clicking on the <em class="xref py py-obj">Fork</em> button
on the <a class="reference external" href="https://github.com/sunpy/sunpy">SunPy project page</a></p>
<p>Next, you need to download the forked repository. Clone the fork to your
local machine, edit and run:</p>
<div class="highlight-python"><pre>git clone git@github.com:your_username/sunpy.git</pre>
</div>
<p>By default your fork of the repo on GitHub is identified by the name <em class="xref py py-obj">origin</em>.
In order to keep the fork up to date with the main repo, it is useful to add it
as a <em class="xref py py-obj">remote</em> in git:</p>
<div class="highlight-python"><pre>git remote add upstream https://github.com/sunpy/sunpy.git</pre>
</div>
<p>To stay up to date you can grab the latest changes to the SunPy master using
the commands:</p>
<div class="highlight-python"><pre>git pull upstream master</pre>
</div>
<p>This will merge the upstream code automatically with your code so you don&#8217;t need to worry
about it overwriting your changes. After running either of these commands,
your local copy of your personal repo is just a copy of the main repo.
This is the same procedure that you will use in the future to keep yourself syncronized with the
main repo. To make sure everything is setup correctly, let&#8217;s make some changes
to our personal local repo and push those to our personal repo on GitHub. Go ahead and modify one
of the files, or create a new file (and then run <strong class="command">git add</strong>).</p>
<p>Commit and push the changes to GitHub:</p>
<div class="highlight-python"><pre>git commit -a -m "My first commit"
git push</pre>
</div>
<p>You local repo is now synced with GitHub and ahead of the main repo as it contains
your personal contribution. Remember to commit after you&#8217;ve done a unit of work (i.e.
often). This will make it easier for you (in the future) and everyone else to understand
what you are doing. Also make sure to make your commit statements clear and understandable.</p>
<p><strong>Conclusion</strong></p>
<p>That&#8217;s it! You now have your own personal SunPy repo to develop on. You could
hack away at it to your heart&#8217;s content, pushing changes to your fork on GitHub to share
with others and to ensure that you have a backup online.</p>
<p>But what about when you want to start contributing back to the main SunPy
repo? That is the topic of the next section.</p>
</div>
<div class="section" id="branches">
<h3>Branches<a class="headerlink" href="#branches" title="Permalink to this headline">¶</a></h3>
<p>Developers should create topic branches within their repos for most of their
main coding. Every repo starts with a single branch called <em class="xref py py-obj">master</em>, which
seldom needs to be used. Instead, work on any particular feature, bug, or
portion of the code is done in its own separate branch. This way changes on
any particular issue are isolated from other unrelated changes. Users can even
work on several different branches simultaneously.</p>
<p>To create a new branch run:</p>
<div class="highlight-python"><pre>git branch branchname</pre>
</div>
<p>To switch to the new branch:</p>
<div class="highlight-python"><pre>git checkout branchname</pre>
</div>
<p>(or alternatively, <strong class="command">git checkout -b branchname</strong> will accomplish
the above).</p>
<p>Developers should create new branches for the features they are working on.
When they have finished making changes and the code has been tested and
verified to be working well, the code can be merged back into the SunPy master
repo. This is usually done through something called a pull request.</p>
</div>
<div class="section" id="example-workflow">
<h3>Example Workflow<a class="headerlink" href="#example-workflow" title="Permalink to this headline">¶</a></h3>
<p><strong>Before we get started</strong></p>
<p>Here is an example workflow for a SunPy developer on any given day. Before
beginning this tutorial, follow the above instructions to grab a copy of the
SunPy repo.</p>
<p><strong>Grabbing other people&#8217;s changes</strong></p>
<p>The first thing you want to do before you start coding anything new is to pull
in the latest code that others have written since you last did any coding. To
do this, run <strong class="command">git pull</strong>:</p>
<div class="highlight-python"><pre>git pull upstream master</pre>
</div>
<p>This will ensure that you don&#8217;t edit a file that has changed since your last pull
which will lead to merge conflicts later on.</p>
<p><strong>Code away</strong></p>
<p>Assuming there are no merge conflicts (which shouldn&#8217;t happen unless two people
are working on the same part of the same file), then you are ready to begin
coding. If there are conflicts check out our conflicts section.</p>
<p><strong>Push your changes to GitHub</strong></p>
<p>As you code away on your local repo, you will need to keep git aware of what you are doing
and also your remote copy up to date.</p>
<p>To add a file, create the file then run:</p>
<div class="highlight-python"><pre>git add &lt;yourfilename&gt;</pre>
</div>
<p>If you delete a file run:</p>
<div class="highlight-python"><pre>git rm &lt;yourfilename&gt;</pre>
</div>
<p>To move a file, copy the file and then run a git rm and then a git add. To check to see if git is happy
run:</p>
<div class="highlight-python"><pre>git status</pre>
</div>
<p>which will give you a report of what has happened so far. Once you are at a good stopping point you should
&#8220;commit&#8221; your changes. This will provide you an opportunity to describe what you have done so far. To do this type:</p>
<div class="highlight-python"><pre>git commit -a -m "description of your changes"</pre>
</div>
<p>After doing this you are ready to push your changes to your repo online with the command:</p>
<div class="highlight-python"><pre>git push</pre>
</div>
<p>The local and remote copies of your repo are now synced.</p>
<p><strong>Contributing to the main repo</strong></p>
<p>Once you have made your desired changes, and committed and pushed your personal
branch, you need to decide whether or not to merge those changes back into the
main SunPy repo. If the changes you made are finished and have been tested and proven
stable (see the testing section below), then they can be merged into SunPy.
For now, lets assume that
your changes are complete and they are ready to be added to the main SunPy repo.
All contributed code to SunPy must be submitted as a &#8220;pull request&#8221;. To do this go to the github
website and to your repo (remember to select the branch) then click on the &#8220;Pull
Request&#8221; button (in the upper right hand corner next to the Fork button which you&#8217;ve
used before). All initial pull requests must be done to the staging branch of sunpy
(NEVER TO THE MAIN BRANCH!). The staging branch is used as a test best for new code.
This will submit your code to a review. You will likely
receive some constructive comments on your code. To address these you can simply work
on your code and push those changes to your local repo. Those changes will be reflected
in your pull request. Once a member of
the SunPy dev team approves your pull request then your code will be
merged into the main SunPy branch
and your code will be part of the main SunPy code. Congratulations!</p>
<p>And that&#8217;s it! It may seem like a lot at first but once you go through the
motions a few times it becomes very quick.</p>
<p><strong>Conflict resolution</strong></p>
<p>It may so happen that when you try to sync with the main repo there is a conflict error.
This means that someone else has been working on the same section of code
that you have. In such cases, the merge
command will issue a conflict warning and will then expect you do the merge
yourself. You can type:</p>
<div class="highlight-python"><pre>git mergetool</pre>
</div>
<p>to go through the conflicts. This command will likely open some merging tools
which are already available on your computer. For example, on Mac OS X, it will open
FileMerge (if you have XCode installed). You can check on your progress by typing:</p>
<div class="highlight-python"><pre>git status</pre>
</div>
<p>Once you are done, you should then commit your changes, in this case
the resolution of the conflict with:</p>
<div class="highlight-python"><pre>git commit -m "Resolved conflict between my and online version of file.py"</pre>
</div>
<p>You can then proceed to push this change up to your branch.</p>
</div>
</div>
<div class="section" id="coding-standards">
<h2>Coding Standards<a class="headerlink" href="#coding-standards" title="Permalink to this headline">¶</a></h2>
<p>All code that is part of the SunPy project should follow The Style Guide for
Python (<a class="reference external" href="http://www.python.org/dev/peps/pep-0008/">PEP 8</a>). Additionally, all
code that goes in the trunk should be checked using <a class="reference external" href="http://www.logilab.org/card/pylint_manual">PyLint</a>. PyLint is an open source tool
which analyzes Python code and checks for compliance with PEP8, as well as
common coding errors and other potentially confusing or erroneous code
statements. Checking the SunPy trunk code this helps to ensure some baseline
level of quality and consistency for the code, and also helps to prevent
potential problems from slipping through the cracks into the production code.</p>
<p>If you followed the installation instructions for devs, pylint should already be
installed on your system. To run PyLint on a file, simply call pylint from the
command-line, passing in the name of the file you wish to check:</p>
<div class="highlight-python"><pre>pylint file.py</pre>
</div>
<p>By default PyLint will print lines with potential problems along
with a summary report. To disable the summary report you can add either <em class="xref py py-obj">-rn</em>
or <em class="xref py py-obj">&#8211;reports=no</em> to the command:</p>
<div class="highlight-python"><pre>pylint -rn file.py</pre>
</div>
<p>Further, a paver task has been created so that all of the SunPy code can be
checked at once:</p>
<div class="highlight-python"><pre>paver pylint</pre>
</div>
<p>The output from PyLint will look something like:</p>
<div class="highlight-python"><pre>C: 87: Line too long (635/80)
C:135: Line too long (98/80)
R: 22:plot_fits: Too many local variables (22/15)
R: 80:aia_color_table: Too many statements (59/50)
W: 14: Unused import cm
W: 16: Unused import Circle</pre>
</div>
<p>Each line includes a line number, the category of the warning message, and a
short description of the issue encountered.</p>
<p>The categories include:</p>
<ul class="simple">
<li>[R]efactor for a &#8220;good practice&#8221; metric violation</li>
<li>[C]onvention for coding standard violation</li>
<li>[W]arning for stylistic problems, or minor programming issues</li>
<li>[E]rror for important programming issues (i.e. most probably bug)</li>
<li>[F]atal for errors which prevented further processing</li>
</ul>
<p>PyLint checks a wide range of different things so the first time you run PyLint
on a file you will likely get a large number of warnings. In some cases the
warnings will help you to spot coding mistakes or areas that could be improved
with refactoring. In other cases, however, the warning message may not apply
and what you have there is exactly as it should be. In these cases it is
possible to silence PyLint for that line. PyLint warning messages can be
disabled at three different levels: globally (using a .pylintrc file),
file-wide, and for a single line.</p>
<p>(To be finished...)</p>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>All code must be documented. Undocumented code will not be accepted into SunPy.
Documentation should follow the guidelines in <a class="reference external" href="http://www.python.org/dev/peps/pep-0008/">PEP 8</a> and <a class="reference external" href="http://www.python.org/dev/peps/pep-0257/">PEP 257 (Docstring
conventions)</a>. Documentation for
modules, classes, and functions should follow the <a class="reference external" href="https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt">NumPy/SciPy documentation
style guide</a>. We provide
an example of good documentation below or you can just browse some of SunPy code
itself for examples. All of the SunPy documentation (like this page!) is built by Sphinx
and must therefore adhere to Sphinx guidelines.</p>
<div class="section" id="sphinx">
<h3>Sphinx<a class="headerlink" href="#sphinx" title="Permalink to this headline">¶</a></h3>
<p><strong>Overview</strong></p>
<p><a class="reference external" href="http://sphinx.pocoo.org/">Sphinx</a> is tool for generating high-quality
documentation in various formats (HTML, pdf, etc) and is especially well-suited
for documenting Python projects. Sphinx works by parsing files written using a
<a class="reference external" href="http://docutils.sourceforge.net/docs/user/rst/quickstart.html">a Mediawiki-like syntax</a> called
<a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a>. In addition
to parsing static files of reStructuredText, Sphinx can also be told to parse
code comments. In fact, in addition to what you are reading right now, the
<a class="reference external" href="http://www.python.org/doc/">Python documenation</a> was also created using
Sphinx.</p>
<p><strong>Usage</strong></p>
<p>All of the SunPy documentation is contained in the <tt class="docutils literal"><span class="pre">doc/source</span></tt> folder and code
comments. To generate the documentation you must have Sphinx (as well as Numpydoc) installed
on your computer. Enter the <tt class="docutils literal"><span class="pre">doc/source</span></tt> folder and
run:</p>
<div class="highlight-python"><pre>make html</pre>
</div>
<p>This will generate HTML documentation for SunPy.</p>
<p>Additionally, there is a <a class="reference external" href="http://paver.github.com/paver/">paver</a> command that
can be used to accomplish the same thing:</p>
<div class="highlight-python"><pre>paver prepare_docs</pre>
</div>
<p>Which is a shortcut for the sphinx command:</p>
<div class="highlight-python"><pre>sphinx-build source/ html/</pre>
</div>
<p>For more information on how to use Sphinx, consult the <a class="reference external" href="http://sphinx.pocoo.org/contents.html">Sphinx documentation</a>.</p>
<p>The rest of this section will describe how to document the SunPy code in order
to guarantee that well-formatted documentation will be created.</p>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<div class="section" id="modules">
<h4>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h4>
<p>Each module or package should begin with a docstring describing its overall
purpose and functioning. Below that meta-tags containing author, license, email
and credits information may also be listed.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;This is an example module comment.</span>

<span class="sd">An explanation of the purpose of the module would go here and will appear</span>
<span class="sd">in the generated documentation</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c">#</span>
<span class="c"># TODO</span>
<span class="c">#  Developer notes and todo items can be listed here and will not be</span>
<span class="c">#  included in the documentation.</span>
<span class="c">#</span>
<span class="n">__authors__</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Keith Hughitt&quot;</span><span class="p">,</span> <span class="s">&quot;Steven Christe&quot;</span><span class="p">,</span> <span class="s">&quot;Jack Ireland&quot;</span><span class="p">,</span> <span class="s">&quot;Alex Young&quot;</span><span class="p">]</span>
<span class="n">__email__</span> <span class="o">=</span> <span class="s">&quot;keith.hughitt@nasa.gov&quot;</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s">&quot;xxx&quot;</span>
</pre></div>
</div>
<p>For details about what sections can be included, see the section on <a class="reference external" href="https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt">documenting
modules</a> in the
NumPy/SciPy style guide.</p>
</div>
<div class="section" id="classes">
<h4>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h4>
<p>Class docstrings should include a clear and concise docstring explaining the
overall purpose of the class, required and optional input parameters, and the
return value. Additionally, notes, references and examples are encouraged.</p>
<p>Example (<tt class="xref py py-class docutils literal"><span class="pre">sunpy.map.Map</span></tt>)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Map(data, header)</span>

<span class="sd">A spatially-aware data array based on the SolarSoft Map object</span>

<span class="sd">Parameters</span>
<span class="sd">----------</span>
<span class="sd">data : numpy.ndarray, list</span>
<span class="sd">    A 2d list or ndarray containing the map data</span>
<span class="sd">header : dict</span>
<span class="sd">    A dictionary of the original image header tags</span>

<span class="sd">Attributes</span>
<span class="sd">----------</span>
<span class="sd">header : dict</span>
<span class="sd">    A dictionary representation of the image header</span>
<span class="sd">date : datetime</span>
<span class="sd">    Image observation time</span>
<span class="sd">det : str</span>
<span class="sd">    Detector name</span>
<span class="sd">inst : str</span>
<span class="sd">    Instrument name</span>
<span class="sd">meas : str, int</span>
<span class="sd">    Measurement name. For AIA this is the wavelength of image</span>
<span class="sd">obs : str</span>
<span class="sd">    Observatory name</span>
<span class="sd">r_sun : float</span>
<span class="sd">    Radius of the sun</span>
<span class="sd">name : str</span>
<span class="sd">    Nickname for the image type (e.g. &quot;AIA 171&quot;)</span>
<span class="sd">center : dict</span>
<span class="sd">    X and Y coordinate for the center of the sun in arcseconds</span>
<span class="sd">scale: dict</span>
<span class="sd">    Image scale along the x and y axes in arcseconds/pixel</span>

<span class="sd">Examples</span>
<span class="sd">--------</span>
<span class="sd">&gt;&gt;&gt; aia = sunpy.make_map(sunpy.AIA_171_IMAGE)</span>
<span class="sd">&gt;&gt;&gt; aia.T</span>
<span class="sd">Map([[ 0.3125,  1.    , -1.1875, ..., -0.625 ,  0.5625,  0.5   ],</span>
<span class="sd">[-0.0625,  0.1875,  0.375 , ...,  0.0625,  0.0625, -0.125 ],</span>
<span class="sd">[-0.125 , -0.8125, -0.5   , ..., -0.3125,  0.5625,  0.4375],</span>
<span class="sd">...,</span>
<span class="sd">[ 0.625 ,  0.625 , -0.125 , ...,  0.125 , -0.0625,  0.6875],</span>
<span class="sd">[-0.625 , -0.625 , -0.625 , ...,  0.125 , -0.0625,  0.6875],</span>
<span class="sd">[ 0.    ,  0.    , -1.1875, ...,  0.125 ,  0.    ,  0.6875]])</span>
<span class="sd">&gt;&gt;&gt; aia.header[&#39;cunit1&#39;]</span>
<span class="sd">&#39;arcsec&#39;</span>
<span class="sd">&gt;&gt;&gt; aia.show()</span>
<span class="sd">&gt;&gt;&gt; import matplotlib.cm as cm</span>
<span class="sd">&gt;&gt;&gt; import matplotlib.colors as colors</span>
<span class="sd">&gt;&gt;&gt; aia.show(cmap=cm.hot, norm=colors.Normalize(1, 2048))</span>

<span class="sd">See Also</span>
<span class="sd">--------</span>
<span class="sd">numpy.ndarray Parent class for the Map object</span>

<span class="sd">References</span>
<span class="sd">----------</span>
<span class="sd">| http://docs.scipy.org/doc/numpy/reference/arrays.classes.html</span>
<span class="sd">| http://docs.scipy.org/doc/numpy/user/basics.subclassing.html</span>
<span class="sd">| http://www.scipy.org/Subclasses</span>

<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="functions">
<h4>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h4>
<p>Functions should include a clear and concise docstring explaining the overall
purpose of the function, required and optional input parameters, and the return
value. Additionally, notes, references and examples are encouraged.</p>
<p>Example (<a class="reference external" href="https://github.com/numpy/numpy/blob/master/numpy/matlib.py">numpy.matlib.ones</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">ones</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Matrix of ones.</span>

<span class="sd">    Return a matrix of given shape and type, filled with ones.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    shape : {sequence of ints, int}</span>
<span class="sd">        Shape of the matrix</span>
<span class="sd">    dtype : data-type, optional</span>
<span class="sd">        The desired data-type for the matrix, default is np.float64.</span>
<span class="sd">    order : {&#39;C&#39;, &#39;F&#39;}, optional</span>
<span class="sd">        Whether to store matrix in C- or Fortran-contiguous order,</span>
<span class="sd">        default is &#39;C&#39;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    out : matrix</span>
<span class="sd">        Matrix of ones of given shape, dtype, and order.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    ones : Array of ones.</span>
<span class="sd">    matlib.zeros : Zero matrix.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    If `shape` has length one i.e. ``(N,)``, or is a scalar ``N``,</span>
<span class="sd">    `out` becomes a single row matrix of shape ``(1,N)``.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; np.matlib.ones((2,3))</span>
<span class="sd">    matrix([[ 1.,  1.,  1.],</span>
<span class="sd">            [ 1.,  1.,  1.]])</span>

<span class="sd">    &gt;&gt;&gt; np.matlib.ones(2)</span>
<span class="sd">    matrix([[ 1.,  1.]])</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">ndarray</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
    <span class="n">a</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span>
</pre></div>
</div>
<p>For details about what sections can be included, see the section on <a class="reference external" href="https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt">documenting
functions</a> in the
NumPy/SciPy style guide.</p>
</div>
</div>
<div class="section" id="trouble-shooting">
<h3>Trouble-shooting<a class="headerlink" href="#trouble-shooting" title="Permalink to this headline">¶</a></h3>
<p>Sphinx can be very particular about formatting, and the warnings and errors
outputted aren&#8217;t always obvious.</p>
<p>Below are some commonly-encountered warning/error messages along with a
human-readable translation:</p>
<p><strong>WARNING: Duplicate explicit target name: &#8220;xxx&#8221;.</strong></p>
<p>If you reference the same URL, etc more than once in the same document sphinx
will complain. To avoid, use double-underscores instead of single ones after
the URL.</p>
<p><strong>ERROR: Malformed table. Column span alignment problem at line offset n</strong></p>
<p>Make sure there is a space before and after each colon in your class and
function docs (e.g. attribute : type, instead of attribute: type). Also, for
some sections (e.g. Attributes) numpydoc seems to complain when a description
spans more than one line.</p>
<p><strong>WARNING: Block quote ends without a blank line; unexpected unindent.</strong>
Lists should be indented one level from their parents.</p>
</div>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>This is a brief tutorial on how to write and run SunPy unit tests. SunPy makes use
of the great package <em class="xref py py-obj">pytest</em> for all of its testing needs.</p>
<div class="section" id="writing-a-unit-test">
<h3>Writing a unit test<a class="headerlink" href="#writing-a-unit-test" title="Permalink to this headline">¶</a></h3>
<p>Consider a simple module <em class="xref py py-obj">stuff.py</em> that contains the simple function shown
below.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">double</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x</span>
</pre></div>
</div>
<p>We can write a test case for this function by defining a new function
containing the test (or tests) we want to perform. Suppose we want to check
that the correct behaviour occurs when we pass a value of 5 to <em class="xref py py-obj">double()</em>. We
would write the test function like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">test_answer</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">double</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="mi">10</span>
</pre></div>
</div>
<p>There are two things to note here. Firstly, names of test cases should always
begin with <em class="xref py py-obj">test_</em>. This is because <tt class="xref py py-obj docutils literal"><span class="pre">pytest</span></tt> searches for test cases named this
way. Secondly, we use <em class="xref py py-obj">assert</em> to assert our expectation of what the result of
the test should be. In this example, the test returns true and so the test
passes.</p>
<p>The example given above is one in which the function and test reside in the
same module. In SunPy, functions and tests are separated and the latter can be
found in the <em class="xref py py-obj">sunpy/tests</em> directory, organised by module. The convention is
to have one test module per science module, with the names for the test modules
being the same as those for the science modules prefixed with <em class="xref py py-obj">test_</em>. For
example, the modules <em class="xref py py-obj">util.py</em> and <em class="xref py py-obj">multimethod.py</em> in <em class="xref py py-obj">sunpy/util</em> have
corresponding test modules <em class="xref py py-obj">test_util.py</em> and <em class="xref py py-obj">test_multimethod.py</em>.</p>
</div>
<div class="section" id="running-unit-tests">
<h3>Running unit tests<a class="headerlink" href="#running-unit-tests" title="Permalink to this headline">¶</a></h3>
<p>To find and run all the SunPy unit tests, simply run</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">py</span><span class="o">.</span><span class="n">test</span>
</pre></div>
</div>
<p>from the root of the SunPy tree (i.e. the directory containing <em class="xref py py-obj">INSTALL.TXT</em>,
<a class="reference internal" href="reference/index.html#module-sunpy" title="sunpy"><tt class="xref py py-obj docutils literal"><span class="pre">sunpy</span></tt></a>, <em class="xref py py-obj">doc</em>, etc.). This will produce a lot of output and you&#8217;ll probably
want to run only selected test modules at a time. This is done by specifying
the module on the command line, e.g.:</p>
<div class="highlight-python"><pre>py.test sunpy/tests/util/test_util.py</pre>
</div>
<p>for the tests for <tt class="xref py py-obj docutils literal"><span class="pre">sunpy.util.util</span></tt>.</p>
</div>
<div class="section" id="when-to-write-unit-tests">
<h3>When to write unit tests<a class="headerlink" href="#when-to-write-unit-tests" title="Permalink to this headline">¶</a></h3>
<p>A rule of thumb for unit testing is to have at least one unit test per public
function.</p>
<div class="section" id="new-functionality">
<h4>New Functionality<a class="headerlink" href="#new-functionality" title="Permalink to this headline">¶</a></h4>
<p>For SunPy, we would encourage all developers to thoroughly <a class="reference external" href="http://en.wikipedia.org/wiki/Code_coverage">cover</a>
their code by writing unit tests for each new function created.</p>
<p>Developers who want to take an aggresive approach to reducing bugs may even
wish to consider adopting a practice such as Test Drive Development (TDD)
whereby unit tests are written before any actual code is written. The tests
begin by failing, and then as they code is developed the user re-runs the
tests until all of them are passing.</p>
</div>
<div class="section" id="bugs-discovered">
<h4>Bugs discovered<a class="headerlink" href="#bugs-discovered" title="Permalink to this headline">¶</a></h4>
<p>In addition to writing unit tests new functionality, it is also a good practice
to write a unit test each time a bug is found, and submit the unit test along
with the fix for the problem. This way we can ensure that the bug does not
re-emerge at a later time.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/sunpy_logo_compact_192x239.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Developer&#8217;s Guide</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#version-control">Version Control</a><ul>
<li><a class="reference internal" href="#creating-your-own-repo">Creating Your Own Repo</a></li>
<li><a class="reference internal" href="#branches">Branches</a></li>
<li><a class="reference internal" href="#example-workflow">Example Workflow</a></li>
</ul>
</li>
<li><a class="reference internal" href="#coding-standards">Coding Standards</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a><ul>
<li><a class="reference internal" href="#sphinx">Sphinx</a></li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#modules">Modules</a></li>
<li><a class="reference internal" href="#classes">Classes</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#trouble-shooting">Trouble-shooting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#testing">Testing</a><ul>
<li><a class="reference internal" href="#writing-a-unit-test">Writing a unit test</a></li>
<li><a class="reference internal" href="#running-unit-tests">Running unit tests</a></li>
<li><a class="reference internal" href="#when-to-write-unit-tests">When to write unit tests</a><ul>
<li><a class="reference internal" href="#new-functionality">New Functionality</a></li>
<li><a class="reference internal" href="#bugs-discovered">Bugs discovered</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="reference/callisto.html"
                        title="previous chapter">Callisto Spectrograms</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ssw.html"
                        title="next chapter">SSW/SunPy Cheat Sheat</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/dev.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ssw.html" title="SSW/SunPy Cheat Sheat"
             >next</a> |</li>
        <li class="right" >
          <a href="reference/callisto.html" title="Callisto Spectrograms"
             >previous</a> |</li>
        <li><a href="index.html">SunPy 0.2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, SunPy Community.
      Last updated on Mar 06, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>