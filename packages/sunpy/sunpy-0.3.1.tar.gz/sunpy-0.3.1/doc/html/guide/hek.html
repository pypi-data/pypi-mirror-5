

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using SunPy’s HEK module &mdash; SunPy 0.2.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="SunPy 0.2.0 documentation" href="../index.html" />
    <link rel="up" title="SunPy User Guide" href="index.html" />
    <link rel="next" title="Spectra" href="spectra.html" />
    <link rel="prev" title="Maps" href="maps.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="spectra.html" title="Spectra"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="maps.html" title="Maps"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">SunPy 0.2.0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">SunPy User Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="using-sunpy-s-hek-module">
<h1>Using SunPy&#8217;s HEK module<a class="headerlink" href="#using-sunpy-s-hek-module" title="Permalink to this headline">¶</a></h1>
<p>The Heliophysics Event Knowledgebase (HEK) is a repository of feature
and event information concerning the Sun.  Entries are generated both
by automated algorithms and human observers.  SunPy accesses this
information through the &#8216;hek&#8217; module, which was developed through
support from the European Space Agency Summer of Code in Space
(ESA-SOCIS) 2011.</p>
<div class="section" id="setting-up-the-client">
<h2>1. Setting up the client<a class="headerlink" href="#setting-up-the-client" title="Permalink to this headline">¶</a></h2>
<p>SunPy&#8217;s HEK module is in sunpy.net.  It can be imported into your
IPython session as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sunpy.net</span> <span class="kn">import</span> <span class="n">hek</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">hek</span><span class="o">.</span><span class="n">HEKClient</span><span class="p">()</span>
</pre></div>
</div>
<p>This creates a client that we will use to interact with the HEK.</p>
</div>
<div class="section" id="a-simple-query">
<h2>2. A simple query<a class="headerlink" href="#a-simple-query" title="Permalink to this headline">¶</a></h2>
<p>To search the HEK, you need a start time, an end time, and an event
type.  Times are specified as Python datetime objects.  Event types
are specified as upper case, two letter strings, and are identical to
the two letter abbreviations found at the HEK website,
<a class="reference external" href="http://www.lmsal.com/hek/VOEvent_Spec.html">http://www.lmsal.com/hek/VOEvent_Spec.html</a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tstart</span> <span class="o">=</span> <span class="s">&#39;2011/08/09 07:23:56&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tend</span> <span class="o">=</span> <span class="s">&#39;2011/08/09 12:40:29&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event_type</span> <span class="o">=</span> <span class="s">&#39;FL&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="n">tstart</span><span class="p">,</span><span class="n">tend</span><span class="p">),</span><span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">EventType</span><span class="p">(</span><span class="n">event_type</span><span class="p">))</span>
</pre></div>
</div>
<p>The first line in the block of code above imports the datetime module.
The second and third lines define the search start and end times.  The
fourth line specifies the event type, in this &#8216;FL&#8217; or flare.  Line 5
goes out to the web, contacts the HEK, and queries it for the
information you have requested.  Event data for ALL flares available
in the HEK within the time range 2011/08/09 07:23: 56 UT - 2011/08/09
12:40:20 UT will be returned, regardless of which feature recognition
method used to detect the flare.</p>
<p>Let&#8217;s break down the arguments of client.query.  The first argument:</p>
<blockquote>
<div>hek.attrs.Time(tstart,tend)</div></blockquote>
<p>sets the start and end times for the query.  The second argument:</p>
<blockquote>
<div>hek.attrs.EventType(event_type)</div></blockquote>
<p>sets the type of event to look for.  Since we have defined event_type
= &#8216;FL&#8217;, this sets the query to look for flares.  We could have also
set the flare event type using the syntax</p>
<blockquote>
<div>hek.attrs.FL</div></blockquote>
<p>There is more on the attributes of hek.attrs in section 4 of this
guide.</p>
</div>
<div class="section" id="the-result">
<h2>3. The result<a class="headerlink" href="#the-result" title="Permalink to this headline">¶</a></h2>
<p>So, how many flare detections did the query turn up?</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">19</span>
</pre></div>
</div>
<p>The object returned by the above query is a list of Python dictionary
objects.  Each dictionary consists of key-value pairs that exactly
correspond to the parameters listed at
<a class="reference external" href="http://www.lmsal.com/hek/VOEvent_Spec.html">http://www.lmsal.com/hek/VOEvent_Spec.html</a>. You can inspect all the
dictionary keys very simply:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[u&#39;skel_startc1&#39;,</span>
<span class="go"> u&#39;concept&#39;,</span>
<span class="go"> u&#39;frm_versionnumber&#39;,</span>
<span class="go"> u&#39;hrc_coord&#39;,</span>
<span class="go"> u&#39;refs_orig&#39;,....</span>
</pre></div>
</div>
<p>and so on.  Remember, the HEK query we made returns all the flares in
the time-range stored in the HEK, regardless of the feature
recognition method.  The HEK parameter which stores the the feature
recognition method is called &#8220;frm_name&#8221;. Using list comprehensions
(which are very cool), it is easy to get a list of the feature
recognition methods used to find each of the flares in the result
object, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s">&quot;frm_name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>
<span class="go">[u&#39;asainz&#39;,</span>
<span class="go"> u&#39;asainz&#39;,</span>
<span class="go"> u&#39;asainz&#39;,</span>
<span class="go"> u&#39;asainz&#39;,</span>
<span class="go"> u&#39;asainz&#39;,</span>
<span class="go"> u&#39;asainz&#39;,</span>
<span class="go"> u&#39;asainz&#39;,</span>
<span class="go"> u&#39;SSW Latest Events&#39;,</span>
<span class="go"> u&#39;SEC standard&#39;,</span>
<span class="go"> u&#39;Flare Detective - Trigger Module&#39;,</span>
<span class="go"> u&#39;Flare Detective - Trigger Module&#39;,</span>
<span class="go"> u&#39;SSW Latest Events&#39;,</span>
<span class="go"> u&#39;SEC standard&#39;,</span>
<span class="go"> u&#39;Flare Detective - Trigger Module&#39;,</span>
<span class="go"> u&#39;Flare Detective - Trigger Module&#39;,</span>
<span class="go"> u&#39;Flare Detective - Trigger Module&#39;,</span>
<span class="go"> u&#39;Flare Detective - Trigger Module&#39;,</span>
<span class="go"> u&#39;Flare Detective - Trigger Module&#39;]</span>
</pre></div>
</div>
<p>It is likely each flare on the Sun was actually detected multiple
times by many different methods.</p>
</div>
<div class="section" id="more-complex-queries">
<h2>4. More complex queries<a class="headerlink" href="#more-complex-queries" title="Permalink to this headline">¶</a></h2>
<p>The HEK client allows you to make more complex queries.  There are two
key features you need to know in order to make use of the full power
of the HEK client.  Firstly, the attribute module - hek.attrs -
describes ALL the parameters stored by the HEK as listed in
<a class="reference external" href="http://www.lmsal.com/hek/VOEvent_Spec.html">http://www.lmsal.com/hek/VOEvent_Spec.html</a>, and the HEK client makes
these parameters searchable.</p>
<p>To explain this, let&#8217;s have a closer look at hek.attrs. The help
command is your friend here; scroll down to section DATA you will see:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">help</span><span class="p">(</span><span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="p">)</span>
<span class="go">AR = &lt;sunpy.net.hek.attrs.AR object&gt;</span>
<span class="go">Area = &lt;sunpy.net.hek.attrs.Area object&gt;</span>
<span class="go">Bound = &lt;sunpy.net.hek.attrs.Bound object&gt;</span>
<span class="go">BoundBox = &lt;sunpy.net.hek.attrs.BoundBox object&gt;</span>
<span class="go">CC = &lt;sunpy.net.hek.attrs.CC object&gt;</span>
<span class="go">CD = &lt;sunpy.net.hek.attrs.CD object&gt;</span>
<span class="go">CE = &lt;sunpy.net.hek.attrs.CE object&gt;</span>
<span class="go">CH = &lt;sunpy.net.hek.attrs.EventType object&gt;</span>
<span class="go">CJ = &lt;sunpy.net.hek.attrs.EventType object&gt;</span>
<span class="go">CR = &lt;sunpy.net.hek.attrs.EventType object&gt;</span>
<span class="go">CW = &lt;sunpy.net.hek.attrs.EventType object&gt;</span>
<span class="go">EF = &lt;sunpy.net.hek.attrs.EF object&gt;</span>
<span class="go">ER = &lt;sunpy.net.hek.attrs.EventType object&gt;</span>
<span class="go">Event = &lt;sunpy.net.hek.attrs.Event object&gt;</span>
<span class="go">FA = &lt;sunpy.net.hek.attrs.EventType object&gt;</span>
<span class="go">FE = &lt;sunpy.net.hek.attrs.EventType object&gt;</span>
<span class="go">FI = &lt;sunpy.net.hek.attrs.FI object&gt;</span>
<span class="go">FL = &lt;sunpy.net.hek.attrs.FL object&gt;</span>
<span class="go">FRM = &lt;sunpy.net.hek.attrs.FRM object&gt;</span>
<span class="go">etc etc...</span>
</pre></div>
</div>
<p>The object hek.attrs knows the attributes of the HEK.  You&#8217;ll see that
one of the attributes is a flare object</p>
<blockquote>
<div>FL = &lt;sunpy.net.hek.attrs.FL object&gt;</div></blockquote>
<p>We can replace hek.attrs.EventType(&#8216;FL&#8217;) with hek.attrs.FL - they do
the same thing, setting the query to look for flare events.  Both
methods of setting the event type are provided as a convenience</p>
<p>Let&#8217;s look further at the FRM attribute:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">help</span><span class="p">(</span><span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">FRM</span><span class="p">)</span>
<span class="go">Help on FRM in module sunpy.net.hek.attrs object:</span>
<span class="go">class FRM(__builtin__.object)</span>
<span class="go"> |  Data descriptors defined here:</span>
<span class="go"> |</span>
<span class="go"> |  __dict__</span>
<span class="go"> |      dictionary for instance variables (if defined)</span>
<span class="go"> |</span>
<span class="go"> |  __weakref__</span>
<span class="go"> |      list of weak references to the object (if defined)</span>
<span class="go"> |</span>
<span class="go"> |  ----------------------------------------------------------------------</span>
<span class="go"> |  Data and other attributes defined here:</span>
<span class="go"> |</span>
<span class="go"> |  Contact = &lt;sunpy.net.hek.attrs._StringParamAttrWrapper object&gt;</span>
<span class="go"> |</span>
<span class="go"> |  HumanFlag = &lt;sunpy.net.hek.attrs._StringParamAttrWrapper object&gt;</span>
<span class="go"> |</span>
<span class="go"> |  Identifier = &lt;sunpy.net.hek.attrs._StringParamAttrWrapper object&gt;</span>
<span class="go"> |</span>
<span class="go"> |  Institute = &lt;sunpy.net.hek.attrs._StringParamAttrWrapper object&gt;</span>
<span class="go"> |</span>
<span class="go"> |  Name = &lt;sunpy.net.hek.attrs._StringParamAttrWrapper object&gt;</span>
<span class="go"> |</span>
<span class="go"> |  ParamSet = &lt;sunpy.net.hek.attrs._StringParamAttrWrapper object&gt;</span>
<span class="go"> |</span>
<span class="go"> |  SpecificID = &lt;sunpy.net.hek.attrs._StringParamAttrWrapper object&gt;</span>
<span class="go"> |</span>
<span class="go"> |  URL = &lt;sunpy.net.hek.attrs._StringParamAttrWrapper object&gt;</span>
<span class="go"> |</span>
<span class="go"> |  VersionNumber = &lt;sunpy.net.hek.attrs._StringParamAttrWrapper object&gt;</span>
</pre></div>
</div>
<p>Let&#8217;s say I am only interested in those flares identified by the SSW
Latest Events tool.  I can retrieve those entries only from the HEK
with the following command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span> <span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="n">tstart</span><span class="p">,</span><span class="n">tend</span><span class="p">),</span> <span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">EventType</span><span class="p">(</span><span class="n">event_type</span><span class="p">),</span> <span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">FRM</span><span class="o">.</span><span class="n">Name</span> <span class="o">==</span> <span class="s">&#39;SSW Latest Events&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<p>We can also retrieve all the entries in the time range which were not
made by SSW Latest Events with the following command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span> <span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="n">tstart</span><span class="p">,</span><span class="n">tend</span><span class="p">),</span> <span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">EventType</span><span class="p">(</span><span class="n">event_type</span><span class="p">),</span><span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">FRM</span><span class="o">.</span><span class="n">Name</span> <span class="o">!=</span> <span class="s">&#39;SSW Latest Events&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">17</span>
</pre></div>
</div>
<p>We are using Python&#8217;s comparison operators to filter the returns from
the HEK client.  Other comparisons are possible.  For example, let&#8217;s
say I want all the flares that have a peak flux of over 4000.0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="n">tstart</span><span class="p">,</span><span class="n">tend</span><span class="p">),</span> <span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">EventType</span><span class="p">(</span><span class="n">event_type</span><span class="p">),</span> <span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">FL</span><span class="o">.</span><span class="n">PeakFlux</span> <span class="o">&gt;</span> <span class="mf">4000.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Multiple comparisons can be included.  For example, let&#8217;s say I want
all the flares with a peak flux above 1000 AND west of 800 arcseconds
from disk center of the Sun</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="n">tstart</span><span class="p">,</span><span class="n">tend</span><span class="p">),</span> <span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">EventType</span><span class="p">(</span><span class="n">event_type</span><span class="p">),</span> <span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Coord1</span> <span class="o">&gt;</span> <span class="mi">800</span><span class="p">,</span> <span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">FL</span><span class="o">.</span><span class="n">PeakFlux</span> <span class="o">&gt;</span> <span class="mf">1000.0</span><span class="p">)</span>
</pre></div>
</div>
<p>Multiple comparison operators can be used to filter the results back
from the HEK.</p>
<p>The second important feature about the HEK client is that the
comparisons we&#8217;ve made above can be combined using Python&#8217;s logical
operators.  This makes complex queries easy to create.  However, some
caution is advisable.  Let&#8217;s say I want all the flares west of 50
arcseconds OR have a peak flux over 1000.0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="n">tstart</span><span class="p">,</span><span class="n">tend</span><span class="p">),</span> <span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">EventType</span><span class="p">(</span><span class="n">event_type</span><span class="p">),</span> <span class="p">(</span><span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Coord1</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">FL</span><span class="o">.</span><span class="n">PeakFlux</span> <span class="o">&gt;</span> <span class="mf">1000.0</span><span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
<p>and as a check</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s">&quot;fl_peakflux&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>
<span class="go">[None,</span>
<span class="go">None,</span>
<span class="go">None,</span>
<span class="go">None,</span>
<span class="go">None,</span>
<span class="go">None,</span>
<span class="go">None,</span>
<span class="go">2326.86,</span>
<span class="go">1698.83,</span>
<span class="go">None,</span>
<span class="go">None,</span>
<span class="go">2360.49,</span>
<span class="go">3242.64,</span>
<span class="go">1375.93,</span>
<span class="go">6275.98,</span>
<span class="go">923.984]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s">&quot;event_coord1&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>
<span class="go">[51,</span>
<span class="go">51,</span>
<span class="go">51,</span>
<span class="go">924,</span>
<span class="go">924,</span>
<span class="go">924,</span>
<span class="go">69,</span>
<span class="go">883.2,</span>
<span class="go">883.2,</span>
<span class="go">69,</span>
<span class="go">69,</span>
<span class="go">883.2,</span>
<span class="go">883.2,</span>
<span class="go">883.2,</span>
<span class="go">883.2,</span>
<span class="go">883.2]</span>
</pre></div>
</div>
<p>Note that some of the fluxes are returned as &#8220;None&#8221;.  This is because
some feature recognition methods for flares do not report the peak
flux.  However, because the location of event_coord1 is greater than
50, the entry from the HEK for that flare detection is returned.</p>
<p>Let&#8217;s say we want all the flares west of 50 arcseconds AND have a peak
flux over 1000.0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="n">tstart</span><span class="p">,</span><span class="n">tend</span><span class="p">),</span> <span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">EventType</span><span class="p">(</span><span class="n">event_type</span><span class="p">),</span> <span class="p">(</span><span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Coord1</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">hek</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">FL</span><span class="o">.</span><span class="n">PeakFlux</span> <span class="o">&gt;</span> <span class="mf">1000.0</span><span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s">&quot;fl_peakflux&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>
<span class="go">[2326.86, 1698.83, 2360.49, 3242.64, 1375.93, 6275.98]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s">&quot;event_coord1&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>
<span class="go">[883.2, 883.2, 883.2, 883.2, 883.2, 883.2]</span>
</pre></div>
</div>
<p>In this case none of the peak fluxes are returned with the value
&#8220;None&#8221;.  Since we are using an &#8220;and&#8221; logical operator we need a result
from the &#8220;(hek.attrs.FL.PeakFlux &gt; 1000.0)&#8221; filter.  Flares that have
&#8220;None&#8221; for a peak flux cannot provide this, and so are excluded.  The
&#8220;None&#8221; type in this context effectively means &#8220;Don&#8217;t know&#8221;; in such
cases the client returns only those results from the HEK that
definitely satisfy the criteria passed to it.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/sunpy_logo_compact_192x239.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Using SunPy&#8217;s HEK module</a><ul>
<li><a class="reference internal" href="#setting-up-the-client">1. Setting up the client</a></li>
<li><a class="reference internal" href="#a-simple-query">2. A simple query</a></li>
<li><a class="reference internal" href="#the-result">3. The result</a></li>
<li><a class="reference internal" href="#more-complex-queries">4. More complex queries</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="maps.html"
                        title="previous chapter">Maps</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="spectra.html"
                        title="next chapter">Spectra</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/guide/hek.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="spectra.html" title="Spectra"
             >next</a> |</li>
        <li class="right" >
          <a href="maps.html" title="Maps"
             >previous</a> |</li>
        <li><a href="../index.html">SunPy 0.2.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >SunPy User Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, SunPy Community.
      Last updated on Mar 06, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>