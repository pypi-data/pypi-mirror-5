

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>A brief tour of SunPy &mdash; SunPy 0.2.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="SunPy 0.2.0 documentation" href="../index.html" />
    <link rel="up" title="SunPy User Guide" href="index.html" />
    <link rel="next" title="Plotting in SunPy" href="plotting.html" />
    <link rel="prev" title="Windows" href="installation/win.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="Plotting in SunPy"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation/win.html" title="Windows"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">SunPy 0.2.0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">SunPy User Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="a-brief-tour-of-sunpy">
<h1>A brief tour of SunPy<a class="headerlink" href="#a-brief-tour-of-sunpy" title="Permalink to this headline">¶</a></h1>
<p>Welcome to the SunPy tutorial! This brief tutorial will walk you through some
of the functionality currently offered by SunPy. Start by reading this tutorial
and trying out some of the examples demonstrated. Once you&#8217;ve completed the
tutorial check out the <a class="reference internal" href="../reference/index.html"><em>code reference</em></a> for a more
thorough look at the functionality available.</p>
<div class="section" id="maps">
<h2>1. Maps<a class="headerlink" href="#maps" title="Permalink to this headline">¶</a></h2>
<p>Maps are the primary data type in SunPy they are spatially and / or temporally aware
data arrays. There are types of maps for a 2D image, a time series of 2D images or
1D spectra or 2D spectrograms. Making a map of your data is the normally the first
step in using SunPy to work with your data.</p>
<p><strong>Creating a Map</strong></p>
<p>SunPy supports many different data products from various sources &#8216;out of the box&#8217; we
shall use SDO&#8217;s AIA instrument as an example in this tutorial. The general way to create
a map from one of the supported data products is with the <em class="xref py py-obj">sunpy.make_map()</em> command.</p>
<p><em class="xref py py-obj">sunpy.make_map()</em> takes either a filename, list of filenames data array and header. We can test map with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sunpy</span>
<span class="n">aia</span> <span class="o">=</span> <span class="n">sunpy</span><span class="o">.</span><span class="n">make_map</span><span class="p">(</span><span class="n">sunpy</span><span class="o">.</span><span class="n">AIA_171_IMAGE</span><span class="p">)</span>
</pre></div>
</div>
<p>This returns a map named aia which can be maniputated with standard SunPy map commands.
For more information about maps checkout the <a class="reference internal" href="maps.html"><em>map guide</em></a>.</p>
</div>
<div class="section" id="plotting">
<h2>2. Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s begin by creating a simple plot of an AIA image. To make things easy,
SunPy includes several example files which are used throughout the docs. These
files have names like <tt class="xref py py-obj docutils literal"><span class="pre">sunpy.AIA_171_IMAGE</span></tt> and <tt class="xref py py-obj docutils literal"><span class="pre">sunpy.RHESSI_IMAGE</span></tt>.</p>
<p>Try typing the below example into your interactive Python shell:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sunpy</span>
<span class="n">aia</span> <span class="o">=</span> <span class="n">sunpy</span><span class="o">.</span><span class="n">make_map</span><span class="p">(</span><span class="n">sunpy</span><span class="o">.</span><span class="n">AIA_171_IMAGE</span><span class="p">)</span>
<span class="n">aia</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
</pre></div>
</div>
<p>If everything has been configured properly you should see an AIA image with
a red colormap, a colorbar on the right-hand side and a title and some
labels.</p>
<img alt="../_images/plotting_ex1.png" src="../_images/plotting_ex1.png" />
<p>There is lot going on here, but we will walk you through the example. Briefly,
the first line is just importing SunPy. On the second line we create a
SunPy Map object which is basically just a spatially-aware image or data array.
On the last line we then plot the map object, using the built in &#8216;quick plot&#8217; function <em class="xref py py-obj">peek()</em>.</p>
<p>SunPy uses a matplotlib like interface to it&#8217;s plotting so more complex plots can be built by combining
SunPy with matplotlib:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sunpy</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">aia</span> <span class="o">=</span> <span class="n">sunpy</span><span class="o">.</span><span class="n">make_map</span><span class="p">(</span><span class="n">sunpy</span><span class="o">.</span><span class="n">AIA_171_IMAGE</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>

<span class="n">aia</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="n">aia</span><span class="o">.</span><span class="n">draw_limb</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>This should output something like the image below:</p>
<img alt="../_images/plotting_ex3.png" src="../_images/plotting_ex3.png" />
</div>
<div class="section" id="solar-physical-constants">
<h2>3. Solar Physical Constants<a class="headerlink" href="#solar-physical-constants" title="Permalink to this headline">¶</a></h2>
<p>SunPy contains a convienient list of solar-related physical constants. Here is
a short bit of code to get you started:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sunpy.sun</span> <span class="kn">import</span> <span class="n">constants</span> <span class="k">as</span> <span class="n">con</span>

<span class="c"># one astronomical unit (the average distance between the Sun and Earth)</span>
<span class="k">print</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">au</span><span class="p">)</span>

<span class="c"># the solar radius</span>
<span class="k">print</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span>
</pre></div>
</div>
<p>Not all constants have a shortcut assigned to them (as above). The rest of the constants
are stored in a dictionary. The following code grabs the dictionary and gets all of the
keys.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">solar_constants</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">physical_constants</span>
<span class="n">solar_constants</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
<p>You can also use the following function to print out a table of all of the values
available.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">con</span><span class="o">.</span><span class="n">print_all</span><span class="p">()</span>
</pre></div>
</div>
<p>These constants are provided as a convenience so that everyone is using the same
(accepted values). More will be added over time.</p>
</div>
<div class="section" id="working-with-times">
<h2>4. Working with Times<a class="headerlink" href="#working-with-times" title="Permalink to this headline">¶</a></h2>
<p>SunPy also contains a number of convenience functions for working with dates
and times. Here is a short example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sunpy.time</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># parsing a standard time strings</span>
<span class="n">parse_time</span><span class="p">(</span><span class="s">&#39;2004/02/05 12:00&#39;</span><span class="p">)</span>

<span class="c"># This returns a datetime object. All SunPy functions which require</span>
<span class="c"># time as an input sanitize the input using parse_time.</span>
<span class="n">day_of_year</span><span class="p">(</span><span class="s">&#39;2004-Jul-05 12:00:02&#39;</span><span class="p">)</span>

<span class="c"># the julian day</span>
<span class="n">julian_day</span><span class="p">((</span><span class="mi">2010</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">30</span><span class="p">))</span>

<span class="c"># TimeRange objects are useful for representing ranges of time</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">TimeRange</span><span class="p">(</span><span class="s">&#39;2010/03/04 00:10&#39;</span><span class="p">,</span> <span class="s">&#39;2010/03/04 00:20&#39;</span><span class="p">)</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">center</span><span class="p">()</span>
</pre></div>
</div>
<p>For more information about working with time in SunPy checkout the <a class="reference internal" href="time.html"><em>time guide</em></a>.</p>
</div>
<div class="section" id="querying-the-vso">
<h2>5. Querying the VSO<a class="headerlink" href="#querying-the-vso" title="Permalink to this headline">¶</a></h2>
<p>There are a couple different ways to query and download data from the VSO using
SunPy. The method you should use depends first on your preference with respect
to query style: the main method of querying uses a syntax that is unique to
SunPy and may require some getting used to, but is extremely flexible and
powerful. To make it easy for people coming from SSW to get started, a second
&#8220;legacy&#8221; API also exists which works is very much the same way as VSO_GET in
IDL.</p>
<p>Further, for each of the two query APIs there are interactive and
non-interactive versions available, depending on the type of work you are doing.</p>
<p>The below example demonstrates a simple query for SOHO EIT data using the
non-interactive version of the main API:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sunpy.net</span> <span class="kn">import</span> <span class="n">vso</span>

<span class="c"># create a new VSOClient instance</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">vso</span><span class="o">.</span><span class="n">VSOClient</span><span class="p">()</span>

<span class="c"># build our query</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
    <span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">((</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
    <span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Instrument</span><span class="p">(</span><span class="s">&#39;eit&#39;</span><span class="p">)</span>
<span class="p">)</span>

<span class="c"># print the number of matches</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Number of records found: </span><span class="si">%d</span><span class="s"> &quot;</span> <span class="o">%</span> <span class="n">result</span><span class="o">.</span><span class="n">num_records</span><span class="p">())</span>

<span class="c"># download matches to /download/path</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s">&quot;/download/path/{file}&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that specifying a path is optional and if you do not specify one the files
will simply be downloaded into a temporary directory (e.g. /tmp/xyz).
For more information about vso client checkout the <a class="reference internal" href="vso.html"><em>vso guide</em></a>.</p>
</div>
<div class="section" id="querying-helioviewer-org">
<h2>6. Querying Helioviewer.org<a class="headerlink" href="#querying-helioviewer-org" title="Permalink to this headline">¶</a></h2>
<p>SunPy can be used to make several basic requests using the The <a class="reference external" href="http://helioviewer.org/api/">Helioviewer.org API</a>
including generating a PNG and downloading a <a class="reference external" href="http://wiki.helioviewer.org/wiki/JPEG_2000">JPEG 2000</a>
image and loading it into a SunPy Map.</p>
<p>A simple example of a helioviewer quiery is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sunpy.net.helioviewer</span> <span class="kn">import</span> <span class="n">HelioviewerClient</span>

<span class="n">hv</span> <span class="o">=</span> <span class="n">HelioviewerClient</span><span class="p">()</span>
<span class="n">hv</span><span class="o">.</span><span class="n">download_png</span><span class="p">(</span><span class="s">&#39;2099/01/01&#39;</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span> <span class="s">&quot;[SDO,AIA,AIA,304,1,100]&quot;</span><span class="p">,</span> <span class="n">x0</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y0</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
</pre></div>
</div>
<p>This downloads a PNG image of the latest AIA 304 image available on
Helioviewer.org in the <em class="xref py py-obj">download_png</em> command 4.8 refers to the image resolution
in arcseconds per pixel (larger values mean lower resolution), the &#8220;1&#8221; and &#8220;100&#8221; in the
layer string refer to the visibility (visible/hidden) and opacity,
x0 and y0 are the center points about which to focus and the width and height
are the pixel values for the image dimensions.</p>
<p>The result is:</p>
<img alt="../_images/helioviewer_download_png_ex1.png" src="../_images/helioviewer_download_png_ex1.png" />
<p>For more information checkout the <a class="reference internal" href="helioviewer.html"><em>helioviewer guide</em></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/sunpy_logo_compact_192x239.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">A brief tour of SunPy</a><ul>
<li><a class="reference internal" href="#maps">1. Maps</a></li>
<li><a class="reference internal" href="#plotting">2. Plotting</a></li>
<li><a class="reference internal" href="#solar-physical-constants">3. Solar Physical Constants</a></li>
<li><a class="reference internal" href="#working-with-times">4. Working with Times</a></li>
<li><a class="reference internal" href="#querying-the-vso">5. Querying the VSO</a></li>
<li><a class="reference internal" href="#querying-helioviewer-org">6. Querying Helioviewer.org</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation/win.html"
                        title="previous chapter">Windows</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="plotting.html"
                        title="next chapter">Plotting in SunPy</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/guide/tutorial.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="Plotting in SunPy"
             >next</a> |</li>
        <li class="right" >
          <a href="installation/win.html" title="Windows"
             >previous</a> |</li>
        <li><a href="../index.html">SunPy 0.2.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >SunPy User Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, SunPy Community.
      Last updated on Mar 06, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>