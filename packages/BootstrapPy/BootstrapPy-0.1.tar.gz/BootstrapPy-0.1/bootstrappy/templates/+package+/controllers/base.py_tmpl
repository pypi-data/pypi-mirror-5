from bootstrappy.application import WSGIApp
from paste.debug.profile import profile_decorator

from ${package}.model import db


class ControllerBase(WSGIApp):

    def __call__(self, environ, start_response, action, vars):
        try:
            return super(ControllerBase, self).__call__(environ,
                         start_response, action, vars)
        finally:
            db.remove()