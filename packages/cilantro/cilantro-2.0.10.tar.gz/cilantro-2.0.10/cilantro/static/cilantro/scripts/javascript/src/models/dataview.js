// Generated by CoffeeScript 1.6.2
var __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

define(['underscore', 'serrano'], function(_, Serrano) {
  var DataViewHistory, DataViews, history, views, _ref, _ref1;

  DataViews = (function(_super) {
    __extends(DataViews, _super);

    function DataViews() {
      _ref = DataViews.__super__.constructor.apply(this, arguments);
      return _ref;
    }

    DataViews.prototype.url = App.urls.dataviews;

    return DataViews;

  })(Serrano.DataViews);
  DataViewHistory = (function(_super) {
    __extends(DataViewHistory, _super);

    function DataViewHistory() {
      _ref1 = DataViewHistory.__super__.constructor.apply(this, arguments);
      return _ref1;
    }

    DataViewHistory.prototype.url = App.urls.dataviewHistory;

    return DataViewHistory;

  })(Serrano.DataViews);
  views = new DataViews;
  views.on('reset', function() {
    var defaults;

    if (!views.hasSession()) {
      defaults = {
        session: true
      };
      defaults.json = App.defaults.dataview;
      return views.create(defaults);
    }
  });
  history = new DataViewHistory;
  views.fetch();
  history.fetch();
  return App.DataView = views;
});
