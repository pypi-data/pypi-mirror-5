<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pyxmpp2.xmppserializer.XMPPSerializer</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pyxmpp2-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="https://github.com/Jajcus/pyxmpp2/">PyXMPP2</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="pyxmpp2-module.html">Package&nbsp;pyxmpp2</a> ::
        <a href="pyxmpp2.xmppserializer-module.html">Module&nbsp;xmppserializer</a> ::
        Class&nbsp;XMPPSerializer
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class XMPPSerializer</h1><p class="nomargin-top"></p>
<center>
<center>  <map id="class_hierarchy_for_xmppserial" name="class_hierarchy_for_xmppserial">
<area shape="rect" id="node1" href="pyxmpp2.xmppserializer.XMPPSerializer-class.html" title="XMPPSerializer" alt="" coords="5,6,125,31"/>
</map>
  <img src="class_hierarchy_for_xmppserial.gif" alt='' usemap="#class_hierarchy_for_xmppserial" ismap="ismap" class="graph-without-title" />
</center>
</center>
<hr />
<p>Implementation of the XMPP serializer.</p>
<p>Single instance of this class should be used for a single stream and never
reused. It will keep track of prefixes declared on the root element and
used later.</p>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyxmpp2.xmppserializer.XMPPSerializer-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">stanza_namespace</span>,
        <span class="summary-sig-arg">extra_prefixes</span>=<span class="summary-sig-default">None</span>)</span><br />
      x.__init__(...) initializes x; see help(type(x)) for signature</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyxmpp2.xmppserializer.XMPPSerializer-class.html#add_prefix" class="summary-sig-name">add_prefix</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">namespace</span>,
        <span class="summary-sig-arg">prefix</span>)</span><br />
      Add a new namespace prefix.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyxmpp2.xmppserializer.XMPPSerializer-class.html#emit_head" class="summary-sig-name">emit_head</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">stream_from</span>,
        <span class="summary-sig-arg">stream_to</span>,
        <span class="summary-sig-arg">stream_id</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">version</span>=<span class="summary-sig-default"><code class="variable-quote">u'</code><code class="variable-string">1.0</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">language</span>=<span class="summary-sig-default">None</span>)</span><br />
      Return the opening tag of the stream root element.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="emit_tail"></a><span class="summary-sig-name">emit_tail</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Return the end tag of the stream root element.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code class="link">unicode</code>, <code class="link">unicode</code></span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyxmpp2.xmppserializer.XMPPSerializer-class.html#_split_qname" class="summary-sig-name" onclick="show_private();">_split_qname</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">name</span>,
        <span class="summary-sig-arg">is_element</span>)</span><br />
      Split an element of attribute qname into namespace and local
name.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code class="link">unicode</code></span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyxmpp2.xmppserializer.XMPPSerializer-class.html#_make_prefix" class="summary-sig-name" onclick="show_private();">_make_prefix</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">declared_prefixes</span>)</span><br />
      Make up a new namespace prefix, which won't conflict
with <a href="pyxmpp2.xmppserializer.XMPPSerializer-class.html#_prefixes" class="link" onclick="show_private();">_prefixes</a> and prefixes declared in the current scope.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code class="link">unicode</code></span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyxmpp2.xmppserializer.XMPPSerializer-class.html#_make_prefixed" class="summary-sig-name" onclick="show_private();">_make_prefixed</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">name</span>,
        <span class="summary-sig-arg">is_element</span>,
        <span class="summary-sig-arg">declared_prefixes</span>,
        <span class="summary-sig-arg">declarations</span>)</span><br />
      Return namespace-prefixed tag or attribute name.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code class="link">unicode</code></span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyxmpp2.xmppserializer.XMPPSerializer-class.html#_emit_element" class="summary-sig-name" onclick="show_private();">_emit_element</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">element</span>,
        <span class="summary-sig-arg">level</span>,
        <span class="summary-sig-arg">declared_prefixes</span>)</span><br />
      &quot;Recursive XML element serializer.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code class="link">unicode</code></span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyxmpp2.xmppserializer.XMPPSerializer-class.html#emit_stanza" class="summary-sig-name">emit_stanza</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">element</span>)</span><br />
      &quot;Serialize a stanza.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== STATIC METHODS ==================== -->
<a name="section-StaticMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Static Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-StaticMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code class="link">unicode</code></span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyxmpp2.xmppserializer.XMPPSerializer-class.html#_make_ns_declarations" class="summary-sig-name" onclick="show_private();">_make_ns_declarations</a>(<span class="summary-sig-arg">declarations</span>,
        <span class="summary-sig-arg">declared_prefixes</span>)</span><br />
      Build namespace declarations and remove obsoleted mappings
from <code class="link">declared_prefixes</code>.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== INSTANCE VARIABLES ==================== -->
<a name="section-InstanceVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code class="link">bool</code></span>
    </td><td class="summary">
        <a name="_head_emitted"></a><span class="summary-name">_head_emitted</span><br />
      <code class="link">True</code> if the stream start tag has been emitted
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code class="link">int</code></span>
    </td><td class="summary">
        <a name="_next_id"></a><span class="summary-name">_next_id</span><br />
      the next sequence number to be used in auto-generated
prefixes.
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code class="link">dict</code></span>
    </td><td class="summary">
        <a name="_prefixes"></a><span class="summary-name">_prefixes</span><br />
      mapping (prefix -&gt; uri) of known namespace prefixes
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code class="link">dict</code></span>
    </td><td class="summary">
        <a name="_root_prefixes"></a><span class="summary-name">_root_prefixes</span><br />
      prefixes declared on the root element
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code class="link">unicode</code></span>
    </td><td class="summary">
        <a name="stanza_namespace"></a><span class="summary-name">stanza_namespace</span><br />
      the default namespace of the stream
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">stanza_namespace</span>,
        <span class="sig-arg">extra_prefixes</span>=<span class="sig-default">None</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  x.__init__(...) initializes x; see help(type(x)) for signature
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>stanza_namespace</code></strong> (<code class="link">unicode</code>) - the default namespace used for XMPP stanzas.
E.g. 'jabber:client' for c2s connections.</li>
        <li><strong class="pname"><code>extra_prefixes</code></strong> (<code class="link">unicode</code> to <code class="link">unicode</code> mapping.) - mapping of namespaces to prefixes (not the
other way) to be used on the stream. These prefixes will be
declared on the root element and used in all descendants. That
may be used to optimize the stream for size.</li>
    </ul></dd>
    <dt>Overrides:
        object.__init__
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="add_prefix"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">add_prefix</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">namespace</span>,
        <span class="sig-arg">prefix</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Add a new namespace prefix.</p>
<p>If the root element has not yet been emitted the prefix will
be declared there, otherwise the prefix will be declared on the
top-most element using this namespace in every stanza.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>namespace</code></strong> (<code class="link">unicode</code>) - the namespace URI</li>
        <li><strong class="pname"><code>prefix</code></strong> (<code class="link">unicode</code>) - the prefix string</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="emit_head"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">emit_head</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">stream_from</span>,
        <span class="sig-arg">stream_to</span>,
        <span class="sig-arg">stream_id</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">version</span>=<span class="sig-default"><code class="variable-quote">u'</code><code class="variable-string">1.0</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">language</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  Return the opening tag of the stream root element.
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>stream_from</code></strong> (<code class="link">unicode</code>) - the 'from' attribute of the stream. May be <code class="link">None</code>.</li>
        <li><strong class="pname"><code>stream_to</code></strong> (<code class="link">unicode</code>) - the 'to' attribute of the stream. May be <code class="link">None</code>.</li>
        <li><strong class="pname"><code>version</code></strong> (<code class="link">unicode</code>) - the 'version' of the stream.</li>
        <li><strong class="pname"><code>language</code></strong> (<code class="link">unicode</code>) - the 'xml:lang' of the stream</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_split_qname"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_split_qname</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">name</span>,
        <span class="sig-arg">is_element</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  Split an element of attribute qname into namespace and local
name.
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>name</code></strong> (<code class="link">unicode</code>) - element or attribute QName</li>
        <li><strong class="pname"><code>is_element</code></strong> (<code class="link">bool</code>) - <code class="link">True</code> for an element, <code class="link">False</code> for an attribute</li>
    </ul></dd>
    <dt>Returns: <code class="link">unicode</code>, <code class="link">unicode</code></dt>
        <dd>namespace URI, local name</dd>
  </dl>
</td></tr></table>
</div>
<a name="_make_prefix"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_make_prefix</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">declared_prefixes</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  Make up a new namespace prefix, which won't conflict
with <a href="pyxmpp2.xmppserializer.XMPPSerializer-class.html#_prefixes" class="link" onclick="show_private();">_prefixes</a> and prefixes declared in the current scope.
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>declared_prefixes</code></strong> (<code class="link">unicode</code> to <code class="link">unicode</code> dictionary) - namespace to prefix mapping for the current
scope</li>
    </ul></dd>
    <dt>Returns: <code class="link">unicode</code></dt>
        <dd>a new prefix</dd>
  </dl>
</td></tr></table>
</div>
<a name="_make_prefixed"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_make_prefixed</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">name</span>,
        <span class="sig-arg">is_element</span>,
        <span class="sig-arg">declared_prefixes</span>,
        <span class="sig-arg">declarations</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Return namespace-prefixed tag or attribute name.</p>
<p>Add appropriate declaration to <code class="link">declarations</code> when neccessary.</p>
<p>If no prefix for an element namespace is defined, make the elements
namespace default (no prefix). For attributes, make up a prefix in such
case.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>name</code></strong> (<code class="link">unicode</code>) - QName ('{namespace-uri}local-name')
to convert</li>
        <li><strong class="pname"><code>is_element</code></strong> (<code class="link">bool</code>) - <code class="link">True</code> for element, <code class="link">False</code> for an attribute</li>
        <li><strong class="pname"><code>declared_prefixes</code></strong> (<code class="link">unicode</code> to <code class="link">unicode</code> dictionary) - mapping of prefixes already declared
at this scope</li>
        <li><strong class="pname"><code>declarations</code></strong> (<code class="link">unicode</code> to <code class="link">unicode</code> dictionary) - XMLNS declarations on the current element.</li>
    </ul></dd>
    <dt>Returns: <code class="link">unicode</code></dt>
  </dl>
</td></tr></table>
</div>
<a name="_make_ns_declarations"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_make_ns_declarations</span>(<span class="sig-arg">declarations</span>,
        <span class="sig-arg">declared_prefixes</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  Build namespace declarations and remove obsoleted mappings
from <code class="link">declared_prefixes</code>.
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>declarations</code></strong> (<code class="link">unicode</code> to <code class="link">unicode</code> dictionary) - namespace to prefix mapping of the new
declarations</li>
        <li><strong class="pname"><code>declared_prefixes</code></strong> (<code class="link">unicode</code> to <code class="link">unicode</code> dictionary) - namespace to prefix mapping of already
declared prefixes.</li>
    </ul></dd>
    <dt>Returns: <code class="link">unicode</code></dt>
        <dd>string of namespace declarations to be used in a start tag</dd>
  </dl>
</td></tr></table>
</div>
<a name="_emit_element"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_emit_element</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">element</span>,
        <span class="sig-arg">level</span>,
        <span class="sig-arg">declared_prefixes</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  &quot;Recursive XML element serializer.
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>element</code></strong> (<a class="rst-reference external" href="http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" target="_top"><tt class="rst-docutils literal">ElementTree.Element</tt></a>) - the element to serialize</li>
        <li><strong class="pname"><code>level</code></strong> (<code class="link">int</code>) - nest level (0 - root element, 1 - stanzas, etc.)</li>
        <li><strong class="pname"><code>declared_prefixes</code></strong> (<code class="link">unicode</code> to <code class="link">unicode</code> dictionary) - namespace to prefix mapping of already
declared prefixes.</li>
    </ul></dd>
    <dt>Returns: <code class="link">unicode</code></dt>
        <dd>serialized element</dd>
  </dl>
</td></tr></table>
</div>
<a name="emit_stanza"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">emit_stanza</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">element</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>&quot;Serialize a stanza.</p>
<p>Must be called after <a href="pyxmpp2.xmppserializer.XMPPSerializer-class.html#emit_head" class="link">emit_head</a>.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>element</code></strong> (<a class="rst-reference external" href="http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" target="_top"><tt class="rst-docutils literal">ElementTree.Element</tt></a>) - the element to serialize</li>
    </ul></dd>
    <dt>Returns: <code class="link">unicode</code></dt>
        <dd>serialized element</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pyxmpp2-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="https://github.com/Jajcus/pyxmpp2/">PyXMPP2</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    <a href="epydoc-log.html">Generated by Epydoc
    3.0.1 on Sun Sep 22 12:47:38 2013</a>
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
