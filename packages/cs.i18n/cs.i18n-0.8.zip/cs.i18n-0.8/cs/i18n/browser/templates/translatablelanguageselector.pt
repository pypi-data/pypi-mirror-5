<tal:language
    tal:define="available view/available;
                languages view/languages;
                showFlags view/showFlags;">
    <ul id="portal-languageselector"
        tal:condition="python:available and len(languages)>=2">
      <tal:langs repeat="lang languages">
        <li tal:define="code lang/code;
                        selected lang/selected;
                        url lang/url|string:${here/absolute_url}/switchLanguage?set_language=${code};"
            tal:condition="not:selected">
          <a href=""
             tal:define="flag lang/flag|nothing;
                         name lang/native|lang/name;"
             tal:attributes="href url;
                             title name">
            <tal:flag condition="python:flag and showFlags">
              <img width="14"
                   height="11"
                   alt=""
                   tal:attributes="src string:${view/portal_url}${flag};
                                   title python: name;
                                   class python: selected and 'currentItem' or '';" />
            </tal:flag>
          <tal:nonflag condition="not:python:flag and showFlags"><span tal:replace="name">language code</span></tal:nonflag></a>
        </li>
      </tal:langs>
    </ul>
</tal:language>
