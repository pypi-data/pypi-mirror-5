<upgrade xmlns="http://www.unifiedbpm.se/XMLschema/DBUpgrader" xmlns:sql="http://www.unifiedbpm.se/XMLschema/DAL/SQL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.unifiedbpm.se/XMLschema/DBUpgrader ../DB_Upgrader.xsd ">
	
	<upgrader_version>1</upgrader_version>
	<application_guid>{5113f800-c87b-11df-afd4-0002a5d5c51bs}</application_guid>
	<application_name>DBUpgrader</application_name>
	<application_description>A database upgrade handling system.</application_description>
	<steps>
		<step>
			<step_id>1</step_id>
			<step_guid>{fad61291-5d95-43fd-9937-85b8cad7bc8f}</step_guid>
			<step_description>Adds the tables that logs upgrade steps and applications, and adds the the upgrader itself.</step_description>
			<statements>
				<sql:statement xmlns=""><sql:Verb_CREATE_TABLE><sql:name>__Application</sql:name><sql:constraints><sql:Parameter_Constraint><sql:checkconditions/><sql:references><sql:Parameter_Identifier><sql:prefix></sql:prefix><sql:identifier>ApplicationGUID</sql:identifier><sql:operator></sql:operator></sql:Parameter_Identifier></sql:references><sql:name>PK__Application_ApplicationGUID</sql:name><sql:constraint_type>PRIMARY KEY</sql:constraint_type></sql:Parameter_Constraint></sql:constraints><sql:columns><sql:Parameter_ColumnDefinition><sql:default></sql:default><sql:name>ApplicationGUID</sql:name><sql:notnull>true</sql:notnull><sql:datatype>string(255)</sql:datatype></sql:Parameter_ColumnDefinition><sql:Parameter_ColumnDefinition><sql:default></sql:default><sql:name>Name</sql:name><sql:notnull>true</sql:notnull><sql:datatype>string(255)</sql:datatype></sql:Parameter_ColumnDefinition><sql:Parameter_ColumnDefinition><sql:default></sql:default><sql:name>Description</sql:name><sql:notnull>true</sql:notnull><sql:datatype>string(3000)</sql:datatype></sql:Parameter_ColumnDefinition><sql:Parameter_ColumnDefinition><sql:default>::curruser::</sql:default><sql:name>CreatedBy</sql:name><sql:notnull>true</sql:notnull><sql:datatype>string(255)</sql:datatype></sql:Parameter_ColumnDefinition><sql:Parameter_ColumnDefinition><sql:default>::currdatetime::</sql:default><sql:name>CreatedWhen</sql:name><sql:notnull>true</sql:notnull><sql:datatype>timestamp</sql:datatype></sql:Parameter_ColumnDefinition></sql:columns></sql:Verb_CREATE_TABLE></sql:statement>
				<sql:statement xmlns=""><sql:Verb_CREATE_TABLE><sql:name>__StepLog</sql:name><sql:constraints><sql:Parameter_Constraint><sql:checkconditions/><sql:references><sql:Parameter_Identifier><sql:prefix></sql:prefix><sql:identifier>StepLogID</sql:identifier><sql:operator></sql:operator></sql:Parameter_Identifier><sql:Parameter_Identifier><sql:prefix></sql:prefix><sql:identifier>ApplicationGUID</sql:identifier><sql:operator></sql:operator></sql:Parameter_Identifier></sql:references><sql:name>PK__StepLog_StepID_ApplicationGUID</sql:name><sql:constraint_type>PRIMARY KEY</sql:constraint_type></sql:Parameter_Constraint><sql:Parameter_Constraint><sql:checkconditions/><sql:references><sql:Parameter_Identifier><sql:prefix></sql:prefix><sql:identifier>StepLogGUID</sql:identifier><sql:operator></sql:operator></sql:Parameter_Identifier></sql:references><sql:name>UQ__StepLog_StepLogGUID</sql:name><sql:constraint_type>UNIQUE</sql:constraint_type></sql:Parameter_Constraint><sql:Parameter_Constraint><sql:checkconditions/><sql:references><sql:Parameter_Identifier><sql:prefix></sql:prefix><sql:identifier>ApplicationGUID</sql:identifier><sql:operator></sql:operator></sql:Parameter_Identifier><sql:Parameter_Identifier><sql:prefix></sql:prefix><sql:identifier>__Application</sql:identifier><sql:operator></sql:operator></sql:Parameter_Identifier><sql:Parameter_Identifier><sql:prefix></sql:prefix><sql:identifier>ApplicationGUID</sql:identifier><sql:operator></sql:operator></sql:Parameter_Identifier></sql:references><sql:name>FK__StepLog___Application_ApplicationGUID</sql:name><sql:constraint_type>FOREIGN KEY</sql:constraint_type></sql:Parameter_Constraint></sql:constraints><sql:columns><sql:Parameter_ColumnDefinition><sql:default></sql:default><sql:name>StepLogID</sql:name><sql:notnull>true</sql:notnull><sql:datatype>integer</sql:datatype></sql:Parameter_ColumnDefinition><sql:Parameter_ColumnDefinition><sql:default></sql:default><sql:name>StepLogGUID</sql:name><sql:notnull>true</sql:notnull><sql:datatype>string(255)</sql:datatype></sql:Parameter_ColumnDefinition><sql:Parameter_ColumnDefinition><sql:default></sql:default><sql:name>ApplicationGUID</sql:name><sql:notnull>true</sql:notnull><sql:datatype>string(255)</sql:datatype></sql:Parameter_ColumnDefinition><sql:Parameter_ColumnDefinition><sql:default></sql:default><sql:name>Description</sql:name><sql:notnull>false</sql:notnull><sql:datatype>string(3000)</sql:datatype></sql:Parameter_ColumnDefinition><sql:Parameter_ColumnDefinition><sql:default>::curruser::</sql:default><sql:name>CreatedBy</sql:name><sql:notnull>true</sql:notnull><sql:datatype>string(255)</sql:datatype></sql:Parameter_ColumnDefinition><sql:Parameter_ColumnDefinition><sql:default>::currdatetime::</sql:default><sql:name>CreatedWhen</sql:name><sql:notnull>true</sql:notnull><sql:datatype>timestamp</sql:datatype></sql:Parameter_ColumnDefinition></sql:columns></sql:Verb_CREATE_TABLE></sql:statement>
				<sql:statement xmlns=""><sql:Verb_INSERT><sql:destination_identifier><sql:prefix/><sql:identifier>__Application</sql:identifier><sql:operator/></sql:destination_identifier><sql:column_identifiers><sql:Parameter_Identifier><sql:prefix/><sql:identifier>ApplicationGUID</sql:identifier><sql:operator/></sql:Parameter_Identifier><sql:Parameter_Identifier><sql:prefix/><sql:identifier>Name</sql:identifier><sql:operator/></sql:Parameter_Identifier><sql:Parameter_Identifier><sql:prefix/><sql:identifier>Description</sql:identifier><sql:operator/></sql:Parameter_Identifier></sql:column_identifiers><sql:data><sql:Verb_SELECT><sql:order_by/><sql:fields><sql:Parameter_Field><sql:alias>ApplicationGUID</sql:alias><sql:expression><sql:Parameter_String><sql:string_value>{5113f800-c87b-11df-afd4-0002a5d5c51b}</sql:string_value><sql:escape_character/><sql:operator>C</sql:operator></sql:Parameter_String></sql:expression></sql:Parameter_Field><sql:Parameter_Field><sql:alias>Name</sql:alias><sql:expression><sql:Parameter_String><sql:string_value>DBUpgrader</sql:string_value><sql:escape_character/><sql:operator>C</sql:operator></sql:Parameter_String></sql:expression></sql:Parameter_Field><sql:Parameter_Field><sql:alias>Description</sql:alias><sql:expression><sql:Parameter_String><sql:string_value>A database upgrade handling system.</sql:string_value><sql:escape_character/><sql:operator>C</sql:operator></sql:Parameter_String></sql:expression></sql:Parameter_Field></sql:fields><sql:sources/><sql:top_limit>0</sql:top_limit><sql:operator/></sql:Verb_SELECT></sql:data></sql:Verb_INSERT></sql:statement>
			</statements>
		</step>
	</steps>
</upgrade>