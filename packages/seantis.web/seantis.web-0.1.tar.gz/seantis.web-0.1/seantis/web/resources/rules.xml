<?xml version="1.0" encoding="UTF-8"?>
<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <rules css:if-content="#visual-portal-wrapper">

        <theme href="theme.html" />

        <!-- Head elements -->
        <replace css:theme="html head title" css:content="html head title" />
        <before css:theme-children="html head" css:content="html head base" />
        <after css:theme-children="html head" css:content="html head script" />
        <before css:theme-children="html head">
            <link rel="stylesheet" type="text/css" media="screen" href="portal_css/Sunburst%20Theme/member.css" /> 
            <link rel="stylesheet" type="text/css" media="screen" href="portal_css/Sunburst%20Theme/base.css" />
            <link rel="stylesheet" type="text/css" media="screen" href="portal_css/Sunburst%20Theme/authoring.css" />
        </before>

        <!-- Body -->
        <copy attributes="class" css:theme="body" css:content="body" />

        <!-- Logo -->
        <copy attributes="href" css:theme="#brand" css:content="#portal-logo" />

        <!-- Navigation -->
        <replace css:theme-children="#nav-tabs" css:content-children="#portal-globalnav" />
        <drop css:content="#portaltab-index_html" />

        <!-- Breadcrumbs -->
        <replace css:theme=".breadcrumbs" css:content="#portal-breadcrumbs" />

        <!-- Search -->
        <copy attributes="action" css:theme="#searchbox" css:content="#portal-searchbox form" />
        <copy attributes="name" css:theme="#searchbox .search-query" css:content="#portal-searchbox form .searchField" />
        <drop css:content="#search-field" />

        <!-- Edit bar -->
        <before css:theme="#content" css:content="#edit-bar" />

        <!-- Main columns -->
        <replace css:theme-children="#content" css:content-children="#content" />

        <!-- Drop conflicting classes -->
        <drop css:content=".row" attributes="class"/>
        <drop css:content=".column" attributes="class"/>
        <drop css:content=".searchPage" attributes="class"/>

    </rules>

</rules>
