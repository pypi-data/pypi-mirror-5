<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SimPy’s Object Oriented API - New in Release 2.0 &mdash; SimPy v2.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="SimPy v2.0.1 documentation" href="../index.html" />
    <link rel="up" title="Using SimPy" href="../Using_SimPy.html" />
    <link rel="next" title="Simulation with Tracing" href="Tracing.html" />
    <link rel="prev" title="Simulation with SimPy - In Depth Manual" href="Manual.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Tracing.html" title="Simulation with Tracing"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Manual.html" title="Simulation with SimPy - In Depth Manual"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">SimPy v2.0.1 documentation</a> &raquo;</li>
          <li><a href="../Using_SimPy.html" accesskey="U">Using SimPy</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="simpy-s-object-oriented-api-new-in-release-2-0">
<h1><a class="toc-backref" href="#id1">SimPy&#8217;s Object Oriented API - <strong>New in Release 2.0</strong><a class="headerlink" href="#simpy-s-object-oriented-api-new-in-release-2-0" title="Permalink to this headline">¶</a></a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Authors:</th><td class="field-body"><ul class="first simple">
<li>Klaus Muller &lt;<a class="reference external" href="mailto:Muller&#37;&#52;&#48;users&#46;sourceforge&#46;net">Muller<span>&#64;</span>users<span>&#46;</span>sourceforge<span>&#46;</span>net</a>&gt;</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">SimPy release:</th><td class="field-body"><p class="first">2.0.1</p>
</td>
</tr>
<tr class="field"><th class="field-name">Python version:</th><td class="field-body"><p class="first">2.3 and later (not 3.0)</p>
</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body"><p class="first">$Revision: 313 $</p>
</td>
</tr>
<tr class="field"><th class="field-name">Date:</th><td class="field-body"><p class="first last">$Date: 2009-04-05 01:25:11 +0200 (So, 05 Apr 2009) $</p>
</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#simpy-s-object-oriented-api-new-in-release-2-0" id="id1">SimPy&#8217;s Object Oriented API - <strong>New in Release 2.0</strong></a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li>
<li><a class="reference internal" href="#basic-simpy-oo-api-design" id="id3">Basic SimPy OO API Design</a></li>
<li><a class="reference internal" href="#api-changes" id="id4">API changes</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id2">Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></a></h2>
<p>This document describes the object oriented (OO) API provided by SimPy 2.0. This
is an add-on to the existing API. There is full backward compatibility:
Programs running under SimPy 1.9.1 and earlier releases work unchanged under
version 2.0.</p>
<p>The new API allows different, often more concise, cleaner program patterns.
In particular larger SimPy programs written with the OO API should be
easier to maintain and extend. Users are advised to familiarize themselves
with this programming paradigm new to SimPy by reading the models in the
SimPyModels folder. Most of them are provided in two implementations, i.e. in the
existing and in the OO API. Similarly, the programs in the Bank tutorials
are provided with both APIs.</p>
<p>The new version has been developed very elegantly by Stefan Scherfke and
Ontje Lünsdorf, starting from SimPy 1.9. Thanks, guys, for this great job!</p>
</div>
<div class="section" id="basic-simpy-oo-api-design">
<h2><a class="toc-backref" href="#id3">Basic SimPy OO API Design<a class="headerlink" href="#basic-simpy-oo-api-design" title="Permalink to this headline">¶</a></a></h2>
<p>In SimPy 2.0, a class <strong>Simulation</strong> has been introduced.
<strong>SimulationTrace</strong>, <strong>SimulationStep</strong> and  <strong>SimulationRT</strong> are subclasses of
<strong>Simulation</strong>. Multiple instances of these classes can co-exist in a SimPy program.</p>
<div class="section" id="backward-compatibility">
<h3>Backward compatibility<a class="headerlink" href="#backward-compatibility" title="Permalink to this headline">¶</a></h3>
<p>SimPy 2.0 offers both the old/existing API and an object-oriented API
where simulation capabilities are provided by instantiating <strong>Simulation</strong>,
<strong>SimulationTrace</strong>, <strong>SimulationStep</strong> or  <strong>SimulationRT</strong> are subclasses of
<strong>Simulation</strong>.</p>
<p>Each <strong>SimulationXX</strong> instance has its own event list and therefore its own simulation time.
A <strong>SimulationXX</strong> instance can effectively be considered as a simulated, isolated parallel
world. Any <em>Process</em>, <em>Resource</em>, <em>Store</em>, <em>Level</em>, <em>Monitor</em>, <em>Tally</em> or <em>SimEvent</em>
instance belongs to one and only one world (i.e., <strong>Simulationxx</strong> instance).</p>
<p>The following program shows what this means for API and program structure:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.Simulation</span> <span class="kn">import</span> <span class="o">*</span>
<span class="sd">&quot;&quot;&quot;Object Oriented SimPy API&quot;&quot;&quot;</span>

<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">request</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span>
        <span class="k">yield</span> <span class="n">hold</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="mf">10</span>
        <span class="k">yield</span> <span class="n">release</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span>
        <span class="k">print</span> <span class="s">&quot;Time: </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="n">s</span><span class="o">=</span><span class="n">Simulation</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">Resource</span><span class="p">(</span><span class="n">capacity</span><span class="o">=</span><span class="mf">5</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
<span class="n">auto</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">sim</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">activate</span><span class="p">(</span><span class="n">auto</span><span class="p">,</span><span class="n">auto</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">r</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mf">100</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Using the existing API, the following program is semantically the same and also works
under the OO version:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.Simulation</span> <span class="kn">import</span> <span class="o">*</span>
<span class="sd">&quot;&quot;&quot;Traditional SimPy API&quot;&quot;&quot;</span>
<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">request</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span>
        <span class="k">yield</span> <span class="n">hold</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="mf">10</span>
        <span class="k">yield</span> <span class="n">release</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span>
        <span class="k">print</span> <span class="s">&quot;Time: </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">now</span><span class="p">()</span>

<span class="n">initialize</span><span class="p">()</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">Resource</span><span class="p">(</span><span class="n">capacity</span><span class="o">=</span><span class="mf">5</span><span class="p">)</span>
<span class="n">auto</span> <span class="o">=</span> <span class="n">Car</span><span class="p">()</span>
<span class="n">activate</span><span class="p">(</span><span class="n">auto</span><span class="p">,</span><span class="n">auto</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">r</span><span class="p">))</span>
<span class="n">simulate</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mf">100</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>This full (backwards) compatibility is achieved by the automatic generation
of a <em>SimulationXX</em> instance &#8220;behind the scenes&#8221;.</p>
</div>
<div class="section" id="models-as-simulationxx-subclasses">
<h3>Models as SimulationXX subclasses<a class="headerlink" href="#models-as-simulationxx-subclasses" title="Permalink to this headline">¶</a></h3>
<p>The OO API can be used to generate model classes which are SimulationXX subclasses.
This ties a model and a SimulationXX instance beautifully together. See the following
example:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></td><td class="code"><div class="highlight"><pre><span class="c">## CarModel.py</span>
<span class="kn">from</span> <span class="nn">SimPy.Simulation</span> <span class="kn">import</span> <span class="o">*</span>
<span class="sd">&quot;&quot;&quot;Object Oriented SimPy API&quot;&quot;&quot;</span>

<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">request</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span>
        <span class="k">yield</span> <span class="n">hold</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="mf">10</span>
        <span class="k">yield</span> <span class="n">release</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> done at </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>

<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">Simulation</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">nrCars</span><span class="p">):</span>
        <span class="n">Simulation</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrCars</span><span class="o">=</span><span class="n">nrCars</span>
    <span class="k">def</span> <span class="nf">runModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Resource</span><span class="p">(</span><span class="n">capacity</span><span class="o">=</span><span class="mf">5</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrCars</span><span class="p">):</span>
            <span class="n">auto</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Car</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">activate</span><span class="p">(</span><span class="n">auto</span><span class="p">,</span><span class="n">auto</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">r</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mf">100</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">experiment</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Experiment 1&quot;</span><span class="p">,</span><span class="n">nrCars</span><span class="o">=</span><span class="mf">10</span><span class="p">)</span>
    <span class="n">experiment</span><span class="o">.</span><span class="n">runModel</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">experiment</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>class <tt class="docutils literal"><span class="pre">Model</span></tt> here is a subclass of Simulation. Every model execution, i.e. call to
<tt class="docutils literal"><span class="pre">runModel</span></tt>, reinitializes the simulation (creates a clean event list and sets
the time to 0) (see line 20). <tt class="docutils literal"><span class="pre">runModel</span></tt> can thus be called repeatedly for multiple runs of
the same experiment.</p>
</div>
<div class="section" id="model-extension-by-subclassing">
<h3>Model extension by subclassing<a class="headerlink" href="#model-extension-by-subclassing" title="Permalink to this headline">¶</a></h3>
<p>With the OO API, it is now very easy and clean to extend a model by subclassing. This
effectively allows the creation of model libraries.</p>
<p>The model in the previous example can be extended to one with a variable number
of Resource units (capacity) by subclassing as follows:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></td><td class="code"><div class="highlight"><pre><span class="c">## CarModelExtension.py</span>
<span class="kn">from</span> <span class="nn">CarModel</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">ModelExtension</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">nrCars</span><span class="p">,</span><span class="n">capacity</span><span class="p">):</span>
        <span class="n">Model</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="n">nrCars</span><span class="o">=</span><span class="n">nrCars</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resCapacity</span><span class="o">=</span><span class="n">capacity</span>
    <span class="k">def</span> <span class="nf">runModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Resource</span><span class="p">(</span><span class="n">capacity</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resCapacity</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrCars</span><span class="p">):</span>
            <span class="n">auto</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Car</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">activate</span><span class="p">(</span><span class="n">auto</span><span class="p">,</span><span class="n">auto</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">r</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mf">100</span><span class="p">)</span>

<span class="n">experiment1</span><span class="o">=</span><span class="n">ModelExtension</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Experiment 2&quot;</span><span class="p">,</span><span class="n">nrCars</span><span class="o">=</span><span class="mf">10</span><span class="p">,</span><span class="n">capacity</span><span class="o">=</span><span class="mf">3</span><span class="p">)</span>
<span class="n">experiment1</span><span class="o">.</span><span class="n">runModel</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="api-changes">
<h2><a class="toc-backref" href="#id4">API changes<a class="headerlink" href="#api-changes" title="Permalink to this headline">¶</a></a></h2>
<div class="section" id="new-classes">
<h3>New classes<a class="headerlink" href="#new-classes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="class-simulation">
<h4>class <strong>Simulation</strong><a class="headerlink" href="#class-simulation" title="Permalink to this headline">¶</a></h4>
<p>The simulation capabilities are provided by instantiating class <strong>Simulation</strong>. The three
other SimPy run modes (<strong>SimulationTrace</strong>, <strong>SimulationRT</strong> and <strong>SimulationStep</strong>) are
subclasses of <strong>Simulation</strong>.</p>
<div class="section" id="methods-of-class-simulation">
<h5>Methods of class <strong>Simulation</strong><a class="headerlink" href="#methods-of-class-simulation" title="Permalink to this headline">¶</a></h5>
<p>The semantics and parameters of the methods are identical to those of the non-OO
<strong>SimPy.Simulation</strong> functions of the same name.</p>
<ul class="simple">
<li><em>initialize</em></li>
<li><em>activate</em></li>
<li><em>reactivate</em></li>
<li><em>simulate</em></li>
<li><em>now</em></li>
<li><em>stopSimulation</em></li>
<li><em>startCollection</em></li>
<li><em>allEventNotices</em></li>
<li><em>allEventTimes</em></li>
</ul>
<p>Example calls (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.Simulation</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mf">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="class-simulationtrace">
<h4>class <strong>SimulationTrace</strong><a class="headerlink" href="#class-simulationtrace" title="Permalink to this headline">¶</a></h4>
<p>The simulation capabilities plus tracing are provided by instantiating
class <strong>SimulationTrace</strong>.</p>
<div class="section" id="methods-of-class-simulationtrace">
<h5>Methods of class <strong>SimulationTrace</strong><a class="headerlink" href="#methods-of-class-simulationtrace" title="Permalink to this headline">¶</a></h5>
<p>The <strong>SimulationTrace</strong> subclass does not add any methods to those inherited
from <strong>Simulation</strong>.</p>
<p>The semantics and parameters of the methods are identical to those of the non-OO
<strong>SimPy.SimulationTrace</strong> functions of the same name.</p>
</div>
<div class="section" id="attribute-trace">
<h5>Attribute <strong>trace</strong><a class="headerlink" href="#attribute-trace" title="Permalink to this headline">¶</a></h5>
<p>The initialization of class <strong>SimulationTrace</strong> instantiates an instance of
class <strong>Trace</strong>. This becomes an attribute <strong>trace</strong> of the <strong>SimulationTrace</strong>
instance.</p>
</div>
<div class="section" id="trace-methods">
<h5><strong>Trace</strong> methods<a class="headerlink" href="#trace-methods" title="Permalink to this headline">¶</a></h5>
<p>The semantics and parameters of the <strong>Trace</strong> methods are identical to those of
the non-OO <strong>SimPy.SimulationTrace</strong> <strong>trace</strong> instance of the same name.</p>
<ul class="simple">
<li>trace.start</li>
<li>trace.stop</li>
<li>trace.treset</li>
<li>trace.tchange</li>
<li>trace.ttext</li>
</ul>
<p>Example calls (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.SimulationTrace</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">SimulationTrace</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">ttext</span><span class="p">(</span><span class="s">&quot;Here we go&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="class-simulationrt">
<h4>class <strong>SimulationRT</strong><a class="headerlink" href="#class-simulationrt" title="Permalink to this headline">¶</a></h4>
<p>The simulation capabilities plus real time  synchronization are provided by instantiating
class <strong>SimulationRT</strong>.</p>
<div class="section" id="methods-of-class-simulationrt">
<h5>Methods of class <strong>SimulationRT</strong><a class="headerlink" href="#methods-of-class-simulationrt" title="Permalink to this headline">¶</a></h5>
<p>The <strong>SimulationRT</strong> subclass adds two methods to those inherited
from <strong>Simulation</strong>.</p>
<p>The semantics and parameters of the methods are identical to those of the non-OO
<strong>SimPy.SimulationRT</strong> functions of the same name.</p>
<ul class="simple">
<li>rtnow</li>
<li>rtset</li>
</ul>
<p>Example calls (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.SimulationRT</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
   <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">whichSim</span><span class="p">):</span>
      <span class="n">Process</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="n">whichSim</span><span class="p">)</span>
   <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">rtnow</span><span class="p">()</span>
      <span class="k">yield</span> <span class="n">hold</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="mf">10</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="class-simulationstep">
<h4>class <strong>SimulationStep</strong><a class="headerlink" href="#class-simulationstep" title="Permalink to this headline">¶</a></h4>
<p>The simulation capabilities plus event stepping are provided by instantiating
class <strong>SimulationStep</strong>.</p>
<div class="section" id="methods-of-class-simulationstep">
<h5>Methods of class <strong>SimulationStep</strong><a class="headerlink" href="#methods-of-class-simulationstep" title="Permalink to this headline">¶</a></h5>
<p>The <strong>SimulationStep</strong> subclass adds three methods to those inherited
from <strong>Simulation</strong>.</p>
<p>The semantics and parameters of the methods are identical to those of the non-OO
<strong>SimPy.SimulationStep</strong> functions of the same name.</p>
<ul class="simple">
<li>startStepping</li>
<li>stopStepping</li>
<li>simulateStep</li>
</ul>
<p>Example call (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.SimulationStep</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">SimulationStep</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">simulateStep</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mf">100</span><span class="p">,</span><span class="n">callback</span><span class="o">=</span><span class="n">myCallBack</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="classes-with-a-simulationxx-attribute">
<h3>Classes with a <strong>SimulationXX</strong> attribute<a class="headerlink" href="#classes-with-a-simulationxx-attribute" title="Permalink to this headline">¶</a></h3>
<p>All SimPy entity (<em>Process</em>, <em>Resource</em>, <em>Store</em>, <em>Level</em>, <em>SimEvent</em>)
and monitoring (<em>Monitor</em>, <em>Tally</em>) classes have time-related functions.
In the OO-API of SimPy, they therefore have a <strong>.sim</strong> attribute which is a
reference to the <em>SimulationXX</em> instance to which they belong. This association
is made by providing that reference as a parameter to the constructor of the class.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last"><strong>All class instances instances must refer to the same SimulationXX instance,
i.e., their .sim attributes must have the same value. That value must be the
reference to the SimulationXX instance.</strong> Any deviation from this will
lead to strange misfunctioning of a SimPy script.</p>
</div>
<p>The constructor calls (signatures) for the classes in question thus change as follows:</p>
<div class="section" id="class-process">
<h4>class <strong>Process</strong><a class="headerlink" href="#class-process" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Process</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;a_process&#39;</span><span class="p">,</span> <span class="n">sim</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
   <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">whichSim</span><span class="p">):</span>
       <span class="n">Process</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="n">whichSim</span><span class="p">)</span>

<span class="n">aSim</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">()</span>
<span class="n">aSim</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">c</span><span class="o">=</span><span class="n">Car</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Mine&quot;</span><span class="p">,</span><span class="n">whichSim</span><span class="o">=</span><span class="n">aSim</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="class-resource">
<h4>class <strong>Resource</strong><a class="headerlink" href="#class-resource" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Resource</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">capacity</span> <span class="o">=</span> <span class="mf">1</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;a_resource&#39;</span><span class="p">,</span> <span class="n">unitName</span> <span class="o">=</span> <span class="s">&#39;units&#39;</span><span class="p">,</span>
             <span class="n">qType</span> <span class="o">=</span> <span class="n">FIFO</span><span class="p">,</span> <span class="n">preemptable</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="n">monitored</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
             <span class="n">monitorType</span> <span class="o">=</span> <span class="n">Monitor</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">aSim</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">()</span>
<span class="n">aSim</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">res</span><span class="o">=</span><span class="n">Resource</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Server&quot;</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="n">aSim</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="classes-store-and-level">
<h4>classes <strong>Store</strong> and <strong>Level</strong><a class="headerlink" href="#classes-store-and-level" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Store</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">capacity</span> <span class="o">=</span> <span class="s">&#39;unbounded&#39;</span><span class="p">,</span> <span class="n">unitName</span> <span class="o">=</span> <span class="s">&#39;units&#39;</span><span class="p">,</span>
            <span class="n">putQType</span> <span class="o">=</span> <span class="n">FIFO</span><span class="p">,</span> <span class="n">getQType</span> <span class="o">=</span> <span class="n">FIFO</span><span class="p">,</span>
            <span class="n">monitored</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">monitorType</span> <span class="o">=</span> <span class="n">Monitor</span><span class="p">,</span> <span class="n">initialBuffered</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
            <span class="n">sim</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>

<span class="n">Level</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">capacity</span> <span class="o">=</span> <span class="s">&#39;unbounded&#39;</span><span class="p">,</span> <span class="n">unitName</span> <span class="o">=</span> <span class="s">&#39;units&#39;</span><span class="p">,</span>
            <span class="n">putQType</span> <span class="o">=</span> <span class="n">FIFO</span><span class="p">,</span> <span class="n">getQType</span> <span class="o">=</span> <span class="n">FIFO</span><span class="p">,</span>
            <span class="n">monitored</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">monitorType</span> <span class="o">=</span> <span class="n">Monitor</span><span class="p">,</span> <span class="n">initialBuffered</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
            <span class="n">sim</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">aSim</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">()</span>
<span class="n">aSim</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="nb">buffer</span> <span class="o">=</span> <span class="n">Store</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Parts&quot;</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="n">aSim</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="class-simevent">
<h4>class <strong>SimEvent</strong><a class="headerlink" href="#class-simevent" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SimEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;a_SimEvent&#39;</span><span class="p">,</span> <span class="n">sim</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">aSim</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">()</span>
<span class="n">aSim</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">evt</span> <span class="o">=</span> <span class="n">SimEvent</span><span class="p">(</span><span class="s">&quot;Boing!&quot;</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="n">aSim</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="classes-monitor-and-tally">
<h4>classes <strong>Monitor</strong> and Tally<a class="headerlink" href="#classes-monitor-and-tally" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Monitor</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;a_Monitor&#39;</span><span class="p">,</span> <span class="n">ylab</span> <span class="o">=</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">tlab</span> <span class="o">=</span> <span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="n">sim</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">Tally</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;a_Tally&#39;</span><span class="p">,</span> <span class="n">ylab</span> <span class="o">=</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">tlab</span> <span class="o">=</span> <span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="n">sim</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">aSim</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">()</span>
<span class="n">aSim</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">myMoni</span> <span class="o">=</span> <span class="n">Monitor</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Counting cars&quot;</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="n">aSim</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/sm_SimPy_Logo.png" alt="Logo"/>
            </a></p>
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">SimPy&#8217;s Object Oriented API - <strong>New in Release 2.0</strong></a><ul>
<li><a class="reference external" href="#introduction">Introduction</a></li>
<li><a class="reference external" href="#basic-simpy-oo-api-design">Basic SimPy OO API Design</a><ul>
<li><a class="reference external" href="#backward-compatibility">Backward compatibility</a></li>
<li><a class="reference external" href="#models-as-simulationxx-subclasses">Models as SimulationXX subclasses</a></li>
<li><a class="reference external" href="#model-extension-by-subclassing">Model extension by subclassing</a></li>
</ul>
</li>
<li><a class="reference external" href="#api-changes">API changes</a><ul>
<li><a class="reference external" href="#new-classes">New classes</a><ul>
<li><a class="reference external" href="#class-simulation">class <strong>Simulation</strong></a><ul>
<li><a class="reference external" href="#methods-of-class-simulation">Methods of class <strong>Simulation</strong></a></li>
</ul>
</li>
<li><a class="reference external" href="#class-simulationtrace">class <strong>SimulationTrace</strong></a><ul>
<li><a class="reference external" href="#methods-of-class-simulationtrace">Methods of class <strong>SimulationTrace</strong></a></li>
<li><a class="reference external" href="#attribute-trace">Attribute <strong>trace</strong></a></li>
<li><a class="reference external" href="#trace-methods"><strong>Trace</strong> methods</a></li>
</ul>
</li>
<li><a class="reference external" href="#class-simulationrt">class <strong>SimulationRT</strong></a><ul>
<li><a class="reference external" href="#methods-of-class-simulationrt">Methods of class <strong>SimulationRT</strong></a></li>
</ul>
</li>
<li><a class="reference external" href="#class-simulationstep">class <strong>SimulationStep</strong></a><ul>
<li><a class="reference external" href="#methods-of-class-simulationstep">Methods of class <strong>SimulationStep</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="#classes-with-a-simulationxx-attribute">Classes with a <strong>SimulationXX</strong> attribute</a><ul>
<li><a class="reference external" href="#class-process">class <strong>Process</strong></a></li>
<li><a class="reference external" href="#class-resource">class <strong>Resource</strong></a></li>
<li><a class="reference external" href="#classes-store-and-level">classes <strong>Store</strong> and <strong>Level</strong></a></li>
<li><a class="reference external" href="#class-simevent">class <strong>SimEvent</strong></a></li>
<li><a class="reference external" href="#classes-monitor-and-tally">classes <strong>Monitor</strong> and Tally</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="Manual.html"
                                  title="previous chapter">Simulation with SimPy - In Depth Manual</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="Tracing.html"
                                  title="next chapter">Simulation with Tracing</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/Manuals/SimPyOO_API.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Tracing.html" title="Simulation with Tracing"
             >next</a> |</li>
        <li class="right" >
          <a href="Manual.html" title="Simulation with SimPy - In Depth Manual"
             >previous</a> |</li>
        <li><a href="../index.html">SimPy v2.0.1 documentation</a> &raquo;</li>
          <li><a href="../Using_SimPy.html" >Using SimPy</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2008, 2009; Klaus Muller, Tony Vignaux.
      Last updated on Apr 06, 2009.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
  </body>
</html>