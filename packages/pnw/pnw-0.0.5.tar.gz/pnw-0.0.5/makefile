.PHONY: all
all: pnw.py pnw-doc.pdf	clean

.PHONY: doc
doc: pnw-doc.py

.PHONY: python
python: pnw.py

pnw.py: pnw.pnw
	python ./pnw.pnw  -F pnw.pnw > pnw.py
	chmod +w ./pnw/pnw.py
	echo "# Autogenerated by pnw, better do not edit ..." > ./pnw/pnw.py
	echo "# Edit pnw.pnw in root directory instead." >> ./pnw/pnw.py
	echo "# You have been warned ..." >> ./pnw/pnw.py
	cat pnw.py >> ./pnw/pnw.py
	rm pnw.py
	# just to avoid catastrophes:
	chmod -w ./pnw/pnw.py

pnw-doc.pdf: pnw.pnw ./doc/pnw-doc.pnw
	cd ./doc && $(MAKE) pdf
	cp ./doc/pnw-doc.pdf .

README.rst: README.pnw
	python ./pnw.pnw -RREADME README.pnw > README.rst


.PHONY: clean
clean: 
	rm *~ *.log	 
